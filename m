Return-Path: <driverdev-devel-bounces@linuxdriverproject.org>
X-Original-To: lists+driverdev-devel@lfdr.de
Delivered-To: lists+driverdev-devel@lfdr.de
Received: from silver.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id C7A7127156
	for <lists+driverdev-devel@lfdr.de>; Wed, 22 May 2019 23:06:01 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by silver.osuosl.org (Postfix) with ESMTP id C10D730EE3;
	Wed, 22 May 2019 21:05:59 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from silver.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6oQO1r4a9QGj; Wed, 22 May 2019 21:05:58 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by silver.osuosl.org (Postfix) with ESMTP id 2645A30E8C;
	Wed, 22 May 2019 21:05:52 +0000 (UTC)
X-Original-To: devel@linuxdriverproject.org
Delivered-To: driverdev-devel@osuosl.org
Received: from hemlock.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by ash.osuosl.org (Postfix) with ESMTP id 0FA411BF280
 for <devel@linuxdriverproject.org>; Wed, 22 May 2019 21:05:50 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by hemlock.osuosl.org (Postfix) with ESMTP id 0CDE187EB2
 for <devel@linuxdriverproject.org>; Wed, 22 May 2019 21:05:50 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from hemlock.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id m8QSv+6BXD9M for <devel@linuxdriverproject.org>;
 Wed, 22 May 2019 21:05:46 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.7.6
Received: from mail-lj1-f194.google.com (mail-lj1-f194.google.com
 [209.85.208.194])
 by hemlock.osuosl.org (Postfix) with ESMTPS id 6A76585A7B
 for <devel@driverdev.osuosl.org>; Wed, 22 May 2019 21:05:45 +0000 (UTC)
Received: by mail-lj1-f194.google.com with SMTP id q62so3425366ljq.7
 for <devel@driverdev.osuosl.org>; Wed, 22 May 2019 14:05:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=nikanor-nu.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=G0VeuFD/Da6X42kP1jd0Ruvpg6qBgEbjHndZrYVj8Wo=;
 b=WtPMFVf05FvcCAnpiK9FtZJ+yVhsB/KWfnp1ziiY3npcr8Mav3V0XU47nSJHzOnUQp
 mb/8/7OOsirYx7iiObwkIPdTPmftA7ysXnydIojfOWQh7HjSMQdhLeqisXdKt4E+6zck
 7hOwkKFsA+Bc+D4wcWcIv9vvzMAV3wF91GNMF5lfHc+ccCIuZY491MccPHCVXNghTe8D
 6puSNZ8oj67/LHK8lSKtchZHk1EhquwlhI+1FpDpyQeiuBrpVSf8twXPnjbvLz1Oa5GT
 xZT5SLvhAPNZYI+N644iJKELQ8KNG+W2+EGP0D3TJg5uqSCGVKMcejmGMaDjQ0StQTqY
 1fZQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=G0VeuFD/Da6X42kP1jd0Ruvpg6qBgEbjHndZrYVj8Wo=;
 b=PgftuaopGaQ2tKKfc4r0I2VP6DiR+2NCa+3LkBB9ViliLf8aA6Wu0O92/mHqvT+sMN
 XWpJq1+HKSoBOqz0VcfRddHJgahxpfMff4EgRq88Iq8NtYKfSiqIwgYVwmve7iLi30/3
 koX02Jugoim+TIzc2lDHYzzXyRSc8PV52mWJRGt6BPPcbNLVDMW4taJ8iYNQwYhtnVoB
 lNIgLYFwoBlsu+jkjFGxsVBlb1klTD8EcokIMdZVlh5YAss8mC6KVgoJMVrotWKHRG0y
 pTJ0NYZxX3YuJJc9aSD7nSzTVGTtNXy03F9dblSYsmZSXmZcpkR8r6aCcOcvKCsxFU7p
 FO8w==
X-Gm-Message-State: APjAAAUHTCCB8V1d/Gk+p+H+0Xgh236daNqi1sIgC8hWdPhWnqVhHsUG
 c6JvGFHWTj+XQpK1SEDo26+l9g==
X-Google-Smtp-Source: APXvYqyQ/00hVW+0SnRGHwMegiy5vyLC2Yot/HAnRXe/ecT7f7m4kEpn3PKlXMHHx2iNLSNb01DaxQ==
X-Received: by 2002:a2e:9e14:: with SMTP id e20mr30868527ljk.172.1558558750525; 
 Wed, 22 May 2019 13:59:10 -0700 (PDT)
Received: from dev.nikanor.nu (78-72-133-4-no161.tbcn.telia.com. [78.72.133.4])
 by smtp.gmail.com with ESMTPSA id e12sm5506518lfb.70.2019.05.22.13.59.09
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 22 May 2019 13:59:10 -0700 (PDT)
From: =?UTF-8?q?Simon=20Sandstr=C3=B6m?= <simon@nikanor.nu>
To: gregkh@linuxfoundation.org
Subject: [PATCH 1/6] staging: kpc2000: fix indent in cell_probe.c
Date: Wed, 22 May 2019 22:58:44 +0200
Message-Id: <20190522205849.17444-2-simon@nikanor.nu>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190522205849.17444-1-simon@nikanor.nu>
References: <20190522205849.17444-1-simon@nikanor.nu>
MIME-Version: 1.0
X-BeenThere: driverdev-devel@linuxdriverproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Driver Project Developer List
 <driverdev-devel.linuxdriverproject.org>
List-Unsubscribe: <http://driverdev.linuxdriverproject.org/mailman/options/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=unsubscribe>
List-Archive: <http://driverdev.linuxdriverproject.org/pipermail/driverdev-devel/>
List-Post: <mailto:driverdev-devel@linuxdriverproject.org>
List-Help: <mailto:driverdev-devel-request@linuxdriverproject.org?subject=help>
List-Subscribe: <http://driverdev.linuxdriverproject.org/mailman/listinfo/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=subscribe>
Cc: devel@driverdev.osuosl.org, linux-kernel@vger.kernel.org,
 dan.carpenter@oracle.com,
 =?UTF-8?q?Simon=20Sandstr=C3=B6m?= <simon@nikanor.nu>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: driverdev-devel-bounces@linuxdriverproject.org
Sender: "devel" <driverdev-devel-bounces@linuxdriverproject.org>

VXNlIHRhYnMgaW5zdGVhZCBvZiBzcGFjZXMgZm9yIGluZGVudGF0aW9uLgoKU2lnbmVkLW9mZi1i
eTogU2ltb24gU2FuZHN0csO2bSA8c2ltb25AbmlrYW5vci5udT4KLS0tCiBkcml2ZXJzL3N0YWdp
bmcva3BjMjAwMC9rcGMyMDAwL2NlbGxfcHJvYmUuYyB8IDU3NCArKysrKysrKystLS0tLS0tLS0t
CiAxIGZpbGUgY2hhbmdlZCwgMjg3IGluc2VydGlvbnMoKyksIDI4NyBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGMyMDAwL2NlbGxfcHJvYmUuYyBi
L2RyaXZlcnMvc3RhZ2luZy9rcGMyMDAwL2twYzIwMDAvY2VsbF9wcm9iZS5jCmluZGV4IDAxODFi
MGE4ZmY4Mi4uNmUwMzRkMTE1YjQ3IDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcva3BjMjAw
MC9rcGMyMDAwL2NlbGxfcHJvYmUuYworKysgYi9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGMy
MDAwL2NlbGxfcHJvYmUuYwpAQCAtMjUsNyArMjUsNyBAQAogICogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgICAgICAgICAgICAg
ICAgICAgQzJTIERNQSBQcmVzZW50CiAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERERCAgICAgICAgICAgICAgICBDMlMgRE1B
IENoYW5uZWwgTnVtYmVyICAgIFt1cCB0byA4IGNoYW5uZWxzXQogICogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJSSAgICAg
ICAgICAgICAgSVJRIENvdW50IFswIHRvIDMgSVJRcyBwZXIgY29yZV0KLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAx
MTExMTExMDAwCisgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgMTExMTExMTAwMAogICogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElJSUlJSUkg
ICAgICAgSVJRIEJhc2UgTnVtYmVyIFt1cCB0byAxMjggSVJRcyBwZXIgY2FyZF0KICAqICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgX19fICAgIFNwYXJlCiAgKgpAQCAtNDAsNDUgKzQwLDQ1IEBACiAjZGVmaW5l
IEtQX0NPUkVfSURfU1BJICAgICAgICAgIDUKIAogc3RydWN0IGNvcmVfdGFibGVfZW50cnkgewot
ICAgIHUxNiAgICAgdHlwZTsKLSAgICB1MzIgICAgIG9mZnNldDsKLSAgICB1MzIgICAgIGxlbmd0
aDsKLSAgICBib29sICAgIHMyY19kbWFfcHJlc2VudDsKLSAgICB1OCAgICAgIHMyY19kbWFfY2hh
bm5lbF9udW07Ci0gICAgYm9vbCAgICBjMnNfZG1hX3ByZXNlbnQ7Ci0gICAgdTggICAgICBjMnNf
ZG1hX2NoYW5uZWxfbnVtOwotICAgIHU4ICAgICAgaXJxX2NvdW50OwotICAgIHU4ICAgICAgaXJx
X2Jhc2VfbnVtOworCXUxNiAgdHlwZTsKKwl1MzIgIG9mZnNldDsKKwl1MzIgIGxlbmd0aDsKKwli
b29sIHMyY19kbWFfcHJlc2VudDsKKwl1OCAgIHMyY19kbWFfY2hhbm5lbF9udW07CisJYm9vbCBj
MnNfZG1hX3ByZXNlbnQ7CisJdTggICBjMnNfZG1hX2NoYW5uZWxfbnVtOworCXU4ICAgaXJxX2Nv
dW50OworCXU4ICAgaXJxX2Jhc2VfbnVtOwogfTsKIAogc3RhdGljCiB2b2lkICBwYXJzZV9jb3Jl
X3RhYmxlX2VudHJ5X3YwKHN0cnVjdCBjb3JlX3RhYmxlX2VudHJ5ICpjdGUsIGNvbnN0IHU2NCBy
ZWFkX3ZhbCkKIHsKLSAgICBjdGUtPnR5cGUgICAgICAgICAgICAgICAgPSAoKHJlYWRfdmFsICYg
MHhGRkYwMDAwMDAwMDAwMDAwKSA+PiA1Mik7Ci0gICAgY3RlLT5vZmZzZXQgICAgICAgICAgICAg
ID0gKChyZWFkX3ZhbCAmIDB4MDAwMDAwMDBGRkZGMDAwMCkgPj4gMTYpICogNDA5NjsKLSAgICBj
dGUtPmxlbmd0aCAgICAgICAgICAgICAgPSAoKHJlYWRfdmFsICYgMHgwMDAwRkZGRjAwMDAwMDAw
KSA+PiAzMikgKiA4OwotICAgIGN0ZS0+czJjX2RtYV9wcmVzZW50ICAgICA9ICgocmVhZF92YWwg
JiAweDAwMDgwMDAwMDAwMDAwMDApID4+IDUxKTsKLSAgICBjdGUtPnMyY19kbWFfY2hhbm5lbF9u
dW0gPSAoKHJlYWRfdmFsICYgMHgwMDA3MDAwMDAwMDAwMDAwKSA+PiA0OCk7Ci0gICAgY3RlLT5j
MnNfZG1hX3ByZXNlbnQgICAgID0gKChyZWFkX3ZhbCAmIDB4MDAwMDAwMDAwMDAwODAwMCkgPj4g
MTUpOwotICAgIGN0ZS0+YzJzX2RtYV9jaGFubmVsX251bSA9ICgocmVhZF92YWwgJiAweDAwMDAw
MDAwMDAwMDcwMDApID4+IDEyKTsKLSAgICBjdGUtPmlycV9jb3VudCAgICAgICAgICAgPSAoKHJl
YWRfdmFsICYgMHgwMDAwMDAwMDAwMDAwQzAwKSA+PiAxMCk7Ci0gICAgY3RlLT5pcnFfYmFzZV9u
dW0gICAgICAgID0gKChyZWFkX3ZhbCAmIDB4MDAwMDAwMDAwMDAwMDNGOCkgPj4gIDMpOworCWN0
ZS0+dHlwZSAgICAgICAgICAgICAgICA9ICgocmVhZF92YWwgJiAweEZGRjAwMDAwMDAwMDAwMDAp
ID4+IDUyKTsKKwljdGUtPm9mZnNldCAgICAgICAgICAgICAgPSAoKHJlYWRfdmFsICYgMHgwMDAw
MDAwMEZGRkYwMDAwKSA+PiAxNikgKiA0MDk2OworCWN0ZS0+bGVuZ3RoICAgICAgICAgICAgICA9
ICgocmVhZF92YWwgJiAweDAwMDBGRkZGMDAwMDAwMDApID4+IDMyKSAqIDg7CisJY3RlLT5zMmNf
ZG1hX3ByZXNlbnQgICAgID0gKChyZWFkX3ZhbCAmIDB4MDAwODAwMDAwMDAwMDAwMCkgPj4gNTEp
OworCWN0ZS0+czJjX2RtYV9jaGFubmVsX251bSA9ICgocmVhZF92YWwgJiAweDAwMDcwMDAwMDAw
MDAwMDApID4+IDQ4KTsKKwljdGUtPmMyc19kbWFfcHJlc2VudCAgICAgPSAoKHJlYWRfdmFsICYg
MHgwMDAwMDAwMDAwMDA4MDAwKSA+PiAxNSk7CisJY3RlLT5jMnNfZG1hX2NoYW5uZWxfbnVtID0g
KChyZWFkX3ZhbCAmIDB4MDAwMDAwMDAwMDAwNzAwMCkgPj4gMTIpOworCWN0ZS0+aXJxX2NvdW50
ICAgICAgICAgICA9ICgocmVhZF92YWwgJiAweDAwMDAwMDAwMDAwMDBDMDApID4+IDEwKTsKKwlj
dGUtPmlycV9iYXNlX251bSAgICAgICAgPSAoKHJlYWRfdmFsICYgMHgwMDAwMDAwMDAwMDAwM0Y4
KSA+PiAgMyk7CiB9CiAKIHN0YXRpYwogdm9pZCBkYmdfY3RlKHN0cnVjdCBrcDIwMDBfZGV2aWNl
ICpwY2FyZCwgc3RydWN0IGNvcmVfdGFibGVfZW50cnkgKmN0ZSkKIHsKLSAgICBkZXZfZGJnKCZw
Y2FyZC0+cGRldi0+ZGV2LCAiQ1RFOiB0eXBlOiUzZCAgb2Zmc2V0OiUzZCAoJTNkKSAgbGVuZ3Ro
OiUzZCAoJTNkKSAgczJjOiVkICBjMnM6JWQgIGlycV9jb3VudDolZCAgYmFzZV9pcnE6JWRcbiIs
Ci0gICAgICAgIGN0ZS0+dHlwZSwKLSAgICAgICAgY3RlLT5vZmZzZXQsCi0gICAgICAgIGN0ZS0+
b2Zmc2V0IC8gNDA5NiwKLSAgICAgICAgY3RlLT5sZW5ndGgsCi0gICAgICAgIGN0ZS0+bGVuZ3Ro
IC8gOCwKLSAgICAgICAgKGN0ZS0+czJjX2RtYV9wcmVzZW50ID8gY3RlLT5zMmNfZG1hX2NoYW5u
ZWxfbnVtIDogLTEpLAotICAgICAgICAoY3RlLT5jMnNfZG1hX3ByZXNlbnQgPyBjdGUtPmMyc19k
bWFfY2hhbm5lbF9udW0gOiAtMSksCi0gICAgICAgIGN0ZS0+aXJxX2NvdW50LAotICAgICAgICBj
dGUtPmlycV9iYXNlX251bQotICAgICk7CisJZGV2X2RiZygmcGNhcmQtPnBkZXYtPmRldiwgIkNU
RTogdHlwZTolM2QgIG9mZnNldDolM2QgKCUzZCkgIGxlbmd0aDolM2QgKCUzZCkgIHMyYzolZCAg
YzJzOiVkICBpcnFfY291bnQ6JWQgIGJhc2VfaXJxOiVkXG4iLAorCQljdGUtPnR5cGUsCisJCWN0
ZS0+b2Zmc2V0LAorCQljdGUtPm9mZnNldCAvIDQwOTYsCisJCWN0ZS0+bGVuZ3RoLAorCQljdGUt
Pmxlbmd0aCAvIDgsCisJCShjdGUtPnMyY19kbWFfcHJlc2VudCA/IGN0ZS0+czJjX2RtYV9jaGFu
bmVsX251bSA6IC0xKSwKKwkJKGN0ZS0+YzJzX2RtYV9wcmVzZW50ID8gY3RlLT5jMnNfZG1hX2No
YW5uZWxfbnVtIDogLTEpLAorCQljdGUtPmlycV9jb3VudCwKKwkJY3RlLT5pcnFfYmFzZV9udW0K
KwkpOwogfQogCiBzdGF0aWMKQEAgLTk0LDU1ICs5NCw1NSBAQCB2b2lkIHBhcnNlX2NvcmVfdGFi
bGVfZW50cnkoc3RydWN0IGNvcmVfdGFibGVfZW50cnkgKmN0ZSwgY29uc3QgdTY0IHJlYWRfdmFs
LCBjbwogc3RhdGljIGludCBwcm9iZV9jb3JlX2Jhc2ljKHVuc2lnbmVkIGludCBjb3JlX251bSwg
c3RydWN0IGtwMjAwMF9kZXZpY2UgKnBjYXJkLAogCQkJICAgIGNoYXIgKm5hbWUsIGNvbnN0IHN0
cnVjdCBjb3JlX3RhYmxlX2VudHJ5IGN0ZSkKIHsKLSAgICBzdHJ1Y3QgbWZkX2NlbGwgIGNlbGwg
PSB7IC5pZCA9IGNvcmVfbnVtLCAubmFtZSA9IG5hbWUgfTsKLSAgICBzdHJ1Y3QgcmVzb3VyY2Ug
IHJlc291cmNlc1syXTsKKwlzdHJ1Y3QgbWZkX2NlbGwgIGNlbGwgPSB7IC5pZCA9IGNvcmVfbnVt
LCAubmFtZSA9IG5hbWUgfTsKKwlzdHJ1Y3QgcmVzb3VyY2UgcmVzb3VyY2VzWzJdOwogCi0gICAg
c3RydWN0IGtwY19jb3JlX2RldmljZV9wbGF0ZGF0YSAgY29yZV9wZGF0YSA9IHsKLSAgICAgICAg
LmNhcmRfaWQgICAgICAgICAgID0gcGNhcmQtPmNhcmRfaWQsCi0gICAgICAgIC5idWlsZF92ZXJz
aW9uICAgICA9IHBjYXJkLT5idWlsZF92ZXJzaW9uLAotICAgICAgICAuaGFyZHdhcmVfcmV2aXNp
b24gPSBwY2FyZC0+aGFyZHdhcmVfcmV2aXNpb24sCi0gICAgICAgIC5zc2lkICAgICAgICAgICAg
ICA9IHBjYXJkLT5zc2lkLAotICAgICAgICAuZGRuYSAgICAgICAgICAgICAgPSBwY2FyZC0+ZGRu
YSwKLSAgICB9OworCXN0cnVjdCBrcGNfY29yZV9kZXZpY2VfcGxhdGRhdGEgY29yZV9wZGF0YSA9
IHsKKwkJLmNhcmRfaWQgICAgICAgICAgID0gcGNhcmQtPmNhcmRfaWQsCisJCS5idWlsZF92ZXJz
aW9uICAgICA9IHBjYXJkLT5idWlsZF92ZXJzaW9uLAorCQkuaGFyZHdhcmVfcmV2aXNpb24gPSBw
Y2FyZC0+aGFyZHdhcmVfcmV2aXNpb24sCisJCS5zc2lkICAgICAgICAgICAgICA9IHBjYXJkLT5z
c2lkLAorCQkuZGRuYSAgICAgICAgICAgICAgPSBwY2FyZC0+ZGRuYSwKKwl9OwogCi0gICAgZGV2
X2RiZygmcGNhcmQtPnBkZXYtPmRldiwgIkZvdW5kIEJhc2ljIGNvcmU6IHR5cGUgPSAlMDJkICBk
bWEgPSAlMDJ4IC8gJTAyeCAgb2Zmc2V0ID0gMHgleCAgbGVuZ3RoID0gMHgleCAoJWQgcmVncylc
biIsIGN0ZS50eXBlLCBLUENfT0xEX1MyQ19ETUFfQ0hfTlVNKGN0ZSksIEtQQ19PTERfQzJTX0RN
QV9DSF9OVU0oY3RlKSwgY3RlLm9mZnNldCwgY3RlLmxlbmd0aCwgY3RlLmxlbmd0aCAvIDgpOwor
CWRldl9kYmcoJnBjYXJkLT5wZGV2LT5kZXYsICJGb3VuZCBCYXNpYyBjb3JlOiB0eXBlID0gJTAy
ZCAgZG1hID0gJTAyeCAvICUwMnggIG9mZnNldCA9IDB4JXggIGxlbmd0aCA9IDB4JXggKCVkIHJl
Z3MpXG4iLCBjdGUudHlwZSwgS1BDX09MRF9TMkNfRE1BX0NIX05VTShjdGUpLCBLUENfT0xEX0My
U19ETUFfQ0hfTlVNKGN0ZSksIGN0ZS5vZmZzZXQsIGN0ZS5sZW5ndGgsIGN0ZS5sZW5ndGggLyA4
KTsKIAogCi0gICAgY2VsbC5wbGF0Zm9ybV9kYXRhID0gJmNvcmVfcGRhdGE7Ci0gICAgY2VsbC5w
ZGF0YV9zaXplID0gc2l6ZW9mKHN0cnVjdCBrcGNfY29yZV9kZXZpY2VfcGxhdGRhdGEpOwotICAg
IGNlbGwubnVtX3Jlc291cmNlcyA9IDI7CisJY2VsbC5wbGF0Zm9ybV9kYXRhID0gJmNvcmVfcGRh
dGE7CisJY2VsbC5wZGF0YV9zaXplID0gc2l6ZW9mKHN0cnVjdCBrcGNfY29yZV9kZXZpY2VfcGxh
dGRhdGEpOworCWNlbGwubnVtX3Jlc291cmNlcyA9IDI7CiAKLSAgICBtZW1zZXQoJnJlc291cmNl
cywgMCwgc2l6ZW9mKHJlc291cmNlcykpOworCW1lbXNldCgmcmVzb3VyY2VzLCAwLCBzaXplb2Yo
cmVzb3VyY2VzKSk7CiAKLSAgICByZXNvdXJjZXNbMF0uc3RhcnQgPSBjdGUub2Zmc2V0OwotICAg
IHJlc291cmNlc1swXS5lbmQgICA9IGN0ZS5vZmZzZXQgKyAoY3RlLmxlbmd0aCAtIDEpOwotICAg
IHJlc291cmNlc1swXS5mbGFncyA9IElPUkVTT1VSQ0VfTUVNOworCXJlc291cmNlc1swXS5zdGFy
dCA9IGN0ZS5vZmZzZXQ7CisJcmVzb3VyY2VzWzBdLmVuZCAgID0gY3RlLm9mZnNldCArIChjdGUu
bGVuZ3RoIC0gMSk7CisJcmVzb3VyY2VzWzBdLmZsYWdzID0gSU9SRVNPVVJDRV9NRU07CiAKLSAg
ICByZXNvdXJjZXNbMV0uc3RhcnQgPSBwY2FyZC0+cGRldi0+aXJxOwotICAgIHJlc291cmNlc1sx
XS5lbmQgICA9IHBjYXJkLT5wZGV2LT5pcnE7Ci0gICAgcmVzb3VyY2VzWzFdLmZsYWdzID0gSU9S
RVNPVVJDRV9JUlE7CisJcmVzb3VyY2VzWzFdLnN0YXJ0ID0gcGNhcmQtPnBkZXYtPmlycTsKKwly
ZXNvdXJjZXNbMV0uZW5kICAgPSBwY2FyZC0+cGRldi0+aXJxOworCXJlc291cmNlc1sxXS5mbGFn
cyA9IElPUkVTT1VSQ0VfSVJROwogCi0gICAgY2VsbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7CisJ
Y2VsbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7CiAKLSAgICByZXR1cm4gbWZkX2FkZF9kZXZpY2Vz
KAotICAgICAgICBQQ0FSRF9UT19ERVYocGNhcmQpLCAgICAvLyBwYXJlbnQKLSAgICAgICAgcGNh
cmQtPmNhcmRfbnVtICogMTAwLCAgLy8gaWQKLSAgICAgICAgJmNlbGwsICAgICAgICAgICAgICAg
ICAgLy8gc3RydWN0IG1mZF9jZWxsICoKLSAgICAgICAgMSwgICAgICAgICAgICAgICAgICAgICAg
Ly8gbmRldnMKLSAgICAgICAgJnBjYXJkLT5yZWdzX2Jhc2VfcmVzb3VyY2UsCi0gICAgICAgIDAs
ICAgICAgICAgICAgICAgICAgICAgIC8vIGlycV9iYXNlCi0gICAgICAgIE5VTEwgICAgICAgICAg
ICAgICAgICAgIC8vIHN0cnVjdCBpcnFfZG9tYWluICoKLSAgICApOworCXJldHVybiBtZmRfYWRk
X2RldmljZXMoCisJCVBDQVJEX1RPX0RFVihwY2FyZCksICAgIC8vIHBhcmVudAorCQlwY2FyZC0+
Y2FyZF9udW0gKiAxMDAsICAvLyBpZAorCQkmY2VsbCwgICAgICAgICAgICAgICAgICAvLyBzdHJ1
Y3QgbWZkX2NlbGwgKgorCQkxLCAgICAgICAgICAgICAgICAgICAgICAvLyBuZGV2cworCQkmcGNh
cmQtPnJlZ3NfYmFzZV9yZXNvdXJjZSwKKwkJMCwgICAgICAgICAgICAgICAgICAgICAgLy8gaXJx
X2Jhc2UKKwkJTlVMTCAgICAgICAgICAgICAgICAgICAgLy8gc3RydWN0IGlycV9kb21haW4gKgor
CSk7CiB9CiAKIAogc3RydWN0IGtwY191aW9fZGV2aWNlIHsKLSAgICBzdHJ1Y3QgbGlzdF9oZWFk
IGxpc3Q7Ci0gICAgc3RydWN0IGtwMjAwMF9kZXZpY2UgKnBjYXJkOwotICAgIHN0cnVjdCBkZXZp
Y2UgICpkZXY7Ci0gICAgc3RydWN0IHVpb19pbmZvIHVpb2luZm87Ci0gICAgc3RydWN0IGNvcmVf
dGFibGVfZW50cnkgY3RlOwotICAgIHUxNiBjb3JlX251bTsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGxp
c3Q7CisJc3RydWN0IGtwMjAwMF9kZXZpY2UgKnBjYXJkOworCXN0cnVjdCBkZXZpY2UgICpkZXY7
CisJc3RydWN0IHVpb19pbmZvIHVpb2luZm87CisJc3RydWN0IGNvcmVfdGFibGVfZW50cnkgY3Rl
OworCXUxNiBjb3JlX251bTsKIH07CiAKIHN0YXRpYyBzc2l6ZV90IG9mZnNldF9zaG93KHN0cnVj
dCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsCkBAIC0yMzgsMjcz
ICsyMzgsMjczIEBAIHN0cnVjdCBhdHRyaWJ1dGUgKmtwY191aW9fY2xhc3NfYXR0cnNbXSA9IHsK
IHN0YXRpYwogaW50ICBrcDIwMDBfY2hlY2tfdWlvX2lycShzdHJ1Y3Qga3AyMDAwX2RldmljZSAq
cGNhcmQsIHUzMiBpcnFfbnVtKQogewotICAgIHU2NCBpbnRlcnJ1cHRfYWN0aXZlICAgPSAgcmVh
ZHEocGNhcmQtPnN5c2luZm9fcmVnc19iYXNlICsgUkVHX0lOVEVSUlVQVF9BQ1RJVkUpOwotICAg
IHU2NCBpbnRlcnJ1cHRfbWFza19pbnYgPSB+cmVhZHEocGNhcmQtPnN5c2luZm9fcmVnc19iYXNl
ICsgUkVHX0lOVEVSUlVQVF9NQVNLKTsKLSAgICB1NjQgaXJxX2NoZWNrX21hc2sgPSAoMSA8PCBp
cnFfbnVtKTsKLSAgICBpZiAoaW50ZXJydXB0X2FjdGl2ZSAmIGlycV9jaGVja19tYXNrKXsgLy8g
aWYgaXQncyBhY3RpdmUgKGludGVycnVwdCBwZW5kaW5nKQotICAgICAgICBpZiAoaW50ZXJydXB0
X21hc2tfaW52ICYgaXJxX2NoZWNrX21hc2speyAgICAvLyBhbmQgaWYgaXQncyBub3QgbWFza2Vk
IG9mZgotICAgICAgICAgICAgcmV0dXJuIDE7Ci0gICAgICAgIH0KLSAgICB9Ci0gICAgcmV0dXJu
IDA7CisJdTY0IGludGVycnVwdF9hY3RpdmUgICA9ICByZWFkcShwY2FyZC0+c3lzaW5mb19yZWdz
X2Jhc2UgKyBSRUdfSU5URVJSVVBUX0FDVElWRSk7CisJdTY0IGludGVycnVwdF9tYXNrX2ludiA9
IH5yZWFkcShwY2FyZC0+c3lzaW5mb19yZWdzX2Jhc2UgKyBSRUdfSU5URVJSVVBUX01BU0spOwor
CXU2NCBpcnFfY2hlY2tfbWFzayA9ICgxIDw8IGlycV9udW0pOworCWlmIChpbnRlcnJ1cHRfYWN0
aXZlICYgaXJxX2NoZWNrX21hc2speyAvLyBpZiBpdCdzIGFjdGl2ZSAoaW50ZXJydXB0IHBlbmRp
bmcpCisJCWlmIChpbnRlcnJ1cHRfbWFza19pbnYgJiBpcnFfY2hlY2tfbWFzayl7ICAgIC8vIGFu
ZCBpZiBpdCdzIG5vdCBtYXNrZWQgb2ZmCisJCQlyZXR1cm4gMTsKKwkJfQorCX0KKwlyZXR1cm4g
MDsKIH0KIAogc3RhdGljCiBpcnFyZXR1cm5fdCAga3Vpb19oYW5kbGVyKGludCBpcnEsIHN0cnVj
dCB1aW9faW5mbyAqdWlvaW5mbykKIHsKLSAgICBzdHJ1Y3Qga3BjX3Vpb19kZXZpY2UgKmt1ZGV2
ID0gdWlvaW5mby0+cHJpdjsKLSAgICBpZiAoaXJxICE9IGt1ZGV2LT5wY2FyZC0+cGRldi0+aXJx
KQotICAgICAgICByZXR1cm4gSVJRX05PTkU7Ci0KLSAgICBpZiAoa3AyMDAwX2NoZWNrX3Vpb19p
cnEoa3VkZXYtPnBjYXJkLCBrdWRldi0+Y3RlLmlycV9iYXNlX251bSkpewotICAgICAgICB3cml0
ZXEoKDEgPDwga3VkZXYtPmN0ZS5pcnFfYmFzZV9udW0pLCBrdWRldi0+cGNhcmQtPnN5c2luZm9f
cmVnc19iYXNlICsgUkVHX0lOVEVSUlVQVF9BQ1RJVkUpOyAvLyBDbGVhciB0aGUgYWN0aXZlIGZs
YWcKLSAgICAgICAgcmV0dXJuIElSUV9IQU5ETEVEOwotICAgIH0KLSAgICByZXR1cm4gSVJRX05P
TkU7CisJc3RydWN0IGtwY191aW9fZGV2aWNlICprdWRldiA9IHVpb2luZm8tPnByaXY7CisJaWYg
KGlycSAhPSBrdWRldi0+cGNhcmQtPnBkZXYtPmlycSkKKwkJcmV0dXJuIElSUV9OT05FOworCisJ
aWYgKGtwMjAwMF9jaGVja191aW9faXJxKGt1ZGV2LT5wY2FyZCwga3VkZXYtPmN0ZS5pcnFfYmFz
ZV9udW0pKXsKKwkJd3JpdGVxKCgxIDw8IGt1ZGV2LT5jdGUuaXJxX2Jhc2VfbnVtKSwga3VkZXYt
PnBjYXJkLT5zeXNpbmZvX3JlZ3NfYmFzZSArIFJFR19JTlRFUlJVUFRfQUNUSVZFKTsgLy8gQ2xl
YXIgdGhlIGFjdGl2ZSBmbGFnCisJCXJldHVybiBJUlFfSEFORExFRDsKKwl9CisJcmV0dXJuIElS
UV9OT05FOwogfQogCiBzdGF0aWMKIGludCBrdWlvX2lycWNvbnRyb2woc3RydWN0IHVpb19pbmZv
ICp1aW9pbmZvLCBzMzIgaXJxX29uKQogewotICAgIHN0cnVjdCBrcGNfdWlvX2RldmljZSAqa3Vk
ZXYgPSB1aW9pbmZvLT5wcml2OwotICAgIHN0cnVjdCBrcDIwMDBfZGV2aWNlICpwY2FyZCA9IGt1
ZGV2LT5wY2FyZDsKLSAgICB1NjQgbWFzazsKKwlzdHJ1Y3Qga3BjX3Vpb19kZXZpY2UgKmt1ZGV2
ID0gdWlvaW5mby0+cHJpdjsKKwlzdHJ1Y3Qga3AyMDAwX2RldmljZSAqcGNhcmQgPSBrdWRldi0+
cGNhcmQ7CisJdTY0IG1hc2s7CiAKIAltdXRleF9sb2NrKCZwY2FyZC0+c2VtKTsKLSAgICBtYXNr
ID0gcmVhZHEocGNhcmQtPnN5c2luZm9fcmVnc19iYXNlICsgUkVHX0lOVEVSUlVQVF9NQVNLKTsK
LSAgICBpZiAoaXJxX29uKXsKLSAgICAgICAgbWFzayAmPSB+KDEgPDwgKGt1ZGV2LT5jdGUuaXJx
X2Jhc2VfbnVtKSk7Ci0gICAgfSBlbHNlIHsKLSAgICAgICAgbWFzayB8PSAoMSA8PCAoa3VkZXYt
PmN0ZS5pcnFfYmFzZV9udW0pKTsKLSAgICB9Ci0gICAgd3JpdGVxKG1hc2ssIHBjYXJkLT5zeXNp
bmZvX3JlZ3NfYmFzZSArIFJFR19JTlRFUlJVUFRfTUFTSyk7CisJbWFzayA9IHJlYWRxKHBjYXJk
LT5zeXNpbmZvX3JlZ3NfYmFzZSArIFJFR19JTlRFUlJVUFRfTUFTSyk7CisJaWYgKGlycV9vbil7
CisJCW1hc2sgJj0gfigxIDw8IChrdWRldi0+Y3RlLmlycV9iYXNlX251bSkpOworCX0gZWxzZSB7
CisJCW1hc2sgfD0gKDEgPDwgKGt1ZGV2LT5jdGUuaXJxX2Jhc2VfbnVtKSk7CisJfQorCXdyaXRl
cShtYXNrLCBwY2FyZC0+c3lzaW5mb19yZWdzX2Jhc2UgKyBSRUdfSU5URVJSVVBUX01BU0spOwog
CW11dGV4X3VubG9jaygmcGNhcmQtPnNlbSk7CiAKLSAgICByZXR1cm4gMDsKKwlyZXR1cm4gMDsK
IH0KIAogc3RhdGljIGludCBwcm9iZV9jb3JlX3Vpbyh1bnNpZ25lZCBpbnQgY29yZV9udW0sIHN0
cnVjdCBrcDIwMDBfZGV2aWNlICpwY2FyZCwKIAkJCSAgY2hhciAqbmFtZSwgY29uc3Qgc3RydWN0
IGNvcmVfdGFibGVfZW50cnkgY3RlKQogewotICAgIHN0cnVjdCBrcGNfdWlvX2RldmljZSAgKmt1
ZGV2OwotICAgIGludCBydjsKLQotICAgIGRldl9kYmcoJnBjYXJkLT5wZGV2LT5kZXYsICJGb3Vu
ZCBVSU8gY29yZTogICB0eXBlID0gJTAyZCAgZG1hID0gJTAyeCAvICUwMnggIG9mZnNldCA9IDB4
JXggIGxlbmd0aCA9IDB4JXggKCVkIHJlZ3MpXG4iLCBjdGUudHlwZSwgS1BDX09MRF9TMkNfRE1B
X0NIX05VTShjdGUpLCBLUENfT0xEX0MyU19ETUFfQ0hfTlVNKGN0ZSksIGN0ZS5vZmZzZXQsIGN0
ZS5sZW5ndGgsIGN0ZS5sZW5ndGggLyA4KTsKLQotICAgIGt1ZGV2ID0ga3phbGxvYyhzaXplb2Yo
c3RydWN0IGtwY191aW9fZGV2aWNlKSwgR0ZQX0tFUk5FTCk7Ci0gICAgaWYgKCFrdWRldil7Ci0g
ICAgICAgIGRldl9lcnIoJnBjYXJkLT5wZGV2LT5kZXYsICJwcm9iZV9jb3JlX3VpbzogZmFpbGVk
IHRvIGt6YWxsb2Mga3BjX3Vpb19kZXZpY2VcbiIpOwotICAgICAgICByZXR1cm4gLUVOT01FTTsK
LSAgICB9Ci0KLSAgICBJTklUX0xJU1RfSEVBRCgma3VkZXYtPmxpc3QpOwotICAgIGt1ZGV2LT5w
Y2FyZCA9IHBjYXJkOwotICAgIGt1ZGV2LT5jdGUgPSBjdGU7Ci0gICAga3VkZXYtPmNvcmVfbnVt
ID0gY29yZV9udW07Ci0KLSAgICBrdWRldi0+dWlvaW5mby5wcml2ID0ga3VkZXY7Ci0gICAga3Vk
ZXYtPnVpb2luZm8ubmFtZSA9IG5hbWU7Ci0gICAga3VkZXYtPnVpb2luZm8udmVyc2lvbiA9ICIw
LjAiOwotICAgIGlmIChjdGUuaXJxX2NvdW50ID4gMCl7Ci0gICAgICAgIGt1ZGV2LT51aW9pbmZv
LmlycV9mbGFncyA9IElSUUZfU0hBUkVEOwotICAgICAgICBrdWRldi0+dWlvaW5mby5pcnEgPSBw
Y2FyZC0+cGRldi0+aXJxOwotICAgICAgICBrdWRldi0+dWlvaW5mby5oYW5kbGVyID0ga3Vpb19o
YW5kbGVyOwotICAgICAgICBrdWRldi0+dWlvaW5mby5pcnFjb250cm9sID0ga3Vpb19pcnFjb250
cm9sOwotICAgIH0gZWxzZSB7Ci0gICAgICAgIGt1ZGV2LT51aW9pbmZvLmlycSA9IDA7Ci0gICAg
fQotCi0gICAga3VkZXYtPnVpb2luZm8ubWVtWzBdLm5hbWUgPSAidWlvbWFwIjsKLSAgICBrdWRl
di0+dWlvaW5mby5tZW1bMF0uYWRkciA9IHBjaV9yZXNvdXJjZV9zdGFydChwY2FyZC0+cGRldiwg
UkVHX0JBUikgKyBjdGUub2Zmc2V0OwotICAgIGt1ZGV2LT51aW9pbmZvLm1lbVswXS5zaXplID0g
KGN0ZS5sZW5ndGggKyBQQUdFX1NJWkUtMSkgJiB+KFBBR0VfU0laRS0xKTsgLy8gUm91bmQgdXAg
dG8gbmVhcmVzdCBQQUdFX1NJWkUgYm91bmRhcnkKLSAgICBrdWRldi0+dWlvaW5mby5tZW1bMF0u
bWVtdHlwZSA9IFVJT19NRU1fUEhZUzsKLQotICAgIGt1ZGV2LT5kZXYgPSBkZXZpY2VfY3JlYXRl
KGtwY191aW9fY2xhc3MsICZwY2FyZC0+cGRldi0+ZGV2LCBNS0RFVigwLDApLCBrdWRldiwgIiVz
LiVkLiVkLiVkIiwga3VkZXYtPnVpb2luZm8ubmFtZSwgcGNhcmQtPmNhcmRfbnVtLCBjdGUudHlw
ZSwga3VkZXYtPmNvcmVfbnVtKTsKLSAgICBpZiAoSVNfRVJSKGt1ZGV2LT5kZXYpKSB7Ci0gICAg
ICAgIGRldl9lcnIoJnBjYXJkLT5wZGV2LT5kZXYsICJwcm9iZV9jb3JlX3VpbyBkZXZpY2VfY3Jl
YXRlIGZhaWxlZCFcbiIpOwotICAgICAgICBrZnJlZShrdWRldik7Ci0gICAgICAgIHJldHVybiAt
RU5PREVWOwotICAgIH0KLSAgICBkZXZfc2V0X2RydmRhdGEoa3VkZXYtPmRldiwga3VkZXYpOwot
Ci0gICAgcnYgPSB1aW9fcmVnaXN0ZXJfZGV2aWNlKGt1ZGV2LT5kZXYsICZrdWRldi0+dWlvaW5m
byk7Ci0gICAgaWYgKHJ2KXsKLSAgICAgICAgZGV2X2VycigmcGNhcmQtPnBkZXYtPmRldiwgInBy
b2JlX2NvcmVfdWlvIGZhaWxlZCB1aW9fcmVnaXN0ZXJfZGV2aWNlOiAlZFxuIiwgcnYpOwotICAg
ICAgICBwdXRfZGV2aWNlKGt1ZGV2LT5kZXYpOwotICAgICAgICBrZnJlZShrdWRldik7Ci0gICAg
ICAgIHJldHVybiBydjsKLSAgICB9Ci0KLSAgICBsaXN0X2FkZF90YWlsKCZrdWRldi0+bGlzdCwg
JnBjYXJkLT51aW9fZGV2aWNlc19saXN0KTsKLQotICAgIHJldHVybiAwOworCXN0cnVjdCBrcGNf
dWlvX2RldmljZSAqa3VkZXY7CisJaW50IHJ2OworCisJZGV2X2RiZygmcGNhcmQtPnBkZXYtPmRl
diwgIkZvdW5kIFVJTyBjb3JlOiAgIHR5cGUgPSAlMDJkICBkbWEgPSAlMDJ4IC8gJTAyeCAgb2Zm
c2V0ID0gMHgleCAgbGVuZ3RoID0gMHgleCAoJWQgcmVncylcbiIsIGN0ZS50eXBlLCBLUENfT0xE
X1MyQ19ETUFfQ0hfTlVNKGN0ZSksIEtQQ19PTERfQzJTX0RNQV9DSF9OVU0oY3RlKSwgY3RlLm9m
ZnNldCwgY3RlLmxlbmd0aCwgY3RlLmxlbmd0aCAvIDgpOworCisJa3VkZXYgPSBremFsbG9jKHNp
emVvZihzdHJ1Y3Qga3BjX3Vpb19kZXZpY2UpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWt1ZGV2KXsK
KwkJZGV2X2VycigmcGNhcmQtPnBkZXYtPmRldiwgInByb2JlX2NvcmVfdWlvOiBmYWlsZWQgdG8g
a3phbGxvYyBrcGNfdWlvX2RldmljZVxuIik7CisJCXJldHVybiAtRU5PTUVNOworCX0KKworCUlO
SVRfTElTVF9IRUFEKCZrdWRldi0+bGlzdCk7CisJa3VkZXYtPnBjYXJkID0gcGNhcmQ7CisJa3Vk
ZXYtPmN0ZSA9IGN0ZTsKKwlrdWRldi0+Y29yZV9udW0gPSBjb3JlX251bTsKKworCWt1ZGV2LT51
aW9pbmZvLnByaXYgPSBrdWRldjsKKwlrdWRldi0+dWlvaW5mby5uYW1lID0gbmFtZTsKKwlrdWRl
di0+dWlvaW5mby52ZXJzaW9uID0gIjAuMCI7CisJaWYgKGN0ZS5pcnFfY291bnQgPiAwKXsKKwkJ
a3VkZXYtPnVpb2luZm8uaXJxX2ZsYWdzID0gSVJRRl9TSEFSRUQ7CisJCWt1ZGV2LT51aW9pbmZv
LmlycSA9IHBjYXJkLT5wZGV2LT5pcnE7CisJCWt1ZGV2LT51aW9pbmZvLmhhbmRsZXIgPSBrdWlv
X2hhbmRsZXI7CisJCWt1ZGV2LT51aW9pbmZvLmlycWNvbnRyb2wgPSBrdWlvX2lycWNvbnRyb2w7
CisJfSBlbHNlIHsKKwkJa3VkZXYtPnVpb2luZm8uaXJxID0gMDsKKwl9CisKKwlrdWRldi0+dWlv
aW5mby5tZW1bMF0ubmFtZSA9ICJ1aW9tYXAiOworCWt1ZGV2LT51aW9pbmZvLm1lbVswXS5hZGRy
ID0gcGNpX3Jlc291cmNlX3N0YXJ0KHBjYXJkLT5wZGV2LCBSRUdfQkFSKSArIGN0ZS5vZmZzZXQ7
CisJa3VkZXYtPnVpb2luZm8ubWVtWzBdLnNpemUgPSAoY3RlLmxlbmd0aCArIFBBR0VfU0laRS0x
KSAmIH4oUEFHRV9TSVpFLTEpOyAvLyBSb3VuZCB1cCB0byBuZWFyZXN0IFBBR0VfU0laRSBib3Vu
ZGFyeQorCWt1ZGV2LT51aW9pbmZvLm1lbVswXS5tZW10eXBlID0gVUlPX01FTV9QSFlTOworCisJ
a3VkZXYtPmRldiA9IGRldmljZV9jcmVhdGUoa3BjX3Vpb19jbGFzcywgJnBjYXJkLT5wZGV2LT5k
ZXYsIE1LREVWKDAsMCksIGt1ZGV2LCAiJXMuJWQuJWQuJWQiLCBrdWRldi0+dWlvaW5mby5uYW1l
LCBwY2FyZC0+Y2FyZF9udW0sIGN0ZS50eXBlLCBrdWRldi0+Y29yZV9udW0pOworCWlmIChJU19F
UlIoa3VkZXYtPmRldikpIHsKKwkJZGV2X2VycigmcGNhcmQtPnBkZXYtPmRldiwgInByb2JlX2Nv
cmVfdWlvIGRldmljZV9jcmVhdGUgZmFpbGVkIVxuIik7CisJCWtmcmVlKGt1ZGV2KTsKKwkJcmV0
dXJuIC1FTk9ERVY7CisJfQorCWRldl9zZXRfZHJ2ZGF0YShrdWRldi0+ZGV2LCBrdWRldik7CisK
KwlydiA9IHVpb19yZWdpc3Rlcl9kZXZpY2Uoa3VkZXYtPmRldiwgJmt1ZGV2LT51aW9pbmZvKTsK
KwlpZiAocnYpeworCQlkZXZfZXJyKCZwY2FyZC0+cGRldi0+ZGV2LCAicHJvYmVfY29yZV91aW8g
ZmFpbGVkIHVpb19yZWdpc3Rlcl9kZXZpY2U6ICVkXG4iLCBydik7CisJCXB1dF9kZXZpY2Uoa3Vk
ZXYtPmRldik7CisJCWtmcmVlKGt1ZGV2KTsKKwkJcmV0dXJuIHJ2OworCX0KKworCWxpc3RfYWRk
X3RhaWwoJmt1ZGV2LT5saXN0LCAmcGNhcmQtPnVpb19kZXZpY2VzX2xpc3QpOworCisJcmV0dXJu
IDA7CiB9CiAKIAogc3RhdGljIGludCAgY3JlYXRlX2RtYV9lbmdpbmVfY29yZShzdHJ1Y3Qga3Ay
MDAwX2RldmljZSAqcGNhcmQsIHNpemVfdCBlbmdpbmVfcmVnc19vZmZzZXQsIGludCBlbmdpbmVf
bnVtLCBpbnQgaXJxX251bSkKIHsKLSAgICBzdHJ1Y3QgbWZkX2NlbGwgIGNlbGwgPSB7IC5pZCA9
IGVuZ2luZV9udW0gfTsKLSAgICBzdHJ1Y3QgcmVzb3VyY2UgIHJlc291cmNlc1syXTsKKwlzdHJ1
Y3QgbWZkX2NlbGwgIGNlbGwgPSB7IC5pZCA9IGVuZ2luZV9udW0gfTsKKwlzdHJ1Y3QgcmVzb3Vy
Y2UgIHJlc291cmNlc1syXTsKIAotICAgIGRldl9kYmcoJnBjYXJkLT5wZGV2LT5kZXYsICJjcmVh
dGVfZG1hX2NvcmUocGNhcmQgPSBbJXBdLCBlbmdpbmVfcmVnc19vZmZzZXQgPSAlengsIGVuZ2lu
ZV9udW0gPSAlZClcbiIsIHBjYXJkLCBlbmdpbmVfcmVnc19vZmZzZXQsIGVuZ2luZV9udW0pOwor
CWRldl9kYmcoJnBjYXJkLT5wZGV2LT5kZXYsICJjcmVhdGVfZG1hX2NvcmUocGNhcmQgPSBbJXBd
LCBlbmdpbmVfcmVnc19vZmZzZXQgPSAlengsIGVuZ2luZV9udW0gPSAlZClcbiIsIHBjYXJkLCBl
bmdpbmVfcmVnc19vZmZzZXQsIGVuZ2luZV9udW0pOwogCi0gICAgY2VsbC5wbGF0Zm9ybV9kYXRh
ID0gTlVMTDsKLSAgICBjZWxsLnBkYXRhX3NpemUgPSAwOwotICAgIGNlbGwubmFtZSA9IEtQX0RS
SVZFUl9OQU1FX0RNQV9DT05UUk9MTEVSOwotICAgIGNlbGwubnVtX3Jlc291cmNlcyA9IDI7CisJ
Y2VsbC5wbGF0Zm9ybV9kYXRhID0gTlVMTDsKKwljZWxsLnBkYXRhX3NpemUgPSAwOworCWNlbGwu
bmFtZSA9IEtQX0RSSVZFUl9OQU1FX0RNQV9DT05UUk9MTEVSOworCWNlbGwubnVtX3Jlc291cmNl
cyA9IDI7CiAKLSAgICBtZW1zZXQoJnJlc291cmNlcywgMCwgc2l6ZW9mKHJlc291cmNlcykpOwor
CW1lbXNldCgmcmVzb3VyY2VzLCAwLCBzaXplb2YocmVzb3VyY2VzKSk7CiAKLSAgICByZXNvdXJj
ZXNbMF0uc3RhcnQgPSBlbmdpbmVfcmVnc19vZmZzZXQ7Ci0gICAgcmVzb3VyY2VzWzBdLmVuZCAg
ID0gZW5naW5lX3JlZ3Nfb2Zmc2V0ICsgKEtQQ19ETUFfRU5HSU5FX1NJWkUgLSAxKTsKLSAgICBy
ZXNvdXJjZXNbMF0uZmxhZ3MgPSBJT1JFU09VUkNFX01FTTsKKwlyZXNvdXJjZXNbMF0uc3RhcnQg
PSBlbmdpbmVfcmVnc19vZmZzZXQ7CisJcmVzb3VyY2VzWzBdLmVuZCAgID0gZW5naW5lX3JlZ3Nf
b2Zmc2V0ICsgKEtQQ19ETUFfRU5HSU5FX1NJWkUgLSAxKTsKKwlyZXNvdXJjZXNbMF0uZmxhZ3Mg
PSBJT1JFU09VUkNFX01FTTsKIAotICAgIHJlc291cmNlc1sxXS5zdGFydCA9IGlycV9udW07Ci0g
ICAgcmVzb3VyY2VzWzFdLmVuZCAgID0gaXJxX251bTsKLSAgICByZXNvdXJjZXNbMV0uZmxhZ3Mg
PSBJT1JFU09VUkNFX0lSUTsKKwlyZXNvdXJjZXNbMV0uc3RhcnQgPSBpcnFfbnVtOworCXJlc291
cmNlc1sxXS5lbmQgICA9IGlycV9udW07CisJcmVzb3VyY2VzWzFdLmZsYWdzID0gSU9SRVNPVVJD
RV9JUlE7CiAKLSAgICBjZWxsLnJlc291cmNlcyA9IHJlc291cmNlczsKKwljZWxsLnJlc291cmNl
cyA9IHJlc291cmNlczsKIAotICAgIHJldHVybiBtZmRfYWRkX2RldmljZXMoCi0gICAgICAgIFBD
QVJEX1RPX0RFVihwY2FyZCksICAgIC8vIHBhcmVudAotICAgICAgICBwY2FyZC0+Y2FyZF9udW0g
KiAxMDAsICAvLyBpZAotICAgICAgICAmY2VsbCwgICAgICAgICAgICAgICAgICAvLyBzdHJ1Y3Qg
bWZkX2NlbGwgKgotICAgICAgICAxLCAgICAgICAgICAgICAgICAgICAgICAvLyBuZGV2cwotICAg
ICAgICAmcGNhcmQtPmRtYV9iYXNlX3Jlc291cmNlLAotICAgICAgICAwLCAgICAgICAgICAgICAg
ICAgICAgICAvLyBpcnFfYmFzZQotICAgICAgICBOVUxMICAgICAgICAgICAgICAgICAgICAvLyBz
dHJ1Y3QgaXJxX2RvbWFpbiAqCi0gICAgKTsKKwlyZXR1cm4gbWZkX2FkZF9kZXZpY2VzKAorCQlQ
Q0FSRF9UT19ERVYocGNhcmQpLCAgICAvLyBwYXJlbnQKKwkJcGNhcmQtPmNhcmRfbnVtICogMTAw
LCAgLy8gaWQKKwkJJmNlbGwsICAgICAgICAgICAgICAgICAgLy8gc3RydWN0IG1mZF9jZWxsICoK
KwkJMSwgICAgICAgICAgICAgICAgICAgICAgLy8gbmRldnMKKwkJJnBjYXJkLT5kbWFfYmFzZV9y
ZXNvdXJjZSwKKwkJMCwgICAgICAgICAgICAgICAgICAgICAgLy8gaXJxX2Jhc2UKKwkJTlVMTCAg
ICAgICAgICAgICAgICAgICAgLy8gc3RydWN0IGlycV9kb21haW4gKgorCSk7CiB9CiAKIHN0YXRp
YyBpbnQgIGtwMjAwMF9zZXR1cF9kbWFfY29udHJvbGxlcihzdHJ1Y3Qga3AyMDAwX2RldmljZSAq
cGNhcmQpCiB7Ci0gICAgaW50IGVycjsKLSAgICB1bnNpZ25lZCBpbnQgaTsKLSAgICB1NjQgY2Fw
YWJpbGl0aWVzX3JlZzsKLQotICAgIC8vIFMyQyBFbmdpbmVzCi0gICAgZm9yIChpID0gMCA7IGkg
PCAzMiA7IGkrKyl7Ci0gICAgICAgIGNhcGFiaWxpdGllc19yZWcgPSByZWFkcSggcGNhcmQtPmRt
YV9iYXJfYmFzZSArIEtQQ19ETUFfUzJDX0JBU0VfT0ZGU0VUICsgKEtQQ19ETUFfRU5HSU5FX1NJ
WkUgKiBpKSApOwotICAgICAgICBpZiAoY2FwYWJpbGl0aWVzX3JlZyAmIEVOR0lORV9DQVBfUFJF
U0VOVF9NQVNLKXsKLSAgICAgICAgICAgIGVyciA9IGNyZWF0ZV9kbWFfZW5naW5lX2NvcmUocGNh
cmQsIChLUENfRE1BX1MyQ19CQVNFX09GRlNFVCArIChLUENfRE1BX0VOR0lORV9TSVpFICogaSkp
LCBpLCAgcGNhcmQtPnBkZXYtPmlycSk7Ci0gICAgICAgICAgICBpZiAoZXJyKSBnb3RvIGVycl9v
dXQ7Ci0gICAgICAgIH0KLSAgICB9Ci0gICAgLy8gQzJTIEVuZ2luZXMKLSAgICBmb3IgKGkgPSAw
IDsgaSA8IDMyIDsgaSsrKXsKLSAgICAgICAgY2FwYWJpbGl0aWVzX3JlZyA9IHJlYWRxKCBwY2Fy
ZC0+ZG1hX2Jhcl9iYXNlICsgS1BDX0RNQV9DMlNfQkFTRV9PRkZTRVQgKyAoS1BDX0RNQV9FTkdJ
TkVfU0laRSAqIGkpICk7Ci0gICAgICAgIGlmIChjYXBhYmlsaXRpZXNfcmVnICYgRU5HSU5FX0NB
UF9QUkVTRU5UX01BU0spewotICAgICAgICAgICAgZXJyID0gY3JlYXRlX2RtYV9lbmdpbmVfY29y
ZShwY2FyZCwgKEtQQ19ETUFfQzJTX0JBU0VfT0ZGU0VUICsgKEtQQ19ETUFfRU5HSU5FX1NJWkUg
KiBpKSksIDMyK2ksICBwY2FyZC0+cGRldi0+aXJxKTsKLSAgICAgICAgICAgIGlmIChlcnIpIGdv
dG8gZXJyX291dDsKLSAgICAgICAgfQotICAgIH0KLQotICAgIHJldHVybiAwOworCWludCBlcnI7
CisJdW5zaWduZWQgaW50IGk7CisJdTY0IGNhcGFiaWxpdGllc19yZWc7CisKKwkvLyBTMkMgRW5n
aW5lcworCWZvciAoaSA9IDAgOyBpIDwgMzIgOyBpKyspeworCQljYXBhYmlsaXRpZXNfcmVnID0g
cmVhZHEoIHBjYXJkLT5kbWFfYmFyX2Jhc2UgKyBLUENfRE1BX1MyQ19CQVNFX09GRlNFVCArIChL
UENfRE1BX0VOR0lORV9TSVpFICogaSkgKTsKKwkJaWYgKGNhcGFiaWxpdGllc19yZWcgJiBFTkdJ
TkVfQ0FQX1BSRVNFTlRfTUFTSyl7CisJCQllcnIgPSBjcmVhdGVfZG1hX2VuZ2luZV9jb3JlKHBj
YXJkLCAoS1BDX0RNQV9TMkNfQkFTRV9PRkZTRVQgKyAoS1BDX0RNQV9FTkdJTkVfU0laRSAqIGkp
KSwgaSwgIHBjYXJkLT5wZGV2LT5pcnEpOworCQkJaWYgKGVycikgZ290byBlcnJfb3V0OworCQl9
CisJfQorCS8vIEMyUyBFbmdpbmVzCisJZm9yIChpID0gMCA7IGkgPCAzMiA7IGkrKyl7CisJCWNh
cGFiaWxpdGllc19yZWcgPSByZWFkcSggcGNhcmQtPmRtYV9iYXJfYmFzZSArIEtQQ19ETUFfQzJT
X0JBU0VfT0ZGU0VUICsgKEtQQ19ETUFfRU5HSU5FX1NJWkUgKiBpKSApOworCQlpZiAoY2FwYWJp
bGl0aWVzX3JlZyAmIEVOR0lORV9DQVBfUFJFU0VOVF9NQVNLKXsKKwkJCWVyciA9IGNyZWF0ZV9k
bWFfZW5naW5lX2NvcmUocGNhcmQsIChLUENfRE1BX0MyU19CQVNFX09GRlNFVCArIChLUENfRE1B
X0VOR0lORV9TSVpFICogaSkpLCAzMitpLCAgcGNhcmQtPnBkZXYtPmlycSk7CisJCQlpZiAoZXJy
KSBnb3RvIGVycl9vdXQ7CisJCX0KKwl9CisKKwlyZXR1cm4gMDsKIAogZXJyX291dDoKLSAgICBk
ZXZfZXJyKCZwY2FyZC0+cGRldi0+ZGV2LCAia3AyMDAwX3NldHVwX2RtYV9jb250cm9sbGVyOiBm
YWlsZWQgdG8gYWRkIGEgRE1BIEVuZ2luZTogJWRcbiIsIGVycik7Ci0gICAgcmV0dXJuIGVycjsK
KwlkZXZfZXJyKCZwY2FyZC0+cGRldi0+ZGV2LCAia3AyMDAwX3NldHVwX2RtYV9jb250cm9sbGVy
OiBmYWlsZWQgdG8gYWRkIGEgRE1BIEVuZ2luZTogJWRcbiIsIGVycik7CisJcmV0dXJuIGVycjsK
IH0KIAogaW50ICBrcDIwMDBfcHJvYmVfY29yZXMoc3RydWN0IGtwMjAwMF9kZXZpY2UgKnBjYXJk
KQogewotICAgIGludCBlcnIgPSAwOwotICAgIGludCBpOwotICAgIGludCBjdXJyZW50X3R5cGVf
aWQ7Ci0gICAgdTY0IHJlYWRfdmFsOwotICAgIHVuc2lnbmVkIGludCBoaWdoZXN0X2NvcmVfaWQg
PSAwOwotICAgIHN0cnVjdCBjb3JlX3RhYmxlX2VudHJ5IGN0ZTsKLQotICAgIGRldl9kYmcoJnBj
YXJkLT5wZGV2LT5kZXYsICJrcDIwMDBfcHJvYmVfY29yZXMocGNhcmQgPSAlcCAvICVkKVxuIiwg
cGNhcmQsIHBjYXJkLT5jYXJkX251bSk7Ci0KLSAgICBlcnIgPSBrcDIwMDBfc2V0dXBfZG1hX2Nv
bnRyb2xsZXIocGNhcmQpOwotICAgIGlmIChlcnIpIHJldHVybiBlcnI7Ci0KLSAgICBJTklUX0xJ
U1RfSEVBRCgmcGNhcmQtPnVpb19kZXZpY2VzX2xpc3QpOwotCi0gICAgLy8gRmlyc3QsIGl0ZXJh
dGUgdGhlIGNvcmUgdGFibGUgbG9va2luZyBmb3IgdGhlIGhpZ2hlc3QgQ09SRV9JRAotICAgIGZv
ciAoaSA9IDAgOyBpIDwgcGNhcmQtPmNvcmVfdGFibGVfbGVuZ3RoIDsgaSsrKXsKLSAgICAgICAg
cmVhZF92YWwgPSByZWFkcShwY2FyZC0+c3lzaW5mb19yZWdzX2Jhc2UgKyAoKHBjYXJkLT5jb3Jl
X3RhYmxlX29mZnNldCArIGkpICogOCkpOwotICAgICAgICBwYXJzZV9jb3JlX3RhYmxlX2VudHJ5
KCZjdGUsIHJlYWRfdmFsLCBwY2FyZC0+Y29yZV90YWJsZV9yZXYpOwotICAgICAgICBkYmdfY3Rl
KHBjYXJkLCAmY3RlKTsKLSAgICAgICAgaWYgKGN0ZS50eXBlID4gaGlnaGVzdF9jb3JlX2lkKXsK
LSAgICAgICAgICAgIGhpZ2hlc3RfY29yZV9pZCA9IGN0ZS50eXBlOwotICAgICAgICB9Ci0gICAg
ICAgIGlmIChjdGUudHlwZSA9PSBLUF9DT1JFX0lEX0lOVkFMSUQpewotICAgICAgICAgICAgZGV2
X2luZm8oJnBjYXJkLT5wZGV2LT5kZXYsICJGb3VuZCBJbnZhbGlkIGNvcmU6ICUwMTZsbHhcbiIs
IHJlYWRfdmFsKTsKLSAgICAgICAgfQotICAgIH0KLSAgICAvLyBUaGVuLCBpdGVyYXRlIG92ZXIg
dGhlIHBvc3NpYmxlIGNvcmUgdHlwZXMuCi0gICAgZm9yIChjdXJyZW50X3R5cGVfaWQgPSAxIDsg
Y3VycmVudF90eXBlX2lkIDw9IGhpZ2hlc3RfY29yZV9pZCA7IGN1cnJlbnRfdHlwZV9pZCsrKXsK
LSAgICAgICAgdW5zaWduZWQgaW50IGNvcmVfbnVtID0gMDsKLSAgICAgICAgLy8gRm9yZWFjaCBj
b3JlIHR5cGUsIGl0ZXJhdGUgdGhlIHdob2xlIHRhYmxlIGFuZCBpbnN0YW50aWF0ZSBzdWJkZXZp
Y2VzIGZvciBlYWNoIGNvcmUuCi0gICAgICAgIC8vIFllcywgdGhpcyBpcyBPKG4qbSkgYnV0IHRo
ZSBhY3R1YWwgcnVudGltZSBpcyBzbWFsbCBlbm91Z2ggdGhhdCBpdCdzIGFuIGFjY2VwdGFibGUg
dHJhZGVvZmYuCi0gICAgICAgIGZvciAoaSA9IDAgOyBpIDwgcGNhcmQtPmNvcmVfdGFibGVfbGVu
Z3RoIDsgaSsrKXsKLSAgICAgICAgICAgIHJlYWRfdmFsID0gcmVhZHEocGNhcmQtPnN5c2luZm9f
cmVnc19iYXNlICsgKChwY2FyZC0+Y29yZV90YWJsZV9vZmZzZXQgKyBpKSAqIDgpKTsKLSAgICAg
ICAgICAgIHBhcnNlX2NvcmVfdGFibGVfZW50cnkoJmN0ZSwgcmVhZF92YWwsIHBjYXJkLT5jb3Jl
X3RhYmxlX3Jldik7Ci0KLSAgICAgICAgICAgIGlmIChjdGUudHlwZSAhPSBjdXJyZW50X3R5cGVf
aWQpCi0gICAgICAgICAgICAgICAgY29udGludWU7Ci0KLSAgICAgICAgICAgIHN3aXRjaCAoY3Rl
LnR5cGUpIHsKLSAgICAgICAgICAgIGNhc2UgS1BfQ09SRV9JRF9JMkM6Ci0gICAgICAgICAgICAg
ICAgZXJyID0gcHJvYmVfY29yZV9iYXNpYyhjb3JlX251bSwgcGNhcmQsCi0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBLUF9EUklWRVJfTkFNRV9JMkMsIGN0ZSk7Ci0gICAg
ICAgICAgICAgICAgYnJlYWs7Ci0KLSAgICAgICAgICAgIGNhc2UgS1BfQ09SRV9JRF9TUEk6Ci0g
ICAgICAgICAgICAgICAgZXJyID0gcHJvYmVfY29yZV9iYXNpYyhjb3JlX251bSwgcGNhcmQsCi0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLUF9EUklWRVJfTkFNRV9TUEks
IGN0ZSk7Ci0gICAgICAgICAgICAgICAgYnJlYWs7Ci0KLSAgICAgICAgICAgIGRlZmF1bHQ6Ci0g
ICAgICAgICAgICAgICAgZXJyID0gcHJvYmVfY29yZV91aW8oY29yZV9udW0sIHBjYXJkLCAia3Bj
X3VpbyIsIGN0ZSk7Ci0gICAgICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgICAgICB9Ci0gICAg
ICAgICAgICBpZiAoZXJyKSB7Ci0gICAgICAgICAgICAgICAgZGV2X2VycigmcGNhcmQtPnBkZXYt
PmRldiwKLSAgICAgICAgICAgICAgICAgICAgICAgICJrcDIwMDBfcHJvYmVfY29yZXM6IGZhaWxl
ZCB0byBhZGQgY29yZSAlZDogJWRcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICBpLCBlcnIp
OwotICAgICAgICAgICAgICAgIGdvdG8gZXJyb3I7Ci0gICAgICAgICAgICB9Ci0gICAgICAgICAg
ICBjb3JlX251bSsrOwotICAgICAgICB9Ci0gICAgfQotCi0gICAgLy8gRmluYWxseSwgaW5zdGFu
dGlhdGUgYSBVSU8gZGV2aWNlIGZvciB0aGUgY29yZV90YWJsZS4KLSAgICBjdGUudHlwZSAgICAg
ICAgICAgICAgICA9IDA7IC8vIENPUkVfSURfQk9BUkRfSU5GTwotICAgIGN0ZS5vZmZzZXQgICAg
ICAgICAgICAgID0gMDsgLy8gYm9hcmQgaW5mbyBpcyBhbHdheXMgYXQgdGhlIGJlZ2lubmluZwot
ICAgIGN0ZS5sZW5ndGggICAgICAgICAgICAgID0gNTEyKjg7Ci0gICAgY3RlLnMyY19kbWFfcHJl
c2VudCAgICAgPSBmYWxzZTsKLSAgICBjdGUuczJjX2RtYV9jaGFubmVsX251bSA9IDA7Ci0gICAg
Y3RlLmMyc19kbWFfcHJlc2VudCAgICAgPSBmYWxzZTsKLSAgICBjdGUuYzJzX2RtYV9jaGFubmVs
X251bSA9IDA7Ci0gICAgY3RlLmlycV9jb3VudCAgICAgICAgICAgPSAwOwotICAgIGN0ZS5pcnFf
YmFzZV9udW0gICAgICAgID0gMDsKLSAgICBlcnIgPSBwcm9iZV9jb3JlX3VpbygwLCBwY2FyZCwg
ImtwY191aW8iLCBjdGUpOwotICAgIGlmIChlcnIpewotICAgICAgICBkZXZfZXJyKCZwY2FyZC0+
cGRldi0+ZGV2LCAia3AyMDAwX3Byb2JlX2NvcmVzOiBmYWlsZWQgdG8gYWRkIGJvYXJkX2luZm8g
Y29yZTogJWRcbiIsIGVycik7Ci0gICAgICAgIGdvdG8gZXJyb3I7Ci0gICAgfQotCi0gICAgcmV0
dXJuIDA7CisJaW50IGVyciA9IDA7CisJaW50IGk7CisJaW50IGN1cnJlbnRfdHlwZV9pZDsKKwl1
NjQgcmVhZF92YWw7CisJdW5zaWduZWQgaW50IGhpZ2hlc3RfY29yZV9pZCA9IDA7CisJc3RydWN0
IGNvcmVfdGFibGVfZW50cnkgY3RlOworCisJZGV2X2RiZygmcGNhcmQtPnBkZXYtPmRldiwgImtw
MjAwMF9wcm9iZV9jb3JlcyhwY2FyZCA9ICVwIC8gJWQpXG4iLCBwY2FyZCwgcGNhcmQtPmNhcmRf
bnVtKTsKKworCWVyciA9IGtwMjAwMF9zZXR1cF9kbWFfY29udHJvbGxlcihwY2FyZCk7CisJaWYg
KGVycikgcmV0dXJuIGVycjsKKworCUlOSVRfTElTVF9IRUFEKCZwY2FyZC0+dWlvX2RldmljZXNf
bGlzdCk7CisKKwkvLyBGaXJzdCwgaXRlcmF0ZSB0aGUgY29yZSB0YWJsZSBsb29raW5nIGZvciB0
aGUgaGlnaGVzdCBDT1JFX0lECisJZm9yIChpID0gMCA7IGkgPCBwY2FyZC0+Y29yZV90YWJsZV9s
ZW5ndGggOyBpKyspeworCQlyZWFkX3ZhbCA9IHJlYWRxKHBjYXJkLT5zeXNpbmZvX3JlZ3NfYmFz
ZSArICgocGNhcmQtPmNvcmVfdGFibGVfb2Zmc2V0ICsgaSkgKiA4KSk7CisJCXBhcnNlX2NvcmVf
dGFibGVfZW50cnkoJmN0ZSwgcmVhZF92YWwsIHBjYXJkLT5jb3JlX3RhYmxlX3Jldik7CisJCWRi
Z19jdGUocGNhcmQsICZjdGUpOworCQlpZiAoY3RlLnR5cGUgPiBoaWdoZXN0X2NvcmVfaWQpewor
CQkJaGlnaGVzdF9jb3JlX2lkID0gY3RlLnR5cGU7CisJCX0KKwkJaWYgKGN0ZS50eXBlID09IEtQ
X0NPUkVfSURfSU5WQUxJRCl7CisJCQlkZXZfaW5mbygmcGNhcmQtPnBkZXYtPmRldiwgIkZvdW5k
IEludmFsaWQgY29yZTogJTAxNmxseFxuIiwgcmVhZF92YWwpOworCQl9CisJfQorCS8vIFRoZW4s
IGl0ZXJhdGUgb3ZlciB0aGUgcG9zc2libGUgY29yZSB0eXBlcy4KKwlmb3IgKGN1cnJlbnRfdHlw
ZV9pZCA9IDEgOyBjdXJyZW50X3R5cGVfaWQgPD0gaGlnaGVzdF9jb3JlX2lkIDsgY3VycmVudF90
eXBlX2lkKyspeworCQl1bnNpZ25lZCBpbnQgY29yZV9udW0gPSAwOworCQkvLyBGb3JlYWNoIGNv
cmUgdHlwZSwgaXRlcmF0ZSB0aGUgd2hvbGUgdGFibGUgYW5kIGluc3RhbnRpYXRlIHN1YmRldmlj
ZXMgZm9yIGVhY2ggY29yZS4KKwkJLy8gWWVzLCB0aGlzIGlzIE8obiptKSBidXQgdGhlIGFjdHVh
bCBydW50aW1lIGlzIHNtYWxsIGVub3VnaCB0aGF0IGl0J3MgYW4gYWNjZXB0YWJsZSB0cmFkZW9m
Zi4KKwkJZm9yIChpID0gMCA7IGkgPCBwY2FyZC0+Y29yZV90YWJsZV9sZW5ndGggOyBpKyspewor
CQkJcmVhZF92YWwgPSByZWFkcShwY2FyZC0+c3lzaW5mb19yZWdzX2Jhc2UgKyAoKHBjYXJkLT5j
b3JlX3RhYmxlX29mZnNldCArIGkpICogOCkpOworCQkJcGFyc2VfY29yZV90YWJsZV9lbnRyeSgm
Y3RlLCByZWFkX3ZhbCwgcGNhcmQtPmNvcmVfdGFibGVfcmV2KTsKKworCQkJaWYgKGN0ZS50eXBl
ICE9IGN1cnJlbnRfdHlwZV9pZCkKKwkJCQljb250aW51ZTsKKworCQkJc3dpdGNoIChjdGUudHlw
ZSkgeworCQkJY2FzZSBLUF9DT1JFX0lEX0kyQzoKKwkJCQllcnIgPSBwcm9iZV9jb3JlX2Jhc2lj
KGNvcmVfbnVtLCBwY2FyZCwKKwkJCQlLUF9EUklWRVJfTkFNRV9JMkMsIGN0ZSk7CisJCQkJYnJl
YWs7CisKKwkJCWNhc2UgS1BfQ09SRV9JRF9TUEk6CisJCQkJZXJyID0gcHJvYmVfY29yZV9iYXNp
Yyhjb3JlX251bSwgcGNhcmQsCisJCQkJCQkgICAgICAgS1BfRFJJVkVSX05BTUVfU1BJLCBjdGUp
OworCQkJCWJyZWFrOworCisJCQlkZWZhdWx0OgorCQkJCWVyciA9IHByb2JlX2NvcmVfdWlvKGNv
cmVfbnVtLCBwY2FyZCwgImtwY191aW8iLCBjdGUpOworCQkJCWJyZWFrOworCQkJfQorCQkJaWYg
KGVycikgeworCQkJCWRldl9lcnIoJnBjYXJkLT5wZGV2LT5kZXYsCisJCQkJCSJrcDIwMDBfcHJv
YmVfY29yZXM6IGZhaWxlZCB0byBhZGQgY29yZSAlZDogJWRcbiIsCisJCQkJCWksIGVycik7CisJ
CQkJZ290byBlcnJvcjsKKwkJCX0KKwkJCWNvcmVfbnVtKys7CisJCX0KKwl9CisKKwkvLyBGaW5h
bGx5LCBpbnN0YW50aWF0ZSBhIFVJTyBkZXZpY2UgZm9yIHRoZSBjb3JlX3RhYmxlLgorCWN0ZS50
eXBlICAgICAgICAgICAgICAgID0gMDsgLy8gQ09SRV9JRF9CT0FSRF9JTkZPCisJY3RlLm9mZnNl
dCAgICAgICAgICAgICAgPSAwOyAvLyBib2FyZCBpbmZvIGlzIGFsd2F5cyBhdCB0aGUgYmVnaW5u
aW5nCisJY3RlLmxlbmd0aCAgICAgICAgICAgICAgPSA1MTIqODsKKwljdGUuczJjX2RtYV9wcmVz
ZW50ICAgICA9IGZhbHNlOworCWN0ZS5zMmNfZG1hX2NoYW5uZWxfbnVtID0gMDsKKwljdGUuYzJz
X2RtYV9wcmVzZW50ICAgICA9IGZhbHNlOworCWN0ZS5jMnNfZG1hX2NoYW5uZWxfbnVtID0gMDsK
KwljdGUuaXJxX2NvdW50ICAgICAgICAgICA9IDA7CisJY3RlLmlycV9iYXNlX251bSAgICAgICAg
PSAwOworCWVyciA9IHByb2JlX2NvcmVfdWlvKDAsIHBjYXJkLCAia3BjX3VpbyIsIGN0ZSk7CisJ
aWYgKGVycil7CisJCWRldl9lcnIoJnBjYXJkLT5wZGV2LT5kZXYsICJrcDIwMDBfcHJvYmVfY29y
ZXM6IGZhaWxlZCB0byBhZGQgYm9hcmRfaW5mbyBjb3JlOiAlZFxuIiwgZXJyKTsKKwkJZ290byBl
cnJvcjsKKwl9CisKKwlyZXR1cm4gMDsKIAogZXJyb3I6Ci0gICAga3AyMDAwX3JlbW92ZV9jb3Jl
cyhwY2FyZCk7Ci0gICAgbWZkX3JlbW92ZV9kZXZpY2VzKFBDQVJEX1RPX0RFVihwY2FyZCkpOwot
ICAgIHJldHVybiBlcnI7CisJa3AyMDAwX3JlbW92ZV9jb3JlcyhwY2FyZCk7CisJbWZkX3JlbW92
ZV9kZXZpY2VzKFBDQVJEX1RPX0RFVihwY2FyZCkpOworCXJldHVybiBlcnI7CiB9CiAKIHZvaWQg
IGtwMjAwMF9yZW1vdmVfY29yZXMoc3RydWN0IGtwMjAwMF9kZXZpY2UgKnBjYXJkKQogewotICAg
IHN0cnVjdCBsaXN0X2hlYWQgKnB0cjsKLSAgICBzdHJ1Y3QgbGlzdF9oZWFkICpuZXh0OwotICAg
IGxpc3RfZm9yX2VhY2hfc2FmZShwdHIsIG5leHQsICZwY2FyZC0+dWlvX2RldmljZXNfbGlzdCl7
Ci0gICAgICAgIHN0cnVjdCBrcGNfdWlvX2RldmljZSAqa3VkZXYgPSBsaXN0X2VudHJ5KHB0ciwg
c3RydWN0IGtwY191aW9fZGV2aWNlLCBsaXN0KTsKLSAgICAgICAgdWlvX3VucmVnaXN0ZXJfZGV2
aWNlKCZrdWRldi0+dWlvaW5mbyk7Ci0gICAgICAgIGRldmljZV91bnJlZ2lzdGVyKGt1ZGV2LT5k
ZXYpOwotICAgICAgICBsaXN0X2RlbCgma3VkZXYtPmxpc3QpOwotICAgICAgICBrZnJlZShrdWRl
dik7Ci0gICAgfQorCXN0cnVjdCBsaXN0X2hlYWQgKnB0cjsKKwlzdHJ1Y3QgbGlzdF9oZWFkICpu
ZXh0OworCWxpc3RfZm9yX2VhY2hfc2FmZShwdHIsIG5leHQsICZwY2FyZC0+dWlvX2RldmljZXNf
bGlzdCl7CisJCXN0cnVjdCBrcGNfdWlvX2RldmljZSAqa3VkZXYgPSBsaXN0X2VudHJ5KHB0ciwg
c3RydWN0IGtwY191aW9fZGV2aWNlLCBsaXN0KTsKKwkJdWlvX3VucmVnaXN0ZXJfZGV2aWNlKCZr
dWRldi0+dWlvaW5mbyk7CisJCWRldmljZV91bnJlZ2lzdGVyKGt1ZGV2LT5kZXYpOworCQlsaXN0
X2RlbCgma3VkZXYtPmxpc3QpOworCQlrZnJlZShrdWRldik7CisJfQogfQogCi0tIAoyLjIwLjEK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRldmVsIG1h
aWxpbmcgbGlzdApkZXZlbEBsaW51eGRyaXZlcnByb2plY3Qub3JnCmh0dHA6Ly9kcml2ZXJkZXYu
bGludXhkcml2ZXJwcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaXZlcmRldi1kZXZlbAo=
