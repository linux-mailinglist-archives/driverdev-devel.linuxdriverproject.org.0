Return-Path: <driverdev-devel-bounces@linuxdriverproject.org>
X-Original-To: lists+driverdev-devel@lfdr.de
Delivered-To: lists+driverdev-devel@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id AC1EB6132AE
	for <lists+driverdev-devel@lfdr.de>; Mon, 31 Oct 2022 10:24:46 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id 30CF860881;
	Mon, 31 Oct 2022 09:24:45 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 30CF860881
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 1kcIP4pblkZr; Mon, 31 Oct 2022 09:24:43 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by smtp3.osuosl.org (Postfix) with ESMTP id BB49D605AE;
	Mon, 31 Oct 2022 09:24:42 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org BB49D605AE
X-Original-To: devel@linuxdriverproject.org
Delivered-To: driverdev-devel@osuosl.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by ash.osuosl.org (Postfix) with ESMTP id 2A7A71BF358
 for <devel@linuxdriverproject.org>; Mon, 31 Oct 2022 09:24:31 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id CE0D540258
 for <devel@linuxdriverproject.org>; Mon, 31 Oct 2022 09:24:29 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org CE0D540258
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id FJqzYe2Ub8nK for <devel@linuxdriverproject.org>;
 Mon, 31 Oct 2022 09:24:27 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org EB85A40257
Received: from loongson.cn (mail.loongson.cn [114.242.206.163])
 by smtp4.osuosl.org (Postfix) with ESMTP id EB85A40257
 for <devel@linuxdriverproject.org>; Mon, 31 Oct 2022 09:24:26 +0000 (UTC)
Received: from loongson.cn (unknown [10.20.42.62])
 by gateway (Coremail) with SMTP id _____8BxnrdGlF9jGo0DAA--.8058S3;
 Mon, 31 Oct 2022 17:24:22 +0800 (CST)
Received: from li-X99.loongson.cn (unknown [10.20.42.62])
 by localhost.localdomain (Coremail) with SMTP id
 AQAAf8AxiFdDlF9jzvcIAA--.9634S2; 
 Mon, 31 Oct 2022 17:24:19 +0800 (CST)
From: lichenyang <lichenyang@loongson.cn>
To: Maxime Ripard <mripard@kernel.org>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Thomas Zimmermann <tzimmermann@suse.de>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, dri-devel@lists.freedesktop.org,
 devel@linuxdriverproject.org
Subject: [PATCH v8 1/4] drm/loongson: Add DRM Driver for Loongson 7A1000
 bridge chip
Date: Mon, 31 Oct 2022 17:24:15 +0800
Message-Id: <20221031092418.2980766-1-lichenyang@loongson.cn>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
X-CM-TRANSID: AQAAf8AxiFdDlF9jzvcIAA--.9634S2
X-CM-SenderInfo: xolfxvxq1d0wo6or00hjvr0hdfq/1tbiAQAQA2NeaWMFngABs-
X-Coremail-Antispam: 1Uk129KBjvAXoWftr4UCr47AFy3Zw4rAFyrJFb_yoW5Zr17Jo
 WxZFnxWw4rXr1xAFZY9rn3Jr17ZFs0qanIkrWSyr1DGa1Yy3Z8tr9Igw1fJr1fAF1FyF4U
 A34Ykr4xGF47JrZ5n29KB7ZKAUJUUUUr529EdanIXcx71UUUUU7KY7ZEXasCq-sGcSsGvf
 J3Ic02F40EFcxC0VAKzVAqx4xG6I80ebIjqfuFe4nvWSU5nxnvy29KBjDU0xBIdaVrnRJU
 UU9Yb4IE77IF4wAFF20E14v26r1j6r4UM7CY07I20VC2zVCF04k26cxKx2IYs7xG6rWj6s
 0DM7CIcVAFz4kK6r126r13M28lY4IEw2IIxxk0rwA2F7IY1VAKz4vEj48ve4kI8wA2z4x0
 Y4vE2Ix0cI8IcVAFwI0_Gr0_Xr1l84ACjcxK6xIIjxv20xvEc7CjxVAFwI0_Gr0_Cr1l84
 ACjcxK6I8E87Iv67AKxVW8Jr0_Cr1UM28EF7xvwVC2z280aVCY1x0267AKxVW8Jr0_Cr1U
 M2kKe7AKxVWUXVWUAwAS0I0E0xvYzxvE52x082IY62kv0487Mc804VCY07AIYIkI8VC2zV
 CFFI0UMc02F40EFcxC0VAKzVAqx4xG6I80ewAv7VC0I7IYx2IY67AKxVWUAVWUtwAv7VC2
 z280aVAFwI0_Jr0_Gr1lOx8S6xCaFVCjc4AY6r1j6r4UM4x0Y48IcxkI7VAKI48JMxAIw2
 8IcxkI7VAKI48JMxC20s026xCaFVCjc4AY6r1j6r4UMxCIbckI1I0E14v26r1Y6r17MI8I
 3I0E5I8CrVAFwI0_Jr0_Jr4lx2IqxVCjr7xvwVAFwI0_JrI_JrWlx4CE17CEb7AF67AKxV
 WUtVW8ZwCIc40Y0x0EwIxGrwCI42IY6xIIjxv20xvE14v26r1I6r4UMIIF0xvE2Ix0cI8I
 cVCY1x0267AKxVWUJVW8JwCI42IY6xAIw20EY4v20xvaj40_Jr0_JF4lIxAIcVC2z280aV
 AFwI0_Jr0_Gr1lIxAIcVC2z280aVCY1x0267AKxVWUJVW8JbIYCTnIWIevJa73UjIFyTuY
 vjxU2-txDUUUU
X-BeenThere: driverdev-devel@linuxdriverproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Driver Project Developer List
 <driverdev-devel.linuxdriverproject.org>
List-Unsubscribe: <http://driverdev.linuxdriverproject.org/mailman/options/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=unsubscribe>
List-Archive: <http://driverdev.linuxdriverproject.org/pipermail/driverdev-devel/>
List-Post: <mailto:driverdev-devel@linuxdriverproject.org>
List-Help: <mailto:driverdev-devel-request@linuxdriverproject.org?subject=help>
List-Subscribe: <http://driverdev.linuxdriverproject.org/mailman/listinfo/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=subscribe>
Cc: Yi Li <liyi@loongson.cn>, Huacai Chen <chenhuacai@kernel.org>,
 Sam Ravnborg <sam@ravnborg.org>, Chenyang Li <lichenyang@loongson.cn>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: driverdev-devel-bounces@linuxdriverproject.org
Sender: "devel" <driverdev-devel-bounces@linuxdriverproject.org>

RnJvbTogQ2hlbnlhbmcgTGkgPGxpY2hlbnlhbmdAbG9vbmdzb24uY24+CgpUaGlzIHBhdGNoIGFk
ZHMgYW4gaW5pdGlhbCBEUk0gZHJpdmVyIGZvciB0aGUgTG9vbmdzb24gTFM3QTEwMDAKYnJpZGdl
IGNoaXAoTFM3QSkuIFRoZSBMb29uZ3NvbiA3QTEwMDAgYnJpZGdlIGNoaXAgaXMgTG9vbmdzb27i
gJlzCmZpcnN0IGRlZGljYXRlZCBjaGlwc2V0IHByb2R1Y3QsIHByb3ZpZGluZyBub3J0aC1zb3V0
aCBicmlkZ2UgZnVuY3Rpb25hbGl0eQpmb3IgTG9vbmdzb24gcHJvY2Vzc29ycy4gVGhlIGJyaWRn
ZSBjaGlwIGlzIGNvbm5lY3RlZCB0byB0aGUgTG9vbmdzb24KU2VyaWVzIDMgcHJvY2Vzc29yIHZp
YSB0aGUgSFQgaGlnaC1zcGVlZCBidXMgaW50ZXJmYWNlIGFuZCBoYXMgYW4KaW50ZWdyYXRlZCBE
aXNwbGF5Q29udHJvbGxlciwgRERSMyBTRFJBTSBtZW1vcnkgY29udHJvbGxlciwKYW5kIFBDSUUs
IFNBVEEsIFVTQiwgR01BQywgSTJDLCBVQVJULCBHUElPLCBhbmQgb3RoZXIgaW50ZXJmYWNlcy4K
VGhlIGRpc3BsYXkgY29udHJvbGxlciBzdXBwb3J0cyBkdWFsIERWTyBzaWduYWwgb3V0cHV0LGR1
YWwgcm91dGFiaWxpdHkKZnJhbWUgYnVmZmVyLiBFYWNoIGRpc3BsYXkgc3VwcG9ydHMgdXAgdG8g
MTkyMHgxMDgwQDYwSHosIFJHQjg4OCBhbmQKUkdCNTY1IGNvbG9yIGRlcHRocy4gQW5kIHN1cHBv
cnRzIGhhcmR3YXJlIGN1cnNvciwgZ2FtbWEgY29ycmVjdGlvbiwKaW50ZXJydXB0LCBzb2Z0IHJl
c2V0LCBldGMuIFRoZSB2aWRlbyBtZW1vcnkgaW50ZXJmYWNlIHVzZXMgMTYtYml0IEREUjMKU0RS
QU0gaW50ZXJmYWNlIHdpdGggYSBtYXhpbXVtIGRhdGEgcmF0ZSBvZiAxMzMzIE1icHMuCkF0IHBy
ZXNlbnQsIERDIGRldmljZSBkZXRlY3Rpb24gYW5kIERSTSBkcml2ZXIgcmVnaXN0cmF0aW9uIGFy
ZQpjb21wbGV0ZWQsIHRoZSBjcnRjL3BsYW5lL2VuY29kZXIvY29ubmVjdG9yIG9iamVjdHMgaGFz
IGJlZW4KaW1wbGVtZW50ZWQuCk9uIExvb25nc29uIDNBNDAwMCBDUFUgYW5kIDdBMTAwMCBzeXN0
ZW0sIHdlIGhhdmUgYWNoaWV2ZWQgdGhlIHVzZQpvZiBkdWFsIHNjcmVlbiwgYW5kIHN1cHBvcnQg
ZHVhbCBzY3JlZW4gY2xvbmUgbW9kZSBhbmQgZXhwYW5zaW9uCm1vZGUuCkxpbms6IGh0dHBzOi8v
bG9vbmdzb24uZ2l0aHViLmlvL0xvb25nQXJjaC1Eb2N1bWVudGF0aW9uL0xvb25nc29uLTdBMTAw
MC11c2VybWFudWFsLUVOLmh0bWwjZGlzcGxheS1jb250cm9sbGVyCgp2MTM6Ci0gRGVsZXRlIGFs
bG93X2ZiX21vZGlmaWVycy4KCnYxMjoKLSBVc2UgZHJtX2JyaWRnZV9jb25uZWN0b3IgaW4gZHJp
dmVyLgoKdjExOgotIFJlbW92ZSBhIGxvdCBvZiB1c2VsZXNzIGNvZGUuCi0gQWRkIGhlbHAgaW5m
b3JtYXRpb24uCi0gRGVsZXRlIHVubmVjZXNzYXJ5IGhlYWRlciBmaWxlcy4KCnYxMDoKLSBSZXBs
YWNlIHRoZSBkcm1tXyB2ZXJzaW9uIGZ1bmN0aW9ucy4KLSBSZXBsYWNlIHRoZSBzaW1wbGVfZW5j
b2RlciB2ZXJzaW9uIGZ1bmN0aW9uLgotIEFscGhhYmV0aXplIGZpbGUgbmFtZXMuCgp2OToKLSBP
cHRpbWl6ZSB0aGUgZXJyb3IgaGFuZGxpbmcgcHJvY2Vzcy4KLSBSZW1vdmUgdGhlIHVzZWxlc3Mg
ZmxhZ3MgcGFyYW1ldGVyLgotIEZpeCBzb21lIGluY29ycmVjdCB1c2Ugb2YgdmFyaWFibGVzIGFu
ZCBjb25zdHJ1Y3RzLgoKdjg6Ci0gVXBkYXRlIHRoZSBhdG9taWNfdXBkYXRlIGZ1bmN0aW9uIGlu
dGVyZmFjZS4KCnY3OgotIFRoZSBwaXhlbCBjbG9jayBpcyBsaW1pdGVkIHRvIGxlc3MgdGhhbiAx
NzMwMDAuCgp2NjoKLSBSZW1vdmUgc3Bpbl9sb2NrIGluIG1taW8gcmVnIHJlYWQgYW5kIHdyaXRl
LgotIFRPX1VOQ0FDIGlzIHJlcGxhYyB3aXRoIGlvcmVtYXAuCi0gRml4IGVycm9yIGFyZ3VtZW50
cyBpbiBjcnRjX2F0b21pY19lbmFibGUvZGlzYWJsZS9tb2RlX3ZhbGlkLgoKdjU6Ci0gQ2hhbmdl
IHRoZSBuYW1lIG9mIHRoZSBjaGlwIHRvIExTN0EuCi0gQ2hhbmdlIG1hZ2ljIHZhbHVlIGluIGNy
dGMgdG8gbWFjcm9zLgotIENvcnJlY3QgbWlzdGFrZXMgd29yZHMuCi0gQ2hhbmdlIHRoZSByZWdp
c3RlciBvcGVyYXRpb24gZnVuY3Rpb24gcHJlZml4IHRvIGxzN2EuCgp2NDoKLSBNb3ZlIHRoZSBt
b2RlX3ZhbGlkIGZ1bmN0aW9uIHRvIHRoZSBjcnRjLgoKdjM6Ci0gTW92ZSB0aGUgbW9kZV92YWxp
ZCBmdW5jdGlvbiB0byB0aGUgY29ubmVjdG9yIGFuZCBvcHRpbWl6ZSBpdC4KLSBGaXggbnVtX2Ny
dGMgY2FsY3VsYXRpb24gbWV0aG9kLgoKdjI6Ci0gQ29tcGxldGUgdGhlIGNhc2Ugb2YgMzItYml0
IGNvbG9yIGluIENSVEMuCgpTaWduZWQtb2ZmLWJ5OiBZaSBMaSA8bGl5aUBsb29uZ3Nvbi5jbj4K
U2lnbmVkLW9mZi1ieTogQ2hlbnlhbmcgTGkgPGxpY2hlbnlhbmdAbG9vbmdzb24uY24+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL0tjb25maWcgICAgICAgICAgICAgICAgICAgICAgIHwgICAyICsKIGRy
aXZlcnMvZ3B1L2RybS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiBkcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyAgICAgICAgICAgICAgfCAgMTMgKwogZHJpdmVy
cy9ncHUvZHJtL2xvb25nc29uL01ha2VmaWxlICAgICAgICAgICAgIHwgIDEzICsKIGRyaXZlcnMv
Z3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYyB8ICAyMyArKwogZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYyAgICAgIHwgMjQyICsrKysrKysrKysrKysr
KysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYyAgICB8ICAzOCAr
KysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYyAgICAgICB8IDI3MyAr
KysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYu
aCAgICAgICB8IDEzMCArKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nv
bl9lbmNvZGVyLmMgICB8ICA1OCArKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fcGxhbmUuYyAgICAgfCAgOTYgKysrKysrCiAxMSBmaWxlcyBjaGFuZ2VkLCA4ODkgaW5zZXJ0
aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29u
ZmlnCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL01ha2VmaWxl
CiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Nv
bm5lY3Rvci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xv
b25nc29uX2NydGMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9kZXZpY2UuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKaW5kZXggMzRmNWEw
OTJjOTllLi4wMzM1ZTYyMzc3ZDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmln
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCkBAIC00MDAsNiArNDAwLDggQEAgc291cmNl
ICJkcml2ZXJzL2dwdS9kcm0vdmJveHZpZGVvL0tjb25maWciCiAKIHNvdXJjZSAiZHJpdmVycy9n
cHUvZHJtL2xpbWEvS2NvbmZpZyIKIAorc291cmNlICJkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24v
S2NvbmZpZyIKKwogc291cmNlICJkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvS2NvbmZpZyIKIAog
c291cmNlICJkcml2ZXJzL2dwdS9kcm0vYXNwZWVkL0tjb25maWciCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKaW5kZXggMGIy
ODNlNDZmMjhiLi5hNzc1ZjUzNmIzY2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9NYWtl
ZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKQEAgLTEzOSw2ICsxMzksNyBAQCBv
YmotJChDT05GSUdfRFJNX1RWRTIwMCkgKz0gdHZlMjAwLwogb2JqLSQoQ09ORklHX0RSTV9YRU4p
ICs9IHhlbi8KIG9iai0kKENPTkZJR19EUk1fVkJPWFZJREVPKSArPSB2Ym94dmlkZW8vCiBvYmot
JChDT05GSUdfRFJNX0xJTUEpICArPSBsaW1hLworb2JqLSQoQ09ORklHX0RSTV9MT09OR1NPTikg
Kz0gbG9vbmdzb24vCiBvYmotJChDT05GSUdfRFJNX1BBTkZST1NUKSArPSBwYW5mcm9zdC8KIG9i
ai0kKENPTkZJR19EUk1fQVNQRUVEX0dGWCkgKz0gYXNwZWVkLwogb2JqLSQoQ09ORklHX0RSTV9N
Q0RFKSArPSBtY2RlLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25m
aWcgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLjI0ODQ4MjRmYjUwYgotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmlnCkBAIC0wLDAgKzEsMTMgQEAKKyMgU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seQorCitjb25maWcgRFJNX0xPT05HU09OCisJ
dHJpc3RhdGUgIkRSTSBzdXBwb3J0IGZvciBMUzdBIGJyaWRnZSBjaGlwc2V0IgorCWRlcGVuZHMg
b24gRFJNICYmIFBDSQorCWRlcGVuZHMgb24gQ1BVX0xPT05HU09ONjQgfHwgQ09NUElMRV9URVNU
CisJc2VsZWN0IERSTV9LTVNfSEVMUEVSCisJc2VsZWN0IERSTV9WUkFNX0hFTFBFUgorCWhlbHAK
KwkgIFRoZSBsb29uZ3NvbiA3QSBicmlkZ2UgY2hpcCAoTFM3QSkgaXMgYSBzcGVjaWFsIGNoaXBz
ZXQgZm9yCisJICBsb29uZ3NvbiBDUFUuIExTN0EgaW50ZXJuYWwgaW50ZWdyYXRlZCBkaXNwbGF5
IGNvbnRyb2xsZXJzLAorCSAgc3VwcG9ydCB0d28gZGlzcGxheSBjaGFubmVscy4KKwkgIElmIGNv
bXBpbGVkIGFzIGEgbW9kdWxlIGl0IHdpbGwgYmUgY2FsbGVkIGxvb25nc29uLgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4u
NTM0YTY0MDQ3ZmI2Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L01ha2VmaWxlCkBAIC0wLDAgKzEsMTMgQEAKKyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAtb25seQorIworIyBNYWtlZmlsZSBmb3IgbG9vbmdzb24gZHJtIGRyaXZlcnMuCisjIFRo
aXMgZHJpdmVyIHByb3ZpZGVzIHN1cHBvcnQgZm9yIHRoZQorIyBEaXJlY3QgUmVuZGVyaW5nIElu
ZnJhc3RydWN0dXJlIChEUkkpCisKK2xvb25nc29uLXkgOj0gbG9vbmdzb25fY29ubmVjdG9yLm8g
XAorCWxvb25nc29uX2NydGMubyBcCisJbG9vbmdzb25fZGV2aWNlLm8gXAorCWxvb25nc29uX2Ry
di5vIFwKKwlsb29uZ3Nvbl9lbmNvZGVyLm8gXAorCWxvb25nc29uX3BsYW5lLm8KK29iai0kKENP
TkZJR19EUk1fTE9PTkdTT04pICs9IGxvb25nc29uLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMDAuLjI5M2NlYTdkMjY3NQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpAQCAtMCwwICsxLDIzIEBACisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorLyogQ29weXJpZ2h0IChDKSAy
MDIyIExvb25nc29uIEluYy4gKi8KKworI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+
CisjaW5jbHVkZSA8ZHJtL2RybV9icmlkZ2VfY29ubmVjdG9yLmg+CisKKyNpbmNsdWRlICJsb29u
Z3Nvbl9kcnYuaCIKKworaW50IGxvb25nc29uX2JyaWRnZV9jb25uZWN0b3JfaW5pdChzdHJ1Y3Qg
bG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCit7CisJc3RydWN0IGRybV9kZXZpY2Ug
KmRldiA9ICZsZGV2LT5kZXY7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKKwlz
dHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIgPSAmbGRldi0+bW9kZV9pbmZvW2luZGV4XS5lbmNv
ZGVyLT5iYXNlOworCisJY29ubmVjdG9yID0gZHJtX2JyaWRnZV9jb25uZWN0b3JfaW5pdChkZXYs
IGVuY29kZXIpOworCWlmIChJU19FUlIoY29ubmVjdG9yKSkgeworCQlkZXZfZXJyKGRldi0+ZGV2
LCAiVW5hYmxlIHRvIGNyZWF0ZSBicmlkZ2UgY29ubmVjdG9yXG4iKTsKKwkJcmV0dXJuIFBUUl9F
UlIoY29ubmVjdG9yKTsKKwl9CisJZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfZW5jb2Rlcihjb25uZWN0
b3IsIGVuY29kZXIpOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xv
b25nc29uX2NydGMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmE5
NzM1ZmJiMWMyZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9s
b29uZ3Nvbl9jcnRjLmMKQEAgLTAsMCArMSwyNDIgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBHUEwtMi4wLW9yLWxhdGVyCisvKiBDb3B5cmlnaHQgKEMpIDIwMjIgTG9vbmdzb24gSW5j
LiAqLworCisjaW5jbHVkZSA8ZHJtL2RybV9mb3VyY2MuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2Zy
YW1lYnVmZmVyLmg+CisKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIKKworc3RhdGljIHZvaWQg
dHJ5X2VhY2hfbG9vcGModTMyIGNsaywgdTMyIHBzdGRpdiwgdTMyIGZyZWZjLAorCQkJICAgc3Ry
dWN0IHBpeF9wbGwgKnBsbF9jb25maWcpCit7CisJdTMyIGxvb3BjOworCXUzMiBjbGtfb3V0Owor
CXUzMiBwcmVjaXNpb247CisJdTMyIG1pbiA9IDEwMDA7CisJdTMyIGJhc2VfY2xrID0gMTAwMDAw
TDsKKworCWZvciAobG9vcGMgPSBMT09QQ19NSU47IGxvb3BjIDwgTE9PUENfTUFYOyBsb29wYysr
KSB7CisJCWlmICgobG9vcGMgPCBGUkVfUkVGX01JTiAqIGZyZWZjKSB8fAorCQkgICAgKGxvb3Bj
ID4gRlJFX1JFRl9NQVggKiBmcmVmYykpCisJCQljb250aW51ZTsKKworCQljbGtfb3V0ID0gYmFz
ZV9jbGsgKiBsb29wYyAvIGZyZWZjOworCQlwcmVjaXNpb24gPSAoY2xrID4gY2xrX291dCkgPyAo
Y2xrIC0gY2xrX291dCkgOiAoY2xrX291dCAtIGNsayk7CisJCWlmIChwcmVjaXNpb24gPCBtaW4p
IHsKKwkJCXBsbF9jb25maWctPmwyX2RpdiA9IHBzdGRpdjsKKwkJCXBsbF9jb25maWctPmwxX2xv
b3BjID0gbG9vcGM7CisJCQlwbGxfY29uZmlnLT5sMV9mcmVmYyA9IGZyZWZjOworCQl9CisJfQor
fQorCitzdGF0aWMgdm9pZCBjYWxfZnJlcSh1MzIgcGl4Y2xvY2ssIHN0cnVjdCBwaXhfcGxsICpw
bGxfY29uZmlnKQoreworCXUzMiBwc3RkaXY7CisJdTMyIGZyZWZjOworCXUzMiBjbGs7CisKKwlm
b3IgKHBzdGRpdiA9IDE7IHBzdGRpdiA8IFBTVF9ESVZfTUFYOyBwc3RkaXYrKykgeworCQljbGsg
PSBwaXhjbG9jayAqIHBzdGRpdjsKKwkJZm9yIChmcmVmYyA9IERJVl9SRUZfTUlOOyBmcmVmYyA8
PSBESVZfUkVGX01BWDsgZnJlZmMrKykKKwkJCXRyeV9lYWNoX2xvb3BjKGNsaywgcHN0ZGl2LCBm
cmVmYywgcGxsX2NvbmZpZyk7CisJfQorfQorCitzdGF0aWMgdm9pZCBjb25maWdfcGxsKHN0cnVj
dCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHVuc2lnbmVkIGxvbmcgcGxsX2Jhc2UsCisJCSAgICAg
ICBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NmZykKK3sKKwl1MzIgdmFsOworCXUzMiBjb3VudCA9IDA7
CisKKwkvKiBjbGVhciBzZWxfcGxsX291dDAgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwg
cGxsX2Jhc2UgKyAweDQpOworCXZhbCAmPSB+KDFVTCA8PCA4KTsKKwlsczdhX2lvX3dyZWcobGRl
diwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7CisKKwkvKiBzZXQgcGxsX3BkICovCisJdmFsID0gbHM3
YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgfD0gKDFVTCA8PCAxMyk7CisJ
bHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOworCisJLyogY2xlYXIgc2V0
X3BsbF9wYXJhbSAqLworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7
CisJdmFsICY9IH4oMVVMIDw8IDExKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQsIHZhbCk7CisKKwkvKiBjbGVhciBvbGQgdmFsdWUgJiBjb25maWcgbmV3IHZhbHVlICovCisJ
dmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJj0gfigweDdm
VUwgPDwgMCk7CisJdmFsIHw9IChwbGxfY2ZnLT5sMV9mcmVmYyA8PCAwKTsgLyogcmVmYyAqLwor
CWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwl2YWwgPSBsczdhX2lv
X3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDApOworCXZhbCAmPSB+KDB4N2ZVTCA8PCAwKTsKKwl2
YWwgfD0gKHBsbF9jZmctPmwyX2RpdiA8PCAwKTsgLyogZGl2ICovCisJdmFsICY9IH4oMHgxZmZV
TCA8PCAyMSk7CisJdmFsIHw9IChwbGxfY2ZnLT5sMV9sb29wYyA8PCAyMSk7IC8qIGxvb3BjICov
CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHgwLCB2YWwpOworCisJLyogc2V0IHNl
dF9wbGxfcGFyYW0gKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQp
OworCXZhbCB8PSAoMVVMIDw8IDExKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQsIHZhbCk7CisJLyogY2xlYXIgcGxsX3BkICovCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYs
IHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJj0gfigxVUwgPDwgMTMpOworCWxzN2FfaW9fd3JlZyhs
ZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKworCXdoaWxlICghKGxzN2FfaW9fcnJlZyhsZGV2
LCBwbGxfYmFzZSArIDB4NCkgJiAweDgwKSkgeworCQljcHVfcmVsYXgoKTsKKwkJY291bnQrKzsK
KwkJaWYgKGNvdW50ID49IDEwMDApIHsKKwkJCWRybV9lcnIoJmxkZXYtPmRldiwgImxvb25nc29u
LTdBIFBMTCBsb2NrIGZhaWxlZFxuIik7CisJCQlicmVhazsKKwkJfQorCX0KKworCXZhbCA9IGxz
N2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgPDwgOCk7CisJ
bHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOworfQorCitzdGF0aWMgdm9p
ZCBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIoc3RydWN0IGRybV9jcnRjICpjcnRjKQorewor
CXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5kZXY7CisJc3RydWN0IGxvb25nc29uX2Rl
dmljZSAqbGRldiA9IHRvX2xvb25nc29uX2RldmljZShkZXYpOworCXN0cnVjdCBsb29uZ3Nvbl9j
cnRjICpsY3J0YyA9IHRvX2xvb25nc29uX2NydGMoY3J0Yyk7CisJc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUgPSAmY3J0Yy0+c3RhdGUtPmFkanVzdGVkX21vZGU7CisJc3RydWN0IGRybV9m
cmFtZWJ1ZmZlciAqZmIgPSBjcnRjLT5wcmltYXJ5LT5zdGF0ZS0+ZmI7CisJc3RydWN0IHBpeF9w
bGwgcGxsX2NmZzsKKwl1MzIgaHIsIGhzcywgaHNlLCBoZmw7CisJdTMyIHZyLCB2c3MsIHZzZSwg
dmZsOworCXUzMiBwaXhfZnJlcTsKKwl1MzIgcmVnX29mZnNldDsKKworCWhyID0gbW9kZS0+aGRp
c3BsYXk7CisJaHNzID0gbW9kZS0+aHN5bmNfc3RhcnQ7CisJaHNlID0gbW9kZS0+aHN5bmNfZW5k
OworCWhmbCA9IG1vZGUtPmh0b3RhbDsKKworCXZyID0gbW9kZS0+dmRpc3BsYXk7CisJdnNzID0g
bW9kZS0+dnN5bmNfc3RhcnQ7CisJdnNlID0gbW9kZS0+dnN5bmNfZW5kOworCXZmbCA9IG1vZGUt
PnZ0b3RhbDsKKworCXBpeF9mcmVxID0gbW9kZS0+Y2xvY2s7CisJcmVnX29mZnNldCA9IGxjcnRj
LT5yZWdfb2Zmc2V0OworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0RJVENGR19SRUcgKyByZWdf
b2Zmc2V0LCAwKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfRElUVEFCX0xPX1JFRyArIHJlZ19v
ZmZzZXQsIDApOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRUQUJfSElfUkVHICsgcmVnX29m
ZnNldCwgMCk7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1BBTkNGR19SRUcgKyByZWdfb2Zmc2V0
LCBGQl9QQU5DRkdfREVGKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfUEFOVElNX1JFRyArIHJl
Z19vZmZzZXQsIDApOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0hESVNQTEFZX1JFRyArIHJl
Z19vZmZzZXQsIChoZmwgPDwgMTYpIHwgaHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9IU1lO
Q19SRUcgKyByZWdfb2Zmc2V0LAorCQkgICAgIEZCX0hTWU5DX1BVTFNFIHwgKGhzZSA8PCAxNikg
fCBoc3MpOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1ZESVNQTEFZX1JFRyArIHJlZ19vZmZz
ZXQsICh2ZmwgPDwgMTYpIHwgdnIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9WU1lOQ19SRUcg
KyByZWdfb2Zmc2V0LAorCQkgICAgIEZCX1ZTWU5DX1BVTFNFIHwgKHZzZSA8PCAxNikgfCB2c3Mp
OworCisJc3dpdGNoIChmYi0+Zm9ybWF0LT5mb3JtYXQpIHsKKwljYXNlIERSTV9GT1JNQVRfUkdC
NTY1OgorCQlsY3J0Yy0+Y2ZnX3JlZyB8PSAweDM7CisJCWJyZWFrOworCWNhc2UgRFJNX0ZPUk1B
VF9SR0I4ODg6CisJY2FzZSBEUk1fRk9STUFUX1hSR0I4ODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9B
UkdCODg4ODoKKwlkZWZhdWx0OgorCQlsY3J0Yy0+Y2ZnX3JlZyB8PSAweDQ7CisJCWJyZWFrOwor
CX0KKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgbGNydGMt
PmNmZ19yZWcpOworCisJY2FsX2ZyZXEocGl4X2ZyZXEsICZwbGxfY2ZnKTsKKwljb25maWdfcGxs
KGxkZXYsIExTN0FfUElYX1BMTCArIHJlZ19vZmZzZXQsICZwbGxfY2ZnKTsKK30KKworc3RhdGlj
IHZvaWQgbG9vbmdzb25fY3J0Y19hdG9taWNfZW5hYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywK
KwkJCQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYg
PSB0b19sb29uZ3Nvbl9kZXZpY2UoZGV2KTsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMg
PSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOworCXUzMiByZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19v
ZmZzZXQ7CisKKwlsY3J0Yy0+Y2ZnX3JlZyB8PSBDRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhs
ZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgbGNydGMtPmNmZ19yZWcpOworfQorCitzdGF0
aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0
YywKKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0
IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2ID0gdG9fbG9vbmdzb25fZGV2aWNlKGRldik7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxj
cnRjID0gdG9fbG9vbmdzb25fY3J0YyhjcnRjKTsKKwl1MzIgcmVnX29mZnNldCA9IGxjcnRjLT5y
ZWdfb2Zmc2V0OworCisJbGNydGMtPmNmZ19yZWcgJj0gfkNGR19FTkFCTEU7CisJbHM3YV9tbV93
cmVnKGxkZXYsIEZCX0NGR19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0+Y2ZnX3JlZyk7Cit9CisK
K3N0YXRpYyBlbnVtIGRybV9tb2RlX3N0YXR1cyBsb29uZ3Nvbl9tb2RlX3ZhbGlkKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YywKKwkJCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
KQoreworCWlmIChtb2RlLT5oZGlzcGxheSA+IDE5MjApCisJCXJldHVybiBNT0RFX0JBRDsKKwlp
ZiAobW9kZS0+dmRpc3BsYXkgPiAxMDgwKQorCQlyZXR1cm4gTU9ERV9CQUQ7CisJaWYgKG1vZGUt
PmhkaXNwbGF5ICUgNjQpCisJCXJldHVybiBNT0RFX0JBRDsKKwlpZiAobW9kZS0+Y2xvY2sgPj0g
MTczMDAwKQorCQlyZXR1cm4gTU9ERV9DTE9DS19ISUdIOworCisJcmV0dXJuIE1PREVfT0s7Cit9
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2NydGNfaGVscGVyX2Z1bmNzIGxvb25nc29uX2Ny
dGNfaGVscGVyX2Z1bmNzID0geworCS5tb2RlX3ZhbGlkID0gbG9vbmdzb25fbW9kZV92YWxpZCwK
KwkuYXRvbWljX2VuYWJsZSA9IGxvb25nc29uX2NydGNfYXRvbWljX2VuYWJsZSwKKwkuYXRvbWlj
X2Rpc2FibGUgPSBsb29uZ3Nvbl9jcnRjX2F0b21pY19kaXNhYmxlLAorCS5tb2RlX3NldF9ub2Zi
ID0gbG9vbmdzb25fY3J0Y19tb2RlX3NldF9ub2ZiLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1fY3J0Y19mdW5jcyBsb29uZ3Nvbl9jcnRjX2Z1bmNzID0geworCS5zZXRfY29uZmlnID0g
ZHJtX2F0b21pY19oZWxwZXJfc2V0X2NvbmZpZywKKwkucGFnZV9mbGlwID0gZHJtX2F0b21pY19o
ZWxwZXJfcGFnZV9mbGlwLAorCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX2NydGNfcmVzZXQs
CisJLmF0b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2R1cGxp
Y2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9j
cnRjX2Rlc3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBs
b29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gJmxkZXYtPmRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fcGxhbmUgKnBsYW5lOworCXN0cnVj
dCBsb29uZ3Nvbl9jcnRjICpsY3J0YzsKKworCXBsYW5lID0gbG9vbmdzb25fcGxhbmVfaW5pdChk
ZXYsIGluZGV4KTsKKwlpZiAoSVNfRVJSKHBsYW5lKSkKKwkJcmV0dXJuIFBUUl9FUlIocGxhbmUp
OworCisJbGNydGMgPSBkcm1tX2NydGNfYWxsb2Nfd2l0aF9wbGFuZXMoZGV2LCBzdHJ1Y3QgbG9v
bmdzb25fY3J0YywgYmFzZSwKKwkJCQkJICAgICZwbGFuZS0+YmFzZSwgTlVMTCwKKwkJCQkJICAg
ICZsb29uZ3Nvbl9jcnRjX2Z1bmNzLCBOVUxMKTsKKwlpZiAoSVNfRVJSKGxjcnRjKSkKKwkJcmV0
dXJuIFBUUl9FUlIobGNydGMpOworCisJbGNydGMtPmxkZXYgPSBsZGV2OworCWxjcnRjLT5yZWdf
b2Zmc2V0ID0gaW5kZXggKiBSRUdfT0ZGU0VUOworCWxjcnRjLT5jZmdfcmVnID0gQ0ZHX1JFU0VU
OworCWxjcnRjLT5jcnRjX2lkID0gaW5kZXg7CisJbGNydGMtPnBsYW5lID0gcGxhbmU7CisKKwlk
cm1fY3J0Y19oZWxwZXJfYWRkKCZsY3J0Yy0+YmFzZSwgJmxvb25nc29uX2NydGNfaGVscGVyX2Z1
bmNzKTsKKworCWxkZXYtPm1vZGVfaW5mb1tpbmRleF0uY3J0YyA9IGxjcnRjOworCisJcmV0dXJu
IDA7Cit9CisKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
ZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjg5N2I5NmZkOTZkYwotLS0gL2Rl
di9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpA
QCAtMCwwICsxLDM4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorLyogQ29weXJpZ2h0IChDKSAyMDIyIExvb25nc29uIEluYy4gKi8KKworI2luY2x1ZGUg
PGRybS9kcm1fZnJhbWVidWZmZXIuaD4KKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCit1
MzIgbG9vbmdzb25fZ3B1X29mZnNldChzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSwKKwkJ
CXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYpCit7CisJc3RydWN0IGRybV9nZW1fdnJhbV9v
YmplY3QgKmdibzsKKwl1MzIgZ3B1X2FkZHI7CisKKwlnYm8gPSBkcm1fZ2VtX3ZyYW1fb2ZfZ2Vt
KHN0YXRlLT5mYi0+b2JqWzBdKTsKKwlncHVfYWRkciA9IGxkZXYtPnZyYW1fc3RhcnQgKyBkcm1f
Z2VtX3ZyYW1fb2Zmc2V0KGdibyk7CisKKwlyZXR1cm4gZ3B1X2FkZHI7Cit9CisKK3UzMiBsczdh
X2lvX3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwly
ZXR1cm4gcmVhZGwobGRldi0+aW8gKyBvZmZzZXQpOworfQorCit2b2lkIGxzN2FfaW9fd3JlZyhz
dHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKQoreworCXdy
aXRlbCh2YWwsIGxkZXYtPmlvICsgb2Zmc2V0KTsKK30KKwordTMyIGxzN2FfbW1fcnJlZyhzdHJ1
Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0KQoreworCXJldHVybiByZWFkbChs
ZGV2LT5tbWlvICsgb2Zmc2V0KTsKK30KKwordm9pZCBsczdhX21tX3dyZWcoc3RydWN0IGxvb25n
c29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCkKK3sKKwl3cml0ZWwodmFsLCBs
ZGV2LT5tbWlvICsgb2Zmc2V0KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
cnYuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjNkYjI5ODI5Mzg2
NQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
cnYuYwpAQCAtMCwwICsxLDI3MyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb3ItbGF0ZXIKKy8qIENvcHlyaWdodCAoQykgMjAyMiBMb29uZ3NvbiBJbmMuICovCisvKgor
ICogTG9vbmdzb24gTFM3QTEwMDAgYnJpZGdlIGNoaXBzZXQgZHJtIGRyaXZlcgorICogQXV0aG9y
OiBZaSBMaSwgbGl5aUBsb29uZ3Nvbi5jbgorICogICAgICAgICBDaGVueWFuZyBMaSwgbGljaGVu
eWFuZ0Bsb29uZ3Nvbi5jbgorICovCisKKyNpbmNsdWRlIDxsaW51eC9jb25zb2xlLmg+CisjaW5j
bHVkZSA8bGludXgva2VybmVsLmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CisjaW5jbHVk
ZSA8bGludXgvcGNpLmg+CisKKyNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgorI2luY2x1ZGUgPGRy
bS9kcm1fZmJfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9nZW1fZnJhbWVidWZmZXJfaGVs
cGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxwZXIuaD4KKworI2luY2x1ZGUgImxv
b25nc29uX2Rydi5oIgorCisvKiBJbnRlcmZhY2UgaGlzdG9yeToKKyAqIDAuMSAtIG9yaWdpbmFs
LgorICovCisjZGVmaW5lIERSSVZFUl9NQUpPUiAwCisjZGVmaW5lIERSSVZFUl9NSU5PUiAxCisK
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2Z1bmNzIGxvb25nc29uX21vZGVf
ZnVuY3MgPSB7CisJLmZiX2NyZWF0ZSA9IGRybV9nZW1fZmJfY3JlYXRlLAorCS5hdG9taWNfY2hl
Y2sgPSBkcm1fYXRvbWljX2hlbHBlcl9jaGVjaywKKwkuYXRvbWljX2NvbW1pdCA9IGRybV9hdG9t
aWNfaGVscGVyX2NvbW1pdCwKKwkub3V0cHV0X3BvbGxfY2hhbmdlZCA9IGRybV9mYl9oZWxwZXJf
b3V0cHV0X3BvbGxfY2hhbmdlZCwKKwkubW9kZV92YWxpZCA9IGRybV92cmFtX2hlbHBlcl9tb2Rl
X3ZhbGlkCit9OworCitzdGF0aWMgaW50IGxvb25nc29uX2RldmljZV9pbml0KHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpCit7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IHRvX2xvb25n
c29uX2RldmljZShkZXYpOworCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gdG9fcGNpX2RldihkZXYt
PmRldik7CisJc3RydWN0IHBjaV9kZXYgKmdwdV9wZGV2OworCXJlc291cmNlX3NpemVfdCBhcGVy
X2Jhc2U7CisJcmVzb3VyY2Vfc2l6ZV90IGFwZXJfc2l6ZTsKKwlyZXNvdXJjZV9zaXplX3QgbW1p
b19iYXNlOworCXJlc291cmNlX3NpemVfdCBtbWlvX3NpemU7CisJaW50IHJldDsKKworCS8qIEdQ
VSBNRU0gKi8KKwkvKiBXZSBuZWVkIGdldCA3QS1ncHUgcGNpIGRldmljZSBpbmZvcm1hdGlvbiBm
b3IgbGRldi0+Z3B1X3BkZXYgKi8KKwkvKiBkZXYtPnBkZXYgc2F2ZSA3QS1kYyBwY2kgZGV2aWNl
IGluZm9ybWF0aW9uICovCisJZ3B1X3BkZXYgPSBwY2lfZ2V0X2RldmljZShQQ0lfVkVORE9SX0lE
X0xPT05HU09OLAorCQkJCSAgUENJX0RFVklDRV9JRF9MT09OR1NPTl9HUFUsIE5VTEwpOworCXJl
dCA9IHBjaV9lbmFibGVfZGV2aWNlKGdwdV9wZGV2KTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0
OworCXBjaV9zZXRfZHJ2ZGF0YShncHVfcGRldiwgZGV2KTsKKworCWFwZXJfYmFzZSA9IHBjaV9y
ZXNvdXJjZV9zdGFydChncHVfcGRldiwgMik7CisJYXBlcl9zaXplID0gcGNpX3Jlc291cmNlX2xl
bihncHVfcGRldiwgMik7CisJbGRldi0+dnJhbV9zdGFydCA9IGFwZXJfYmFzZTsKKwlsZGV2LT52
cmFtX3NpemUgPSBhcGVyX3NpemU7CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVnaW9uKGRl
di0+ZGV2LCBsZGV2LT52cmFtX3N0YXJ0LAorCQkJCSAgICAgbGRldi0+dnJhbV9zaXplLCAibG9v
bmdzb25fdnJhbSIpKSB7CisJCWRybV9lcnIoZGV2LCAiQ2FuJ3QgcmVzZXJ2ZSBWUkFNXG4iKTsK
KwkJcmV0dXJuIC1FTlhJTzsKKwl9CisKKwkvKiBEQyBNRU0gKi8KKwltbWlvX2Jhc2UgPSBwY2lf
cmVzb3VyY2Vfc3RhcnQocGRldiwgMCk7CisJbW1pb19zaXplID0gcGNpX3Jlc291cmNlX2xlbihw
ZGV2LCAwKTsKKwlsZGV2LT5tbWlvID0gZGV2bV9pb3JlbWFwKGRldi0+ZGV2LCBtbWlvX2Jhc2Us
IG1taW9fc2l6ZSk7CisJaWYgKCFsZGV2LT5tbWlvKSB7CisJCWRybV9lcnIoZGV2LCAiQ2Fubm90
IG1hcCBtbWlvIHJlZ2lvblxuIik7CisJCXJldHVybiAtRU5PTUVNOworCX0KKworCWlmICghZGV2
bV9yZXF1ZXN0X21lbV9yZWdpb24oZGV2LT5kZXYsIG1taW9fYmFzZSwKKwkJCQkgICAgIG1taW9f
c2l6ZSwgImxvb25nc29uX21taW8iKSkgeworCQlkcm1fZXJyKGRldiwgIkNhbid0IHJlc2VydmUg
bW1pbyByZWdpc3RlcnNcbiIpOworCQlyZXR1cm4gLUVOT01FTTsKKwl9CisKKwkvKiBEQyBJTyAq
LworCWxkZXYtPmlvID0gZGV2bV9pb3JlbWFwKGRldi0+ZGV2LCBMUzdBX0NISVBDRkdfUkVHX0JB
U0UsIDB4Zik7CisJaWYgKCFsZGV2LT5pbykKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlsZGV2LT5u
dW1fY3J0YyA9IDI7CisKKwlkcm1faW5mbyhkZXYsICJEQyBtbWlvIGJhc2UgMHglbGx4IHNpemUg
MHglbGx4IGlvIDB4JWxseFxuIiwKKwkJIG1taW9fYmFzZSwgbW1pb19zaXplLCAqKHU2NCAqKWxk
ZXYtPmlvKTsKKwlkcm1faW5mbyhkZXYsICJHUFUgdnJhbSBzdGFydCA9IDB4JXggc2l6ZSA9IDB4
JXhcbiIsCisJCSBsZGV2LT52cmFtX3N0YXJ0LCBsZGV2LT52cmFtX3NpemUpOworCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBpbnQgbG9vbmdzb25fbW9kZXNldF9pbml0KHN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYpCit7CisJaW50IGk7CisJaW50IHJldDsKKworCWZvciAoaSA9IDA7IGkg
PCBsZGV2LT5udW1fY3J0YzsgaSsrKSB7CisJCXJldCA9IGxvb25nc29uX2NydGNfaW5pdChsZGV2
LCBpKTsKKwkJaWYgKHJldCkgeworCQkJZHJtX3dhcm4oJmxkZXYtPmRldiwgImxvb25nc29uIGNy
dGMlZCBpbml0IGZhaWxcbiIsIGkpOworCQkJY29udGludWU7CisJCX0KKworCQlyZXQgPSBsb29u
Z3Nvbl9lbmNvZGVyX2luaXQobGRldiwgaSk7CisJCWlmIChyZXQpIHsKKwkJCWRybV9lcnIoJmxk
ZXYtPmRldiwgImxvb25nc29uX2VuY29kZXJfaW5pdCBmYWlsZWRcbiIpOworCQkJcmV0dXJuIHJl
dDsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2JyaWRnZV9jb25uZWN0b3JfaW5pdChsZGV2LCBp
KTsKKwkJaWYgKHJldCkgeworCQkJZHJtX2VycigmbGRldi0+ZGV2LCAibG9vbmdzb25fY29ubmVj
dG9yX2luaXQgZmFpbGVkXG4iKTsKKwkJCXJldHVybiByZXQ7CisJCX0KKwl9CisKKwlyZXR1cm4g
MDsKK30KKworc3RhdGljIGludCBsb29uZ3Nvbl9kcml2ZXJfaW5pdChzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2KQoreworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSB0b19sb29uZ3Nvbl9k
ZXZpY2UoZGV2KTsKKwlpbnQgcmV0OworCisJcmV0ID0gbG9vbmdzb25fZGV2aWNlX2luaXQoZGV2
KTsKKwlpZiAocmV0KQorCQlnb3RvIGVycjsKKworCXJldCA9IGRybW1fdnJhbV9oZWxwZXJfaW5p
dChkZXYsIGxkZXYtPnZyYW1fc3RhcnQsIGxkZXYtPnZyYW1fc2l6ZSk7CisJaWYgKHJldCkgewor
CQlkcm1fZXJyKGRldiwgIkVycm9yIGluaXRpYWxpemluZyB2cmFtICVkXG4iLCByZXQpOworCQln
b3RvIGVycjsKKwl9CisKKwlyZXQgPSBkcm1tX21vZGVfY29uZmlnX2luaXQoZGV2KTsKKwlpZiAo
cmV0KQorCQlyZXR1cm4gcmV0OworCisJZGV2LT5tb2RlX2NvbmZpZy5taW5fd2lkdGggPSAxOwor
CWRldi0+bW9kZV9jb25maWcubWluX2hlaWdodCA9IDE7CisJZGV2LT5tb2RlX2NvbmZpZy5tYXhf
d2lkdGggPSA0MDk2OworCWRldi0+bW9kZV9jb25maWcubWF4X2hlaWdodCA9IDQwOTY7CisJZGV2
LT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggPSAzMjsKKwlkZXYtPm1vZGVfY29uZmlnLnBy
ZWZlcl9zaGFkb3cgPSAxOworCWRldi0+bW9kZV9jb25maWcuZmJfYmFzZSA9IGxkZXYtPnZyYW1f
c3RhcnQ7CisJZGV2LT5tb2RlX2NvbmZpZy5mdW5jcyA9ICh2b2lkICopJmxvb25nc29uX21vZGVf
ZnVuY3M7CisKKwlyZXQgPSBsb29uZ3Nvbl9tb2Rlc2V0X2luaXQobGRldik7CisJaWYgKHJldCkg
eworCQlkcm1fZXJyKGRldiwgIkZhdGFsIGVycm9yIGR1cmluZyBtb2Rlc2V0IGluaXQ6ICVkXG4i
LCByZXQpOworCQlnb3RvIGVycjsKKwl9CisKKwlkcm1fa21zX2hlbHBlcl9wb2xsX2luaXQoZGV2
KTsKKwlkcm1fbW9kZV9jb25maWdfcmVzZXQoZGV2KTsKKworCXJldHVybiAwOworCitlcnI6CisJ
ZHJtX2VycihkZXYsICJmYWlsZWQgdG8gaW5pdGlhbGl6ZSBkcm0gZHJpdmVyOiAlZFxuIiwgcmV0
KTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9kcml2ZXJfZmluaShz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCWRldi0+ZGV2X3ByaXZhdGUgPSBOVUxMOworCWRl
dl9zZXRfZHJ2ZGF0YShkZXYtPmRldiwgTlVMTCk7Cit9CisKK0RFRklORV9EUk1fR0VNX0ZPUFMo
Zm9wcyk7CisKK3N0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBsb29uZ3Nvbl9kcml2ZXIgPSB7CisJ
LmRyaXZlcl9mZWF0dXJlcyA9IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVSX0dFTSB8IERSSVZFUl9B
VE9NSUMsCisJLmZvcHMgPSAmZm9wcywKKwlEUk1fR0VNX1ZSQU1fRFJJVkVSLAorCisJLm5hbWUg
PSBEUklWRVJfTkFNRSwKKwkuZGVzYyA9IERSSVZFUl9ERVNDLAorCS5kYXRlID0gRFJJVkVSX0RB
VEUsCisJLm1ham9yID0gRFJJVkVSX01BSk9SLAorCS5taW5vciA9IERSSVZFUl9NSU5PUiwKK307
CisKK3N0YXRpYyBpbnQgbG9vbmdzb25fcGNpX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LAor
CQkJICAgICAgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKK3sKKwlzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2OworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXY7CisJaW50IHJldDsK
KworCURSTV9JTkZPKCJTdGFydCBsb29uZ3NvbiBkcm0gcHJvYmUuXG4iKTsKKwlsZGV2ID0gZGV2
bV9kcm1fZGV2X2FsbG9jKCZwZGV2LT5kZXYsICZsb29uZ3Nvbl9kcml2ZXIsCisJCQkJICBzdHJ1
Y3QgbG9vbmdzb25fZGV2aWNlLCBkZXYpOworCWlmIChJU19FUlIobGRldikpCisJCXJldHVybiBQ
VFJfRVJSKGxkZXYpOworCWRldiA9ICZsZGV2LT5kZXY7CisKKwlwY2lfc2V0X2RydmRhdGEocGRl
diwgZGV2KTsKKworCXJldCA9IHBjaW1fZW5hYmxlX2RldmljZShwZGV2KTsKKwlpZiAocmV0KSB7
CisJCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBwY2kgZGV2aWNlOiAlZFxuIiwgcmV0
KTsKKwkJZ290byBlcnJfZnJlZTsKKwl9CisKKwlyZXQgPSBsb29uZ3Nvbl9kcml2ZXJfaW5pdChk
ZXYpOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gbG9hZCBsb29uZ3Nv
bjogJWRcbiIsIHJldCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJcmV0ID0gZHJtX2Rldl9y
ZWdpc3RlcihkZXYsIDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8g
cmVnaXN0ZXIgZHJ2IGZvciB1c2Vyc3BhY2UgYWNjZXNzOiAlZFxuIiwKKwkJCXJldCk7CisJCWdv
dG8gZHJpdmVyX2Zpbmk7CisJfQorCisJZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAoZGV2LCBkZXYt
Pm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCk7CisJRFJNX0lORk8oImxvb25nc29uIGZiZGV2
IGVuYWJsZWQuXG4iKTsKKworCXJldHVybiAwOworCitkcml2ZXJfZmluaToKKwlsb29uZ3Nvbl9k
cml2ZXJfZmluaShkZXYpOworZXJyX3BkZXY6CisJcGNpX2Rpc2FibGVfZGV2aWNlKHBkZXYpOwor
ZXJyX2ZyZWU6CisJZHJtX2Rldl9wdXQoZGV2KTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMg
dm9pZCBsb29uZ3Nvbl9wY2lfcmVtb3ZlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQoreworCXN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBwY2lfZ2V0X2RydmRhdGEocGRldik7CisKKwlkcm1fZGV2X3Vu
cmVnaXN0ZXIoZGV2KTsKKwlsb29uZ3Nvbl9kcml2ZXJfZmluaShkZXYpOworfQorCitzdGF0aWMg
c3RydWN0IHBjaV9kZXZpY2VfaWQgbG9vbmdzb25fcGNpX2RldmljZXNbXSA9IHsKKwl7IFBDSV9E
RVZJQ0UoUENJX1ZFTkRPUl9JRF9MT09OR1NPTiwgUENJX0RFVklDRV9JRF9MT09OR1NPTl9EQykg
fSwKKwl7MCx9Cit9OworCitzdGF0aWMgc3RydWN0IHBjaV9kcml2ZXIgbG9vbmdzb25fZHJtX3Bj
aV9kcml2ZXIgPSB7CisJLm5hbWUgPSBEUklWRVJfTkFNRSwKKwkuaWRfdGFibGUgPSBsb29uZ3Nv
bl9wY2lfZGV2aWNlcywKKwkucHJvYmUgPSBsb29uZ3Nvbl9wY2lfcHJvYmUsCisJLnJlbW92ZSA9
IGxvb25nc29uX3BjaV9yZW1vdmUsCit9OworCitzdGF0aWMgaW50IF9faW5pdCBsb29uZ3Nvbl9k
cm1faW5pdCh2b2lkKQoreworCXJldHVybiBwY2lfcmVnaXN0ZXJfZHJpdmVyKCZsb29uZ3Nvbl9k
cm1fcGNpX2RyaXZlcik7Cit9CisKK3N0YXRpYyB2b2lkIF9fZXhpdCBsb29uZ3Nvbl9kcm1fZXhp
dCh2b2lkKQoreworCXBjaV91bnJlZ2lzdGVyX2RyaXZlcigmbG9vbmdzb25fZHJtX3BjaV9kcml2
ZXIpOworfQorCittb2R1bGVfaW5pdChsb29uZ3Nvbl9kcm1faW5pdCk7Cittb2R1bGVfZXhpdChs
b29uZ3Nvbl9kcm1fZXhpdCk7CisKK01PRFVMRV9BVVRIT1IoRFJJVkVSX0FVVEhPUik7CitNT0RV
TEVfREVTQ1JJUFRJT04oRFJJVkVSX0RFU0MpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5oIGIvZHJp
dmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uZmViMjU0YWU4YzMyCi0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5oCkBAIC0wLDAgKzEsMTMwIEBACisv
KiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5ICovCisvKiBDb3B5cmlnaHQg
KEMpIDIwMjIgTG9vbmdzb24gSW5jLiAqLworCisjaWZuZGVmIF9fTE9PTkdTT05fRFJWX0hfXwor
I2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KKworI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hl
bHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmg+CisjaW5jbHVkZSA8
ZHJtL2RybV9icmlkZ2UuaD4KKworLyogR2VuZXJhbCBjdXN0b21pemF0aW9uOgorICovCisjZGVm
aW5lIERSSVZFUl9BVVRIT1IgIkxvb25nc29uIGdyYXBoaWNzIGRyaXZlciB0ZWFtIgorI2RlZmlu
ZSBEUklWRVJfTkFNRSAibG9vbmdzb24tZHJtIgorI2RlZmluZSBEUklWRVJfREVTQyAiTG9vbmdz
b24gTFM3QSBEUk0gZHJpdmVyIgorI2RlZmluZSBEUklWRVJfREFURSAiMjAyMDA5MTUiCisKKyNk
ZWZpbmUgdG9fbG9vbmdzb25fY3J0Yyh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0IGxvb25nc29u
X2NydGMsIGJhc2UpCisjZGVmaW5lIHRvX2xvb25nc29uX2VuY29kZXIoeCkgY29udGFpbmVyX29m
KHgsIHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyLCBiYXNlKQorCisjZGVmaW5lIExTN0FfQ0hJUENG
R19SRUdfQkFTRSAoMHgxMDAxMDAwMCkKKyNkZWZpbmUgUENJX0RFVklDRV9JRF9MT09OR1NPTl9E
QyAweDdhMDYKKyNkZWZpbmUgUENJX0RFVklDRV9JRF9MT09OR1NPTl9HUFUgMHg3YTE1CisjZGVm
aW5lIExTN0FfUElYX1BMTCAoMHgwNGIwKQorI2RlZmluZSBSRUdfT0ZGU0VUICgweDEwKQorI2Rl
ZmluZSBGQl9DRkdfUkVHICgweDEyNDApCisjZGVmaW5lIEZCX0FERFIwX1JFRyAoMHgxMjYwKQor
I2RlZmluZSBGQl9BRERSMV9SRUcgKDB4MTU4MCkKKyNkZWZpbmUgRkJfU1RSSV9SRUcgKDB4MTI4
MCkKKyNkZWZpbmUgRkJfRElUQ0ZHX1JFRyAoMHgxMzYwKQorI2RlZmluZSBGQl9ESVRUQUJfTE9f
UkVHICgweDEzODApCisjZGVmaW5lIEZCX0RJVFRBQl9ISV9SRUcgKDB4MTNhMCkKKyNkZWZpbmUg
RkJfUEFOQ0ZHX1JFRyAoMHgxM2MwKQorI2RlZmluZSBGQl9QQU5USU1fUkVHICgweDEzZTApCisj
ZGVmaW5lIEZCX0hESVNQTEFZX1JFRyAoMHgxNDAwKQorI2RlZmluZSBGQl9IU1lOQ19SRUcgKDB4
MTQyMCkKKyNkZWZpbmUgRkJfVkRJU1BMQVlfUkVHICgweDE0ODApCisjZGVmaW5lIEZCX1ZTWU5D
X1JFRyAoMHgxNGEwKQorCisjZGVmaW5lIENGR19GTVQgR0VOTUFTSygyLCAwKQorI2RlZmluZSBD
RkdfRkJTV0lUQ0ggQklUKDcpCisjZGVmaW5lIENGR19FTkFCTEUgQklUKDgpCisjZGVmaW5lIENG
R19GQk5VTSBCSVQoMTEpCisjZGVmaW5lIENGR19HQU1NQVIgQklUKDEyKQorI2RlZmluZSBDRkdf
UkVTRVQgQklUKDIwKQorCisjZGVmaW5lIEZCX1BBTkNGR19ERUYgMHg4MDAwMTMxMQorI2RlZmlu
ZSBGQl9IU1lOQ19QVUxTRSAoMSA8PCAzMCkKKyNkZWZpbmUgRkJfVlNZTkNfUFVMU0UgKDEgPDwg
MzApCisKKy8qIFBJWCBQTEwgKi8KKyNkZWZpbmUgTE9PUENfTUlOIDI0CisjZGVmaW5lIExPT1BD
X01BWCAxNjEKKyNkZWZpbmUgRlJFX1JFRl9NSU4gMTIKKyNkZWZpbmUgRlJFX1JFRl9NQVggMzIK
KyNkZWZpbmUgRElWX1JFRl9NSU4gMworI2RlZmluZSBESVZfUkVGX01BWCA1CisjZGVmaW5lIFBT
VF9ESVZfTUFYIDY0CisKK3N0cnVjdCBwaXhfcGxsIHsKKwl1MzIgbDJfZGl2OworCXUzMiBsMV9s
b29wYzsKKwl1MzIgbDFfZnJlZmM7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fY3J0YyB7CisJc3Ry
dWN0IGRybV9jcnRjIGJhc2U7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwl1MzIg
Y3J0Y19pZDsKKwl1MzIgcmVnX29mZnNldDsKKwl1MzIgY2ZnX3JlZzsKKwlzdHJ1Y3QgbG9vbmdz
b25fcGxhbmUgKnBsYW5lOworfTsKKworc3RydWN0IGxvb25nc29uX3BsYW5lIHsKKwlzdHJ1Y3Qg
ZHJtX3BsYW5lIGJhc2U7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciB7CisJc3RydWN0
IGRybV9lbmNvZGVyIGJhc2U7CisJc3RydWN0IGRybV9icmlkZ2UgYnJpZGdlOworCXN0cnVjdCBs
b29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjOworfTsK
Kworc3RydWN0IGxvb25nc29uX21vZGVfaW5mbyB7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmNy
dGM7CisJc3RydWN0IGxvb25nc29uX2VuY29kZXIgKmVuY29kZXI7Cit9OworCitzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlIHsKKwlzdHJ1Y3QgZHJtX2RldmljZSBkZXY7CisJc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlOworCisJdm9pZCBfX2lvbWVtICptbWlvOworCXZvaWQgX19pb21lbSAq
aW87CisJdTMyIHZyYW1fc3RhcnQ7CisJdTMyIHZyYW1fc2l6ZTsKKworCXUzMiBudW1fY3J0YzsK
KwlzdHJ1Y3QgbG9vbmdzb25fbW9kZV9pbmZvIG1vZGVfaW5mb1syXTsKKwlzdHJ1Y3QgcGNpX2Rl
diAqZ3B1X3BkZXY7IC8qIExTN0EgZ3B1IGRldmljZSBpbmZvICovCit9OworCitzdGF0aWMgaW5s
aW5lIHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKnRvX2xvb25nc29uX2RldmljZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQoreworCXJldHVybiBjb250YWluZXJfb2YoZGV2LCBzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlLCBkZXYpOworfQorCisvKiBjcnRjICovCitpbnQgbG9vbmdzb25fY3J0Y19pbml0
KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisKKy8qIGNvbm5lY3Rv
ciAqLworaW50IGxvb25nc29uX2JyaWRnZV9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBlbmNvZGVyICovCitpbnQgbG9vbmdzb25f
ZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisK
Ky8qIHBsYW5lICovCitzdHJ1Y3QgbG9vbmdzb25fcGxhbmUgKmxvb25nc29uX3BsYW5lX2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgaW50IGluZGV4KTsKKworLyogZGV2aWNlICovCit1MzIg
bG9vbmdzb25fZ3B1X29mZnNldChzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSwKKwkJCXN0
cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmRldik7Cit1MzIgbHM3YV9tbV9ycmVnKHN0cnVjdCBsb29u
Z3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpOwordm9pZCBsczdhX21tX3dyZWcoc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCk7Cit1MzIgbHM3YV9p
b19ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpOwordm9pZCBs
czdhX2lvX3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMy
IHZhbCk7CisKKyNlbmRpZiAvKiBfX0xPT05HU09OX0RSVl9IX18gKi8KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMgYi9kcml2ZXJzL2dwdS9k
cm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uMDY0NWE2NDVjYjlkCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYwpAQCAtMCwwICsxLDU4IEBACisvLyBT
UERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorLyogQ29weXJpZ2h0IChD
KSAyMDIyIExvb25nc29uIEluYy4gKi8KKworI2luY2x1ZGUgPGRybS9kcm1fZWRpZC5oPgorI2lu
Y2x1ZGUgPGRybS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuaD4KKworI2luY2x1ZGUgImxvb25nc29u
X2Rydi5oIgorCitzdGF0aWMgaW50IGxvb25nc29uX2JyaWRnZV9nZXRfbW9kZXMoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IpCit7CisJaW50IGNvdW50OworCisJY291bnQgPSBkcm1fYWRkX21vZGVzX25vZWRpZChjb25u
ZWN0b3IsIDE5MjAsIDEwODApOworCWRybV9zZXRfcHJlZmVycmVkX21vZGUoY29ubmVjdG9yLCAx
MDI0LCA3NjgpOworCisJcmV0dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9icmlkZ2VfZnVuY3MgbG9vbmdzb25fZW5jb2Rlcl9icmlkZ2VfZnVuY3MgPSB7CisJLmdldF9t
b2RlcyA9IGxvb25nc29uX2JyaWRnZV9nZXRfbW9kZXMsCisJLmF0b21pY19kdXBsaWNhdGVfc3Rh
dGUgPSBkcm1fYXRvbWljX2hlbHBlcl9icmlkZ2VfZHVwbGljYXRlX3N0YXRlLAorCS5hdG9taWNf
ZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2JyaWRnZV9kZXN0cm95X3N0YXRlLAor
CS5hdG9taWNfcmVzZXQgPSBkcm1fYXRvbWljX2hlbHBlcl9icmlkZ2VfcmVzZXQsCit9OworCitp
bnQgbG9vbmdzb25fZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGlu
dCBpbmRleCkKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJmxkZXYtPmRldjsKKwlzdHJ1
Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29kZXI7CisJaW50IHJldDsKKworCWxlbmNvZGVyID0g
ZHJtbV9zaW1wbGVfZW5jb2Rlcl9hbGxvYyhkZXYsIHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyLAor
CQkJCQkgICAgIGJhc2UsIERSTV9NT0RFX0VOQ09ERVJfREFDKTsKKwlpZiAoSVNfRVJSKGxlbmNv
ZGVyKSkKKwkJcmV0dXJuIFBUUl9FUlIobGVuY29kZXIpOworCisJbGVuY29kZXItPmJhc2UucG9z
c2libGVfY3J0Y3MgPSAxIDw8IGluZGV4OworCWxkZXYtPm1vZGVfaW5mb1tpbmRleF0uZW5jb2Rl
ciA9IGxlbmNvZGVyOworCisJbGVuY29kZXItPmJyaWRnZS5mdW5jcyA9ICZsb29uZ3Nvbl9lbmNv
ZGVyX2JyaWRnZV9mdW5jczsKKwlsZW5jb2Rlci0+YnJpZGdlLm9wcyA9IERSTV9CUklER0VfT1Bf
TU9ERVM7CisJaWYgKGluZGV4ID09IDApCisJCWxlbmNvZGVyLT5icmlkZ2UudHlwZSA9IERSTV9N
T0RFX0NPTk5FQ1RPUl9WR0E7CisJZWxzZSBpZiAoaW5kZXggPT0gMSkKKwkJbGVuY29kZXItPmJy
aWRnZS50eXBlID0gRFJNX01PREVfQ09OTkVDVE9SX0RWSUE7CisKKwlkcm1fYnJpZGdlX2FkZCgm
bGVuY29kZXItPmJyaWRnZSk7CisKKwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmbGVuY29kZXIt
PmJhc2UsICZsZW5jb2Rlci0+YnJpZGdlLCBOVUxMLAorCQkJCURSTV9CUklER0VfQVRUQUNIX05P
X0NPTk5FQ1RPUik7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldi0+ZGV2LCAiRmFpbGVkIHRv
IGF0dGFjaCBicmlkZ2U6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCXJldHVy
biAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX3Bs
YW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjM4MGE5ZjFjNjlhOQotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jCkBAIC0w
LDAgKzEsOTYgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVy
CisvKiBDb3B5cmlnaHQgKEMpIDIwMjIgTG9vbmdzb24gSW5jLiAqLworCisjaW5jbHVkZSA8ZHJt
L2RybV9mcmFtZWJ1ZmZlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+CisKKyNpbmNs
dWRlICJsb29uZ3Nvbl9kcnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fcGxhbmVfYXRvbWlj
X3VwZGF0ZShzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGM7CisJc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpsc3RhdGUg
PSBwbGFuZS0+c3RhdGU7CisJdTMyIGdwdV9hZGRyID0gMDsKKwl1MzIgZmJfYWRkciA9IDA7CisJ
dTMyIHJlZ192YWwgPSAwOworCXUzMiByZWdfb2Zmc2V0OworCXUzMiBwaXRjaDsKKwl1OCBkZXB0
aDsKKwl1MzIgeCwgeTsKKworCWlmICghbHN0YXRlLT5jcnRjIHx8ICFsc3RhdGUtPmZiKQorCQly
ZXR1cm47CisKKwlwaXRjaCA9IGxzdGF0ZS0+ZmItPnBpdGNoZXNbMF07CisJbGNydGMgPSB0b19s
b29uZ3Nvbl9jcnRjKGxzdGF0ZS0+Y3J0Yyk7CisJbGRldiA9IGxjcnRjLT5sZGV2OworCXJlZ19v
ZmZzZXQgPSBsY3J0Yy0+cmVnX29mZnNldDsKKwl4ID0gbHN0YXRlLT5jcnRjLT54OworCXkgPSBs
c3RhdGUtPmNydGMtPnk7CisJZGVwdGggPSBsc3RhdGUtPmZiLT5mb3JtYXQtPmNwcFswXSA8PCAz
OworCisJZ3B1X2FkZHIgPSBsb29uZ3Nvbl9ncHVfb2Zmc2V0KGxzdGF0ZSwgbGRldik7CisJcmVn
X3ZhbCA9IChwaXRjaCArIDI1NSkgJiB+MjU1OworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9TVFJJ
X1JFRyArIHJlZ19vZmZzZXQsIHJlZ192YWwpOworCisJc3dpdGNoIChkZXB0aCkgeworCWNhc2Ug
MTIgLi4uIDE2OgorCQlmYl9hZGRyID0gZ3B1X2FkZHIgKyB5ICogcGl0Y2ggKyBBTElHTih4LCA2
NCkgKiAyOworCQlicmVhazsKKwljYXNlIDI0IC4uLiAzMjoKKwlkZWZhdWx0OgorCQlmYl9hZGRy
ID0gZ3B1X2FkZHIgKyB5ICogcGl0Y2ggKyBBTElHTih4LCA2NCkgKiA0OworCQlicmVhazsKKwl9
CisKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQUREUjBfUkVHICsgcmVnX29mZnNldCwgZmJfYWRk
cik7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0FERFIxX1JFRyArIHJlZ19vZmZzZXQsIGZiX2Fk
ZHIpOworCXJlZ192YWwgPSBsY3J0Yy0+Y2ZnX3JlZyB8IENGR19FTkFCTEU7CisJbHM3YV9tbV93
cmVnKGxkZXYsIEZCX0NGR19SRUcgKyByZWdfb2Zmc2V0LCByZWdfdmFsKTsKK30KKworc3RhdGlj
IGNvbnN0IHVpbnQzMl90IGxvb25nc29uX2Zvcm1hdHNbXSA9IHsKKwlEUk1fRk9STUFUX1JHQjU2
NSwKKwlEUk1fRk9STUFUX1JHQjg4OCwKKwlEUk1fRk9STUFUX1hSR0I4ODg4LAorCURSTV9GT1JN
QVRfQVJHQjg4ODgsCit9OworCitzdGF0aWMgY29uc3QgdWludDY0X3QgbG9vbmdzb25fZm9ybWF0
X21vZGlmaWVyc1tdID0geyBEUk1fRk9STUFUX01PRF9MSU5FQVIsCisJCQkJCQkgICAgICBEUk1f
Rk9STUFUX01PRF9JTlZBTElEIH07CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2Z1
bmNzIGxvb25nc29uX3BsYW5lX2Z1bmNzID0geworCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0g
ZHJtX2F0b21pY19oZWxwZXJfcGxhbmVfZHVwbGljYXRlX3N0YXRlLAorCS5hdG9taWNfZGVzdHJv
eV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX2Rlc3Ryb3lfc3RhdGUsCisJLmRpc2Fi
bGVfcGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl9kaXNhYmxlX3BsYW5lLAorCS5yZXNldCA9IGRy
bV9hdG9taWNfaGVscGVyX3BsYW5lX3Jlc2V0LAorCS51cGRhdGVfcGxhbmUgPSBkcm1fYXRvbWlj
X2hlbHBlcl91cGRhdGVfcGxhbmUsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFu
ZV9oZWxwZXJfZnVuY3MgbG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1bmNzID0geworCS5wcmVwYXJl
X2ZiCT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9wcmVwYXJlX2ZiLAorCS5jbGVhbnVwX2Zi
CT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9jbGVhbnVwX2ZiLAorCS5hdG9taWNfdXBkYXRl
ID0gbG9vbmdzb25fcGxhbmVfYXRvbWljX3VwZGF0ZSwKK307CisKK3N0cnVjdCBsb29uZ3Nvbl9w
bGFuZSAqbG9vbmdzb25fcGxhbmVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBpbnQgaW5k
ZXgpCit7CisJc3RydWN0IGxvb25nc29uX3BsYW5lICpwbGFuZTsKKworCXBsYW5lID0gZHJtbV91
bml2ZXJzYWxfcGxhbmVfYWxsb2MoZGV2LCBzdHJ1Y3QgbG9vbmdzb25fcGxhbmUsIGJhc2UsCisJ
CQkJCSAgIEJJVChpbmRleCksICZsb29uZ3Nvbl9wbGFuZV9mdW5jcywKKwkJCQkJICAgbG9vbmdz
b25fZm9ybWF0cywKKwkJCQkJICAgQVJSQVlfU0laRShsb29uZ3Nvbl9mb3JtYXRzKSwKKwkJCQkJ
ICAgbG9vbmdzb25fZm9ybWF0X21vZGlmaWVycywKKwkJCQkJICAgRFJNX1BMQU5FX1RZUEVfUFJJ
TUFSWSwgTlVMTCk7CisJaWYgKElTX0VSUihwbGFuZSkpIHsKKwkJZHJtX2VycihkZXYsICJmYWls
ZWQgdG8gYWxsb2NhdGUgYW5kIGluaXRpYWxpemUgcGxhbmVcbiIpOworCQlyZXR1cm4gcGxhbmU7
CisJfQorCisJZHJtX3BsYW5lX2hlbHBlcl9hZGQoJnBsYW5lLT5iYXNlLCAmbG9vbmdzb25fcGxh
bmVfaGVscGVyX2Z1bmNzKTsKKworCXJldHVybiBwbGFuZTsKK30KLS0gCjIuMjUuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZGV2ZWwgbWFpbGluZyBs
aXN0CmRldmVsQGxpbnV4ZHJpdmVycHJvamVjdC5vcmcKaHR0cDovL2RyaXZlcmRldi5saW51eGRy
aXZlcnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8vZHJpdmVyZGV2LWRldmVsCg==

