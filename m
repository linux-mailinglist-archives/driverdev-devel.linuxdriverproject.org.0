Return-Path: <driverdev-devel-bounces@linuxdriverproject.org>
X-Original-To: lists+driverdev-devel@lfdr.de
Delivered-To: lists+driverdev-devel@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 4DE7D147F9
	for <lists+driverdev-devel@lfdr.de>; Mon,  6 May 2019 11:59:40 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id 3842B8681B;
	Mon,  6 May 2019 09:59:38 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mqwsyKnumJa5; Mon,  6 May 2019 09:59:37 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by whitealder.osuosl.org (Postfix) with ESMTP id 9FD04867D4;
	Mon,  6 May 2019 09:59:31 +0000 (UTC)
X-Original-To: devel@linuxdriverproject.org
Delivered-To: driverdev-devel@osuosl.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by ash.osuosl.org (Postfix) with ESMTP id BDCB31BF28B
 for <devel@linuxdriverproject.org>; Mon,  6 May 2019 09:59:28 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id B9D4C84492
 for <devel@linuxdriverproject.org>; Mon,  6 May 2019 09:59:28 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id tN25elk5s0kS for <devel@linuxdriverproject.org>;
 Mon,  6 May 2019 09:59:26 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.7.6
Received: from smtp-out.xnet.cz (smtp-out.xnet.cz [178.217.244.18])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id B1A7A822F3
 for <devel@driverdev.osuosl.org>; Mon,  6 May 2019 09:59:25 +0000 (UTC)
Received: from meh.true.cz (meh.true.cz [108.61.167.218])
 (Authenticated sender: petr@true.cz)
 by smtp-out.xnet.cz (Postfix) with ESMTPSA id DC6493858;
 Mon,  6 May 2019 11:59:22 +0200 (CEST)
Received: by meh.true.cz (OpenSMTPD) with ESMTP id bfe84ebd;
 Mon, 6 May 2019 11:59:21 +0200 (CEST)
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
To: "David S. Miller" <davem@davemloft.net>,
 Andreas Larsson <andreas@gaisler.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>,
 Thor Thayer <thor.thayer@linux.intel.com>,
 Florian Fainelli <f.fainelli@gmail.com>, Doug Berger <opendmb@gmail.com>,
 Sunil Goutham <sgoutham@cavium.com>, Robert Richter <rric@kernel.org>,
 Fugang Duan <fugang.duan@nxp.com>, Madalin Bucur <madalin.bucur@nxp.com>,
 Pantelis Antoniou <pantelis.antoniou@gmail.com>,
 Claudiu Manoil <claudiu.manoil@nxp.com>, Li Yang <leoyang.li@nxp.com>,
 Yisen Zhuang <yisen.zhuang@huawei.com>,
 Salil Mehta <salil.mehta@huawei.com>, Hauke Mehrtens <hauke@hauke-m.de>,
 Sebastian Hesselbarth <sebastian.hesselbarth@gmail.com>,
 Thomas Petazzoni <thomas.petazzoni@bootlin.com>,
 Mirko Lindner <mlindner@marvell.com>,
 Stephen Hemminger <stephen@networkplumber.org>,
 Felix Fietkau <nbd@openwrt.org>, John Crispin <john@phrozen.org>,
 Sean Wang <sean.wang@mediatek.com>,
 Nelson Chang <nelson.chang@mediatek.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Vladimir Zapolskiy <vz@mleia.com>,
 Sylvain Lemieux <slemieux.tyco@gmail.com>,
 Sergei Shtylyov <sergei.shtylyov@cogentembedded.com>,
 Byungho An <bh74.an@samsung.com>, Girish K S <ks.giri@samsung.com>,
 Vipul Pandya <vipul.pandya@samsung.com>,
 Kunihiko Hayashi <hayashi.kunihiko@socionext.com>,
 Giuseppe Cavallaro <peppe.cavallaro@st.com>,
 Alexandre Torgue <alexandre.torgue@st.com>,
 Jose Abreu <joabreu@synopsys.com>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Grygorii Strashko <grygorii.strashko@ti.com>,
 Wingman Kwok <w-kwok2@ti.com>, Murali Karicheri <m-karicheri2@ti.com>,
 Michal Simek <michal.simek@xilinx.com>,
 Anirudha Sarangi <anirudh@xilinx.com>, John Linn <John.Linn@xilinx.com>
Subject: [PATCH net-next 1/3] net: ethernet: support of_get_mac_address new
 ERR_PTR error
Date: Mon,  6 May 2019 11:58:35 +0200
Message-Id: <1557136717-531-2-git-send-email-ynezz@true.cz>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1557136717-531-1-git-send-email-ynezz@true.cz>
References: <1557136717-531-1-git-send-email-ynezz@true.cz>
MIME-Version: 1.0
X-BeenThere: driverdev-devel@linuxdriverproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Driver Project Developer List
 <driverdev-devel.linuxdriverproject.org>
List-Unsubscribe: <http://driverdev.linuxdriverproject.org/mailman/options/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=unsubscribe>
List-Archive: <http://driverdev.linuxdriverproject.org/pipermail/driverdev-devel/>
List-Post: <mailto:driverdev-devel@linuxdriverproject.org>
List-Help: <mailto:driverdev-devel-request@linuxdriverproject.org?subject=help>
List-Subscribe: <http://driverdev.linuxdriverproject.org/mailman/listinfo/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=subscribe>
Cc: devel@driverdev.osuosl.org, Andrew Lunn <andrew@lunn.ch>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, linuxppc-dev@lists.ozlabs.org,
 linux-mediatek@lists.infradead.org, linux-kernel@vger.kernel.org,
 linux-renesas-soc@vger.kernel.org, bcm-kernel-feedback-list@broadcom.com,
 netdev@vger.kernel.org, nios2-dev@lists.rocketboards.org,
 =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>, linux-omap@vger.kernel.org,
 Frank Rowand <frowand.list@gmail.com>,
 linux-stm32@st-md-mailman.stormreply.com, linux-arm-kernel@lists.infradead.org,
 Heiner Kallweit <hkallweit1@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: driverdev-devel-bounces@linuxdriverproject.org
Sender: "devel" <driverdev-devel-bounces@linuxdriverproject.org>

VGhlcmUgd2FzIE5WTUVNIHN1cHBvcnQgYWRkZWQgdG8gb2ZfZ2V0X21hY19hZGRyZXNzLCBzbyBp
dCBjb3VsZCBub3cgcmV0dXJuCkVSUl9QVFIgZW5jb2RlZCBlcnJvciB2YWx1ZXMsIHNvIHdlIG5l
ZWQgdG8gYWRqdXN0IGFsbCBjdXJyZW50IHVzZXJzIG9mCm9mX2dldF9tYWNfYWRkcmVzcyB0byB0
aGlzIG5ldyBmYWN0LgoKV2hpbGUgYXQgaXQsIHJlbW92ZSBzdXBlcmZsdW91cyBpc192YWxpZF9l
dGhlcl9hZGRyIGFzIHRoZSBNQUMgYWRkcmVzcwpyZXR1cm5lZCBmcm9tIG9mX2dldF9tYWNfYWRk
cmVzcyBpcyBhbHdheXMgdmFsaWQgYW5kIGNoZWNrZWQgYnkKaXNfdmFsaWRfZXRoZXJfYWRkciBh
bnl3YXkuCgpTaWduZWQtb2ZmLWJ5OiBQZXRyIMWgdGV0aWFyIDx5bmV6ekB0cnVlLmN6PgotLS0K
CiBUaGlzIGlzIGRlZmFjdG8gdjUgb2YgdGhlIHByZXZpb3VzIDA1LzEwIHBhdGNoIGluIHRoZSBz
ZXJpZXMsIGJ1dCBzaW5jZSB0aGUKIHY0IG9mIHRoaXMgMDUvMTAgcGF0Y2ggd2Fzbid0IHBpY2tl
ZCB1cCBieSB0aGUgcGF0Y2h3b3JrIGZvciBzb21lIHVua25vd24KIHJlYXNvbiwgdGhpcyBwYXRj
aCB3YXNuJ3QgYXBwbGllZCB3aXRoIHRoZSBvdGhlciA5IHBhdGNoZXMgaW4gdGhlIHNlcmllcywg
c28KIEknbSByZXNlbmRpbmcgaXQgYXMgYSBzZXBhcmF0ZSBwYXRjaCBvZiB0aGlzIGZpeHVwIHNl
cmllcy4KCiBDaGFuZ2VzIHNpbmNlIHYzOgoKICAqIElTX0VSUl9PUl9OVUxMIC0+IElTX0VSUgoK
IENoYW5nZXMgc2luY2UgdjQ6CgogICogSSd2ZSBqdXN0IGJsaW5kbHkgcmVwbGFjZWQgSVNfRVJS
X09SX05VTEwgd2l0aCBJU19FUlIsIGJ1dCBJJ3ZlIGp1c3QKICAgIHJlYWxpemVkLCB0aGF0IGlu
IHNvbWUgY2FzZXMgd2Ugc3RpbGwgbmVlZCB0byBjaGVjayBmb3IgTlVMTCwgc28gSSd2ZQogICAg
Y29ycmVjdGVkIGl0IGluIGZvbGxvd2luZyBkcml2ZXJzL2ZpbGVzOgoKICAgICAtIGJyb2FkY29t
L2JnbWFjLWJjbWEuYwogICAgIC0gbWFydmVsbC9weGExNjhfZXRoLmMKICAgICAtIHNhbXN1bmcv
c3hnYmUvc3hnYmVfcGxhdGZvcm0uYwogICAgIC0gc3RtaWNyby9zdG1tYWMvc3RtbWFjX21haW4u
YwogICAgIC0gd2l6bmV0L3c1MTAwLmMKICAgICAtIGV0aGVybmV0L2V0aC5jCgogZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGguYyAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2
ZXJzL25ldC9ldGhlcm5ldC9hbGx3aW5uZXIvc3VuNGktZW1hYy5jICAgICAgICAgICB8IDIgKy0K
IGRyaXZlcnMvbmV0L2V0aGVybmV0L2FsdGVyYS9hbHRlcmFfdHNlX21haW4uYyAgICAgICAgIHwg
MiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jICAgICAgICAgICAgICAg
ICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9hdXJvcmEvbmI4ODAwLmMgICAgICAgICAg
ICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JjbXN5c3BvcnQu
YyAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMt
YmNtYS5jICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9i
Z21hYy1wbGF0Zm9ybS5jICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2Fk
Y29tL2dlbmV0L2JjbWdlbmV0LmMgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQv
Y2F2aXVtL29jdGVvbi9vY3Rlb25fbWdtdC5jICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhl
cm5ldC9jYXZpdW0vdGh1bmRlci90aHVuZGVyX2JneC5jICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0
L2V0aGVybmV0L2Rhdmljb20vZG05MDAwLmMgICAgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVy
cy9uZXQvZXRoZXJuZXQvZXRob2MuYyAgICAgICAgICAgICAgICAgICAgICAgICAgfCAyICstCiBk
cml2ZXJzL25ldC9ldGhlcm5ldC9lemNoaXAvbnBzX2VuZXQuYyAgICAgICAgICAgICAgICB8IDIg
Ky0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mZWNfbWFpbi5jICAgICAgICAgICAg
IHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMgICAg
ICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZm1hbi9tYWMuYyAg
ICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mc19lbmV0
L2ZzX2VuZXQtbWFpbi5jIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2dp
YW5mYXIuYyAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2Nh
bGUvdWNjX2dldGguYyAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2hp
c2lsaWNvbi9oaXNpX2ZlbWFjLmMgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJu
ZXQvaGlzaWxpY29uL2hpeDVoZDJfZ21hYy5jICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9l
dGhlcm5ldC9sYW50aXFfeHJ4MjAwLmMgICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMv
bmV0L2V0aGVybmV0L21hcnZlbGwvbXY2NDN4eF9ldGguYyAgICAgICAgICAgIHwgMiArLQogZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYyAgICAgICAgICAgICAgICAgfCAyICst
CiBkcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGguYyAgICAgICAgICAgICB8
IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvc2t5Mi5jICAgICAgICAgICAgICAg
ICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVkaWF0ZWsvbXRrX2V0aF9zb2MuYyAg
ICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxLmMgICAg
ICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTFf
bWxsLmMgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbnhwL2xwY19l
dGguYyAgICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFs
Y29tbS9xY2Ffc3BpLmMgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0
L3F1YWxjb21tL3FjYV91YXJ0LmMgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRo
ZXJuZXQvcmVuZXNhcy9yYXZiX21haW4uYyAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25l
dC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5jICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZl
cnMvbmV0L2V0aGVybmV0L3NhbXN1bmcvc3hnYmUvc3hnYmVfcGxhdGZvcm0uYyAgIHwgMiArLQog
ZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYyAgICAgICAgICAgICAgfCAy
ICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1hYy9zdG1tYWNfbWFpbi5jICAg
ICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3cuYyAgICAgICAgICAgICAgICAg
ICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvdGkvbmV0Y3BfY29yZS5jICAgICAg
ICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC93aXpuZXQvdzUxMDAuYyAg
ICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC9sbF90
ZW1hY19tYWluLmMgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54
L3hpbGlueF9heGllbmV0X21haW4uYyAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC94
aWxpbngveGlsaW54X2VtYWNsaXRlLmMgICAgICAgICB8IDIgKy0KIG5ldC9ldGhlcm5ldC9ldGgu
YyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMiArLQogNDUgZmlsZXMgY2hh
bmdlZCwgNDUgaW5zZXJ0aW9ucygrKSwgNDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGguYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2Flcm9mbGV4L2dyZXRoLmMKaW5kZXggNDdlNTk4NC4uN2M1Y2YwMiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGguYworKysgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC9hZXJvZmxleC9ncmV0aC5jCkBAIC0xNDU5LDcgKzE0NTksNyBAQCBzdGF0aWMgaW50IGdy
ZXRoX29mX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2KQogCQljb25zdCB1OCAq
YWRkcjsKIAogCQlhZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG9mZGV2LT5kZXYub2Zfbm9kZSk7
Ci0JCWlmIChhZGRyKSB7CisJCWlmICghSVNfRVJSKGFkZHIpKSB7CiAJCQlmb3IgKGkgPSAwOyBp
IDwgNjsgaSsrKQogCQkJCW1hY2FkZHJbaV0gPSAodW5zaWduZWQgaW50KSBhZGRyW2ldOwogCQl9
IGVsc2UgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWxsd2lubmVyL3N1bjRp
LWVtYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsbHdpbm5lci9zdW40aS1lbWFjLmMKaW5k
ZXggZTFhY2FmYS4uMzdlYmQ4OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWxs
d2lubmVyL3N1bjRpLWVtYWMuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9hbGx3aW5uZXIv
c3VuNGktZW1hYy5jCkBAIC04NzAsNyArODcwLDcgQEAgc3RhdGljIGludCBlbWFjX3Byb2JlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAKIAkvKiBSZWFkIE1BQy1hZGRyZXNzIGZyb20g
RFQgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19hZGRy
KQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNf
YWRkciwgRVRIX0FMRU4pOwogCiAJLyogQ2hlY2sgaWYgdGhlIE1BQyBhZGRyZXNzIGlzIHZhbGlk
LCBpZiBub3QgZ2V0IGEgcmFuZG9tIG9uZSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvYWx0ZXJhL2FsdGVyYV90c2VfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWx0
ZXJhL2FsdGVyYV90c2VfbWFpbi5jCmluZGV4IGFhMWQxZjUuLjg3N2U2N2YgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsdGVyYS9hbHRlcmFfdHNlX21haW4uYworKysgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9hbHRlcmEvYWx0ZXJhX3RzZV9tYWluLmMKQEAgLTE1MzcsNyArMTUz
Nyw3IEBAIHN0YXRpYyBpbnQgYWx0ZXJhX3RzZV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2KQogCiAJLyogZ2V0IGRlZmF1bHQgTUFDIGFkZHJlc3MgZnJvbSBkZXZpY2UgdHJlZSAq
LwogCW1hY2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUpOwotCWlm
IChtYWNhZGRyKQorCWlmICghSVNfRVJSKG1hY2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkobmRl
di0+ZGV2X2FkZHIsIG1hY2FkZHIpOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5kZXYp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jCmluZGV4IGZmM2Q2ODUuLjdmODlhZDUg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FyYy9lbWFjX21haW4uYworKysgYi9k
cml2ZXJzL25ldC9ldGhlcm5ldC9hcmMvZW1hY19tYWluLmMKQEAgLTk2MCw3ICs5NjAsNyBAQCBp
bnQgYXJjX2VtYWNfcHJvYmUoc3RydWN0IG5ldF9kZXZpY2UgKm5kZXYsIGludCBpbnRlcmZhY2Up
CiAJLyogR2V0IE1BQyBhZGRyZXNzIGZyb20gZGV2aWNlIHRyZWUgKi8KIAltYWNfYWRkciA9IG9m
X2dldF9tYWNfYWRkcmVzcyhkZXYtPm9mX25vZGUpOwogCi0JaWYgKG1hY19hZGRyKQorCWlmICgh
SVNfRVJSKG1hY19hZGRyKSkKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRI
X0FMRU4pOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5kZXYpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvYXVyb3JhL25iODgwMC5jIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvYXVyb3JhL25iODgwMC5jCmluZGV4IGY2MmRlZWIuLjNjNDk2N2UgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L2F1cm9yYS9uYjg4MDAuYworKysgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC9hdXJvcmEvbmI4ODAwLmMKQEAgLTE0NjMsNyArMTQ2Myw3IEBAIHN0YXRpYyBpbnQgbmI4
ODAwX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJZGV2LT5pcnEgPSBpcnE7
CiAKIAltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUpOwotCWlmICht
YWMpCisJaWYgKCFJU19FUlIobWFjKSkKIAkJZXRoZXJfYWRkcl9jb3B5KGRldi0+ZGV2X2FkZHIs
IG1hYyk7CiAKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIoZGV2LT5kZXZfYWRkcikpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNwb3J0LmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNwb3J0LmMKaW5kZXggNGU4N2EzMC4uYzYy
Mzg5NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmNtc3lzcG9y
dC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JjbXN5c3BvcnQuYwpAQCAt
MjUwNSw3ICsyNTA1LDcgQEAgc3RhdGljIGludCBiY21fc3lzcG9ydF9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2KQogCiAJLyogSW5pdGlhbGl6ZSBuZXRkZXZpY2UgbWVtYmVycyAq
LwogCW1hY2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MoZG4pOwotCWlmICghbWFjYWRkciB8fCAh
aXNfdmFsaWRfZXRoZXJfYWRkcihtYWNhZGRyKSkgeworCWlmIChJU19FUlIobWFjYWRkcikpIHsK
IAkJZGV2X3dhcm4oJnBkZXYtPmRldiwgInVzaW5nIHJhbmRvbSBFdGhlcm5ldCBNQUNcbiIpOwog
CQlldGhfaHdfYWRkcl9yYW5kb20oZGV2KTsKIAl9IGVsc2UgewpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jCmluZGV4IDZmZTA3NGMuLjM0ZDE4MzAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLWJjbWEuYworKysgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1iY21hLmMKQEAgLTEzMiw3ICsxMzIsNyBA
QCBzdGF0aWMgaW50IGJnbWFjX3Byb2JlKHN0cnVjdCBiY21hX2RldmljZSAqY29yZSkKIAkJbWFj
ID0gb2ZfZ2V0X21hY19hZGRyZXNzKGJnbWFjLT5kZXYtPm9mX25vZGUpOwogCiAJLyogSWYgbm8g
TUFDIGFkZHJlc3MgYXNzaWduZWQgdmlhIGRldmljZSB0cmVlLCBjaGVjayBTUFJPTSAqLwotCWlm
ICghbWFjKSB7CisJaWYgKElTX0VSUl9PUl9OVUxMKG1hYykpIHsKIAkJc3dpdGNoIChjb3JlLT5j
b3JlX3VuaXQpIHsKIAkJY2FzZSAwOgogCQkJbWFjID0gc3Byb20tPmV0MG1hYzsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLXBsYXRmb3JtLmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1wbGF0Zm9ybS5jCmluZGV4IDg5NGVkYTUu
LjZkYzBkZDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFj
LXBsYXRmb3JtLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtcGxh
dGZvcm0uYwpAQCAtMTkzLDcgKzE5Myw3IEBAIHN0YXRpYyBpbnQgYmdtYWNfcHJvYmUoc3RydWN0
IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAliZ21hYy0+ZG1hX2RldiA9ICZwZGV2LT5kZXY7CiAK
IAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19hZGRyKQorCWlm
ICghSVNfRVJSKG1hY19hZGRyKSkKIAkJZXRoZXJfYWRkcl9jb3B5KGJnbWFjLT5uZXRfZGV2LT5k
ZXZfYWRkciwgbWFjX2FkZHIpOwogCWVsc2UKIAkJZGV2X3dhcm4oJnBkZXYtPmRldiwgIk1BQyBh
ZGRyZXNzIG5vdCBwcmVzZW50IGluIGRldmljZSB0cmVlXG4iKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2dlbmV0L2JjbWdlbmV0LmMgYi9kcml2ZXJzL25ldC9l
dGhlcm5ldC9icm9hZGNvbS9nZW5ldC9iY21nZW5ldC5jCmluZGV4IDRmZDk3MzUuLjM3NGI5ZmYg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2dlbmV0L2JjbWdlbmV0
LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vZ2VuZXQvYmNtZ2VuZXQuYwpA
QCAtMzQ3Niw3ICszNDc2LDcgQEAgc3RhdGljIGludCBiY21nZW5ldF9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2KQogCiAJaWYgKGRuKSB7CiAJCW1hY2FkZHIgPSBvZl9nZXRfbWFj
X2FkZHJlc3MoZG4pOwotCQlpZiAoIW1hY2FkZHIpIHsKKwkJaWYgKElTX0VSUihtYWNhZGRyKSkg
ewogCQkJZGV2X2VycigmcGRldi0+ZGV2LCAiY2FuJ3QgZmluZCBNQUMgYWRkcmVzc1xuIik7CiAJ
CQllcnIgPSAtRUlOVkFMOwogCQkJZ290byBlcnI7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9jYXZpdW0vb2N0ZW9uL29jdGVvbl9tZ210LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9jYXZpdW0vb2N0ZW9uL29jdGVvbl9tZ210LmMKaW5kZXggNTM1OWMxMC4uMTViMTEzMCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL29jdGVvbi9vY3Rlb25fbWdtdC5j
CisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Nhdml1bS9vY3Rlb24vb2N0ZW9uX21nbXQuYwpA
QCAtMTUwMyw3ICsxNTAzLDcgQEAgc3RhdGljIGludCBvY3Rlb25fbWdtdF9wcm9iZShzdHJ1Y3Qg
cGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKHBkZXYt
PmRldi5vZl9ub2RlKTsKIAotCWlmIChtYWMpCisJaWYgKCFJU19FUlIobWFjKSkKIAkJbWVtY3B5
KG5ldGRldi0+ZGV2X2FkZHIsIG1hYywgRVRIX0FMRU4pOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJf
cmFuZG9tKG5ldGRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0v
dGh1bmRlci90aHVuZGVyX2JneC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5k
ZXIvdGh1bmRlcl9iZ3guYwppbmRleCA4MWMyODFhLi5hNjViZTg1IDEwMDY0NAotLS0gYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vdGh1bmRlci90aHVuZGVyX2JneC5jCisrKyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2Nhdml1bS90aHVuZGVyL3RodW5kZXJfYmd4LmMKQEAgLTE0ODQsNyAr
MTQ4NCw3IEBAIHN0YXRpYyBpbnQgYmd4X2luaXRfb2ZfcGh5KHN0cnVjdCBiZ3ggKmJneCkKIAkJ
CWJyZWFrOwogCiAJCW1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhub2RlKTsKLQkJaWYgKG1hYykK
KwkJaWYgKCFJU19FUlIobWFjKSkKIAkJCWV0aGVyX2FkZHJfY29weShiZ3gtPmxtYWNbbG1hY10u
bWFjLCBtYWMpOwogCiAJCVNFVF9ORVRERVZfREVWKCZiZ3gtPmxtYWNbbG1hY10ubmV0ZGV2LCAm
Ymd4LT5wZGV2LT5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZGF2aWNv
bS9kbTkwMDAuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Rhdmljb20vZG05MDAwLmMKaW5kZXgg
YzI1ODZmNC4uOTUzZWU1NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZGF2aWNv
bS9kbTkwMDAuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5jCkBA
IC0xNDEyLDcgKzE0MTIsNyBAQCBzdGF0aWMgc3RydWN0IGRtOTAwMF9wbGF0X2RhdGEgKmRtOTAw
MF9wYXJzZV9kdChzdHJ1Y3QgZGV2aWNlICpkZXYpCiAJCXBkYXRhLT5mbGFncyB8PSBETTkwMDBf
UExBVEZfTk9fRUVQUk9NOwogCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwot
CWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCW1lbWNweShwZGF0YS0+
ZGV2X2FkZHIsIG1hY19hZGRyLCBzaXplb2YocGRhdGEtPmRldl9hZGRyKSk7CiAKIAlyZXR1cm4g
cGRhdGE7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9ldGhvYy5jIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvZXRob2MuYwppbmRleCAwZjNlN2YyLi43MWRhMDQ5IDEwMDY0NAotLS0g
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9ldGhvYy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2V0aG9jLmMKQEAgLTExNTMsNyArMTE1Myw3IEBAIHN0YXRpYyBpbnQgZXRob2NfcHJvYmUoc3Ry
dWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAkJY29uc3Qgdm9pZCAqbWFjOwogCiAJCW1hYyA9
IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2LT5kZXYub2Zfbm9kZSk7Ci0JCWlmIChtYWMpCisJCWlm
ICghSVNfRVJSKG1hYykpCiAJCQlldGhlcl9hZGRyX2NvcHkobmV0ZGV2LT5kZXZfYWRkciwgbWFj
KTsKIAkJcHJpdi0+cGh5X2lkID0gLTE7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvZXpjaGlwL25wc19lbmV0LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9lemNoaXAvbnBz
X2VuZXQuYwppbmRleCA2NTlmMWFkLi5iNGNlMjYxIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9lemNoaXAvbnBzX2VuZXQuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9lemNo
aXAvbnBzX2VuZXQuYwpAQCAtNjE2LDcgKzYxNiw3IEBAIHN0YXRpYyBzMzIgbnBzX2VuZXRfcHJv
YmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAogCS8qIHNldCBrZXJuZWwgTUFDIGFk
ZHJlc3MgdG8gZGV2ICovCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MoZGV2LT5vZl9u
b2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlIobWFjX2FkZHIpKQogCQlldGhlcl9h
ZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAllbHNlCiAJCWV0aF9od19hZGRy
X3JhbmRvbShuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2Fs
ZS9mZWNfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tYWluLmMK
aW5kZXggYTk2YWQyMC4uYWE3ZDRlMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
ZnJlZXNjYWxlL2ZlY19tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxl
L2ZlY19tYWluLmMKQEAgLTE2NTUsNyArMTY1NSw3IEBAIHN0YXRpYyB2b2lkIGZlY19nZXRfbWFj
KHN0cnVjdCBuZXRfZGV2aWNlICpuZGV2KQogCQlzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wID0gZmVw
LT5wZGV2LT5kZXYub2Zfbm9kZTsKIAkJaWYgKG5wKSB7CiAJCQljb25zdCBjaGFyICptYWMgPSBv
Zl9nZXRfbWFjX2FkZHJlc3MobnApOwotCQkJaWYgKG1hYykKKwkJCWlmICghSVNfRVJSKG1hYykp
CiAJCQkJaWFwID0gKHVuc2lnbmVkIGNoYXIgKikgbWFjOwogCQl9CiAJfQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVjX21wYzUyeHguYwppbmRleCBjMTk2OGIzLi43YjdlNTI2
IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVjX21wYzUyeHgu
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVjX21wYzUyeHguYwpAQCAt
OTAyLDcgKzkwMiw3IEBAIHN0YXRpYyBpbnQgbXBjNTJ4eF9mZWNfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqb3ApCiAJICogRmlyc3QgdHJ5IHRvIHJlYWQgTUFDIGFkZHJlc3MgZnJvbSBE
VAogCSAqLwogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsKLQlpZiAobWFjX2Fk
ZHIpIHsKKwlpZiAoIUlTX0VSUihtYWNfYWRkcikpIHsKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRy
LCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCX0gZWxzZSB7CiAJCXN0cnVjdCBtcGM1Mnh4X2ZlYyBf
X2lvbWVtICpmZWMgPSBwcml2LT5mZWM7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9mcmVlc2NhbGUvZm1hbi9tYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9m
bWFuL21hYy5jCmluZGV4IDNjMjE0ODYuLjljZDJjMjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2ZyZWVzY2FsZS9mbWFuL21hYy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2ZyZWVzY2FsZS9mbWFuL21hYy5jCkBAIC03MjQsNyArNzI0LDcgQEAgc3RhdGljIGludCBtYWNf
cHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqX29mX2RldikKIAogCS8qIEdldCB0aGUgTUFD
IGFkZHJlc3MgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhtYWNfbm9kZSk7Ci0J
aWYgKCFtYWNfYWRkcikgeworCWlmIChJU19FUlIobWFjX2FkZHIpKSB7CiAJCWRldl9lcnIoZGV2
LCAib2ZfZ2V0X21hY19hZGRyZXNzKCVwT0YpIGZhaWxlZFxuIiwgbWFjX25vZGUpOwogCQllcnIg
PSAtRUlOVkFMOwogCQlnb3RvIF9yZXR1cm5fb2ZfZ2V0X3BhcmVudDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mc19lbmV0L2ZzX2VuZXQtbWFpbi5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZzX2VuZXQvZnNfZW5ldC1tYWluLmMKaW5kZXgg
N2M1NDhlZC4uOTBlYTdhMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNj
YWxlL2ZzX2VuZXQvZnNfZW5ldC1tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJl
ZXNjYWxlL2ZzX2VuZXQvZnNfZW5ldC1tYWluLmMKQEAgLTEwMTQsNyArMTAxNCw3IEBAIHN0YXRp
YyBpbnQgZnNfZW5ldF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpvZmRldikKIAlzcGlu
X2xvY2tfaW5pdCgmZmVwLT50eF9sb2NrKTsKIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRy
ZXNzKG9mZGV2LT5kZXYub2Zfbm9kZSk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1h
Y19hZGRyKSkKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwog
CiAJcmV0ID0gZmVwLT5vcHMtPmFsbG9jYXRlX2JkKG5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2dpYW5mYXIuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2ZyZWVzY2FsZS9naWFuZmFyLmMKaW5kZXggNDVmY2M5Ni4uZGYxM2M2OSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2dpYW5mYXIuYworKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9mcmVlc2NhbGUvZ2lhbmZhci5jCkBAIC04NzIsNyArODcyLDcgQEAgc3RhdGlj
IGludCBnZmFyX29mX2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqb2ZkZXYsIHN0cnVjdCBu
ZXRfZGV2aWNlICoqcGRldikKIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsK
IAotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCW1lbWNweShkZXYt
PmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCiAJaWYgKG1vZGVsICYmICFzdHJjYXNl
Y21wKG1vZGVsLCAiVFNFQyIpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJl
ZXNjYWxlL3VjY19nZXRoLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvdWNjX2dl
dGguYwppbmRleCBlYjNlNjVlLi4yMTZlOTlhIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9mcmVlc2NhbGUvdWNjX2dldGguYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVl
c2NhbGUvdWNjX2dldGguYwpAQCAtMzkxMCw3ICszOTEwLDcgQEAgc3RhdGljIGludCB1Y2NfZ2V0
aF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlKiBvZmRldikKIAl9CiAKIAltYWNfYWRkciA9
IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1h
Y19hZGRyKSkKIAkJbWVtY3B5KGRldi0+ZGV2X2FkZHIsIG1hY19hZGRyLCBFVEhfQUxFTik7CiAK
IAl1Z2V0aC0+dWdfaW5mbyA9IHVnX2luZm87CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9oaXNpbGljb24vaGlzaV9mZW1hYy5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaGlzaWxp
Y29uL2hpc2lfZmVtYWMuYwppbmRleCAyYzI4MDg4Li45NmMzMmFlIDEwMDY0NAotLS0gYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaGlzaV9mZW1hYy5jCisrKyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2hpc2lsaWNvbi9oaXNpX2ZlbWFjLmMKQEAgLTg3MCw3ICs4NzAsNyBAQCBzdGF0
aWMgaW50IGhpc2lfZmVtYWNfZHJ2X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYp
CiAJCQkgICBwaHlfbW9kZXMocGh5LT5pbnRlcmZhY2UpKTsKIAogCW1hY19hZGRyID0gb2ZfZ2V0
X21hY19hZGRyZXNzKG5vZGUpOwotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUihtYWNfYWRk
cikpCiAJCWV0aGVyX2FkZHJfY29weShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIpOwogCWlmICgh
aXNfdmFsaWRfZXRoZXJfYWRkcihuZGV2LT5kZXZfYWRkcikpIHsKIAkJZXRoX2h3X2FkZHJfcmFu
ZG9tKG5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hp
eDVoZDJfZ21hYy5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hpeDVoZDJfZ21h
Yy5jCmluZGV4IGU1ZDg1M2IuLmIxY2I1OGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2hpc2lsaWNvbi9oaXg1aGQyX2dtYWMuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9o
aXNpbGljb24vaGl4NWhkMl9nbWFjLmMKQEAgLTEyMjksNyArMTIyOSw3IEBAIHN0YXRpYyBpbnQg
aGl4NWhkMl9kZXZfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAl9CiAKIAlt
YWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhub2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYg
KCFJU19FUlIobWFjX2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1h
Y19hZGRyKTsKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIobmRldi0+ZGV2X2FkZHIpKSB7CiAJ
CWV0aF9od19hZGRyX3JhbmRvbShuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2xhbnRpcV94cngyMDAuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2xhbnRpcV94cngyMDAu
YwppbmRleCBkMjkxMDRkLi5jZGE2NDFlIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9sYW50aXFfeHJ4MjAwLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbGFudGlxX3hyeDIw
MC5jCkBAIC00NzgsNyArNDc4LDcgQEAgc3RhdGljIGludCB4cngyMDBfcHJvYmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldikKIAl9CiAKIAltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnAp
OwotCWlmIChtYWMgJiYgaXNfdmFsaWRfZXRoZXJfYWRkcihtYWMpKQorCWlmICghSVNfRVJSKG1h
YykpCiAJCWV0aGVyX2FkZHJfY29weShuZXRfZGV2LT5kZXZfYWRkciwgbWFjKTsKIAllbHNlCiAJ
CWV0aF9od19hZGRyX3JhbmRvbShuZXRfZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L21hcnZlbGwvbXY2NDN4eF9ldGguYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZl
bGwvbXY2NDN4eF9ldGguYwppbmRleCAyOTJhNjY4Li4wN2UyNTRmIDEwMDY0NAotLS0gYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212NjQzeHhfZXRoLmMKKysrIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvbWFydmVsbC9tdjY0M3h4X2V0aC5jCkBAIC0yNzQ5LDcgKzI3NDksNyBAQCBzdGF0
aWMgaW50IG12NjQzeHhfZXRoX3NoYXJlZF9vZl9hZGRfcG9ydChzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2LAogCX0KIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKHBucCk7Ci0J
aWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJbWVtY3B5KHBwZC5tYWNf
YWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAogCW12NjQzeHhfZXRoX3Byb3BlcnR5KHBucCwg
InR4LXF1ZXVlLXNpemUiLCBwcGQudHhfcXVldWVfc2l6ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFy
dmVsbC9tdm5ldGEuYwppbmRleCBhNzE1Mjc3Li44MTg2MTM1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L21hcnZlbGwvbXZuZXRhLmMKQEAgLTQ1NjMsNyArNDU2Myw3IEBAIHN0YXRpYyBpbnQgbXZuZXRh
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJfQogCiAJZHRfbWFjX2FkZHIg
PSBvZl9nZXRfbWFjX2FkZHJlc3MoZG4pOwotCWlmIChkdF9tYWNfYWRkcikgeworCWlmICghSVNf
RVJSKGR0X21hY19hZGRyKSkgewogCQltYWNfZnJvbSA9ICJkZXZpY2UgdHJlZSI7CiAJCW1lbWNw
eShkZXYtPmRldl9hZGRyLCBkdF9tYWNfYWRkciwgRVRIX0FMRU4pOwogCX0gZWxzZSB7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGguYyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L21hcnZlbGwvcHhhMTY4X2V0aC5jCmluZGV4IDM1ZjIxNDIuLmNlMDM3
ZTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvcHhhMTY4X2V0aC5j
CisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvcHhhMTY4X2V0aC5jCkBAIC0xNDYx
LDcgKzE0NjEsNyBAQCBzdGF0aWMgaW50IHB4YTE2OF9ldGhfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikKIAlpZiAocGRldi0+ZGV2Lm9mX25vZGUpCiAJCW1hY19hZGRyID0gb2Zf
Z2V0X21hY19hZGRyZXNzKHBkZXYtPmRldi5vZl9ub2RlKTsKIAotCWlmIChtYWNfYWRkciAmJiBp
c192YWxpZF9ldGhlcl9hZGRyKG1hY19hZGRyKSkgeworCWlmICghSVNfRVJSX09SX05VTEwobWFj
X2FkZHIpKSB7CiAJCWV0aGVyX2FkZHJfY29weShkZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAJ
fSBlbHNlIHsKIAkJLyogdHJ5IHJlYWRpbmcgdGhlIG1hYyBhZGRyZXNzLCBpZiBzZXQgYnkgdGhl
IGJvb3Rsb2FkZXIgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwv
c2t5Mi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMKaW5kZXggOGIzNDk1
ZS4uYzQwNTBlYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3ky
LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMKQEAgLTQ4MDgsNyAr
NDgwOCw3IEBAIHN0YXRpYyBzdHJ1Y3QgbmV0X2RldmljZSAqc2t5Ml9pbml0X25ldGRldihzdHJ1
Y3Qgc2t5Ml9odyAqaHcsIHVuc2lnbmVkIHBvcnQsCiAJICogMikgZnJvbSBpbnRlcm5hbCByZWdp
c3RlcnMgc2V0IGJ5IGJvb3Rsb2FkZXIKIAkgKi8KIAlpYXAgPSBvZl9nZXRfbWFjX2FkZHJlc3Mo
aHctPnBkZXYtPmRldi5vZl9ub2RlKTsKLQlpZiAoaWFwKQorCWlmICghSVNfRVJSKGlhcCkpCiAJ
CW1lbWNweShkZXYtPmRldl9hZGRyLCBpYXAsIEVUSF9BTEVOKTsKIAllbHNlCiAJCW1lbWNweV9m
cm9taW8oZGV2LT5kZXZfYWRkciwgaHctPnJlZ3MgKyBCMl9NQUNfMSArIHBvcnQgKiA4LApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVkaWF0ZWsvbXRrX2V0aF9zb2MuYyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L21lZGlhdGVrL210a19ldGhfc29jLmMKaW5kZXggNTNhYmU5Mi4u
ZjlmYmIzZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVkaWF0ZWsvbXRrX2V0
aF9zb2MuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWRpYXRlay9tdGtfZXRoX3NvYy5j
CkBAIC0yMDI4LDcgKzIwMjgsNyBAQCBzdGF0aWMgaW50IF9faW5pdCBtdGtfaW5pdChzdHJ1Y3Qg
bmV0X2RldmljZSAqZGV2KQogCWNvbnN0IGNoYXIgKm1hY19hZGRyOwogCiAJbWFjX2FkZHIgPSBv
Zl9nZXRfbWFjX2FkZHJlc3MobWFjLT5vZl9ub2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJ
U19FUlIobWFjX2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkoZGV2LT5kZXZfYWRkciwgbWFjX2Fk
ZHIpOwogCiAJLyogSWYgdGhlIG1hYyBhZGRyZXNzIGlzIGludmFsaWQsIHVzZSByYW5kb20gbWFj
IGFkZHJlc3MgICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4
ODUxLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxLmMKaW5kZXggNzg0OTEx
OS4uYjQ0MTcyYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1
MS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTEuYwpAQCAtNDI1LDcg
KzQyNSw3IEBAIHN0YXRpYyB2b2lkIGtzODg1MV9pbml0X21hYyhzdHJ1Y3Qga3M4ODUxX25ldCAq
a3MpCiAJY29uc3QgdTggKm1hY19hZGRyOwogCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJl
c3Moa3MtPnNwaWRldi0+ZGV2Lm9mX25vZGUpOwotCWlmIChtYWNfYWRkcikgeworCWlmICghSVNf
RVJSKG1hY19hZGRyKSkgewogCQltZW1jcHkoZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9B
TEVOKTsKIAkJa3M4ODUxX3dyaXRlX21hY19hZGRyKGRldik7CiAJCXJldHVybjsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTFfbWxsLmMgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9taWNyZWwva3M4ODUxX21sbC5jCmluZGV4IGM5NDY4NDEuLmRjNzZiMGQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTFfbWxsLmMKKysrIGIv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MV9tbGwuYwpAQCAtMTMyNyw3ICsxMzI3
LDcgQEAgc3RhdGljIGludCBrczg4NTFfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKIAkvKiBvdmVyd3JpdGluZyB0aGUgZGVmYXVsdCBNQUMgYWRkcmVzcyAqLwogCWlmIChwZGV2
LT5kZXYub2Zfbm9kZSkgewogCQltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9m
X25vZGUpOwotCQlpZiAobWFjKQorCQlpZiAoIUlTX0VSUihtYWMpKQogCQkJbWVtY3B5KGtzLT5t
YWNfYWRkciwgbWFjLCBFVEhfQUxFTik7CiAJfSBlbHNlIHsKIAkJc3RydWN0IGtzODg1MV9tbGxf
cGxhdGZvcm1fZGF0YSAqcGRhdGE7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9u
eHAvbHBjX2V0aC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbnhwL2xwY19ldGguYwppbmRleCA4
OWQxNzM5Li5kYTEzOGVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9ueHAvbHBj
X2V0aC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L254cC9scGNfZXRoLmMKQEAgLTEzNjgs
NyArMTM2OCw3IEBAIHN0YXRpYyBpbnQgbHBjX2V0aF9kcnZfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikKIAogCWlmICghaXNfdmFsaWRfZXRoZXJfYWRkcihuZGV2LT5kZXZfYWRk
cikpIHsKIAkJY29uc3QgY2hhciAqbWFjYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0J
CWlmIChtYWNhZGRyKQorCQlpZiAoIUlTX0VSUihtYWNhZGRyKSkKIAkJCW1lbWNweShuZGV2LT5k
ZXZfYWRkciwgbWFjYWRkciwgRVRIX0FMRU4pOwogCX0KIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2Fk
ZHIobmRldi0+ZGV2X2FkZHIpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVh
bGNvbW0vcWNhX3NwaS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3NwaS5j
CmluZGV4IDk3ZjkyOTUuLmIyODM2MGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3F1YWxjb21tL3FjYV9zcGkuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9x
Y2Ffc3BpLmMKQEAgLTk2Niw3ICs5NjYsNyBAQAogCiAJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNz
KHNwaS0+ZGV2Lm9mX25vZGUpOwogCi0JaWYgKG1hYykKKwlpZiAoIUlTX0VSUihtYWMpKQogCQll
dGhlcl9hZGRyX2NvcHkocWNhLT5uZXRfZGV2LT5kZXZfYWRkciwgbWFjKTsKIAogCWlmICghaXNf
dmFsaWRfZXRoZXJfYWRkcihxY2EtPm5ldF9kZXYtPmRldl9hZGRyKSkgewpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3VhcnQuYyBiL2RyaXZlcnMvbmV0L2V0
aGVybmV0L3F1YWxjb21tL3FjYV91YXJ0LmMKaW5kZXggZGI2MDY4Yy4uNTkwNjE2OCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3VhcnQuYworKysgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2FfdWFydC5jCkBAIC0zNTEsNyArMzUxLDcgQEAg
c3RhdGljIGludCBxY2FfdWFydF9wcm9iZShzdHJ1Y3Qgc2VyZGV2X2RldmljZSAqc2VyZGV2KQog
CiAJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKHNlcmRldi0+ZGV2Lm9mX25vZGUpOwogCi0JaWYg
KG1hYykKKwlpZiAoIUlTX0VSUihtYWMpKQogCQlldGhlcl9hZGRyX2NvcHkocWNhLT5uZXRfZGV2
LT5kZXZfYWRkciwgbWFjKTsKIAogCWlmICghaXNfdmFsaWRfZXRoZXJfYWRkcihxY2EtPm5ldF9k
ZXYtPmRldl9hZGRyKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNh
cy9yYXZiX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3JlbmVzYXMvcmF2Yl9tYWluLmMK
aW5kZXggOTYxOGM0OC4uZDNmZmNmNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
cmVuZXNhcy9yYXZiX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3Jh
dmJfbWFpbi5jCkBAIC0xMTEsNyArMTExLDcgQEAgc3RhdGljIHZvaWQgcmF2Yl9zZXRfYnVmZmVy
X2FsaWduKHN0cnVjdCBza19idWZmICpza2IpCiAgKi8KIHN0YXRpYyB2b2lkIHJhdmJfcmVhZF9t
YWNfYWRkcmVzcyhzdHJ1Y3QgbmV0X2RldmljZSAqbmRldiwgY29uc3QgdTggKm1hYykKIHsKLQlp
ZiAobWFjKSB7CisJaWYgKCFJU19FUlIobWFjKSkgewogCQlldGhlcl9hZGRyX2NvcHkobmRldi0+
ZGV2X2FkZHIsIG1hYyk7CiAJfSBlbHNlIHsKIAkJdTMyIG1haHIgPSByYXZiX3JlYWQobmRldiwg
TUFIUik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5j
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9zaF9ldGguYwppbmRleCBlMzNhZjM3Li40
ZDRiZTY2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5j
CisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3JlbmVzYXMvc2hfZXRoLmMKQEAgLTMxOTMsNyAr
MzE5Myw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2hfZXRoX3BsYXRfZGF0YSAqc2hfZXRoX3BhcnNlX2R0
KHN0cnVjdCBkZXZpY2UgKmRldikKIAlwZGF0YS0+cGh5X2ludGVyZmFjZSA9IHJldDsKIAogCW1h
Y19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJ
U19FUlIobWFjX2FkZHIpKQogCQltZW1jcHkocGRhdGEtPm1hY19hZGRyLCBtYWNfYWRkciwgRVRI
X0FMRU4pOwogCiAJcGRhdGEtPm5vX2V0aGVyX2xpbmsgPQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvc2Ftc3VuZy9zeGdiZS9zeGdiZV9wbGF0Zm9ybS5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvc2Ftc3VuZy9zeGdiZS9zeGdiZV9wbGF0Zm9ybS5jCmluZGV4IGZiZDAwY2IuLmQy
YmM5NDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NhbXN1bmcvc3hnYmUvc3hn
YmVfcGxhdGZvcm0uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zYW1zdW5nL3N4Z2JlL3N4
Z2JlX3BsYXRmb3JtLmMKQEAgLTEyNCw3ICsxMjQsNyBAQCBzdGF0aWMgaW50IHN4Z2JlX3BsYXRm
b3JtX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJfQogCiAJLyogR2V0IE1B
QyBhZGRyZXNzIGlmIGF2YWlsYWJsZSAoRFQpICovCi0JaWYgKG1hYykKKwlpZiAoIUlTX0VSUl9P
Ul9OVUxMKG1hYykpCiAJCWV0aGVyX2FkZHJfY29weShwcml2LT5kZXYtPmRldl9hZGRyLCBtYWMp
OwogCiAJLyogR2V0IHRoZSBUWC9SWCBJUlEgbnVtYmVycyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3NvY2lvbmV4dC9zbmlfYXZlLmMKaW5kZXggYmI2ZDVmYi4uNTFhN2I0OCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYworKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9zb2Npb25leHQvc25pX2F2ZS5jCkBAIC0xNTk5LDcgKzE1OTksNyBAQCBzdGF0
aWMgaW50IGF2ZV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCW5kZXYtPm1h
eF9tdHUgPSBBVkVfTUFYX0VUSEZSQU1FIC0gKEVUSF9ITEVOICsgRVRIX0ZDU19MRU4pOwogCiAJ
bWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWNfYWRkcikKKwlpZiAo
IUlTX0VSUihtYWNfYWRkcikpCiAJCWV0aGVyX2FkZHJfY29weShuZGV2LT5kZXZfYWRkciwgbWFj
X2FkZHIpOwogCiAJLyogaWYgdGhlIG1hYyBhZGRyZXNzIGlzIGludmFsaWQsIHVzZSByYW5kb20g
bWFjIGFkZHJlc3MgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3N0bWljcm8v
c3RtbWFjL3N0bW1hY19tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1h
Yy9zdG1tYWNfbWFpbi5jCmluZGV4IDVhYjI3MzMuLjU2NzhiODYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L3N0bWljcm8vc3RtbWFjL3N0bW1hY19tYWluLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvc3RtaWNyby9zdG1tYWMvc3RtbWFjX21haW4uYwpAQCAtNDI2Miw3ICs0
MjYyLDcgQEAgaW50IHN0bW1hY19kdnJfcHJvYmUoc3RydWN0IGRldmljZSAqZGV2aWNlLAogCXBy
aXYtPndvbF9pcnEgPSByZXMtPndvbF9pcnE7CiAJcHJpdi0+bHBpX2lycSA9IHJlcy0+bHBpX2ly
cTsKIAotCWlmIChyZXMtPm1hYykKKwlpZiAoIUlTX0VSUl9PUl9OVUxMKHJlcy0+bWFjKSkKIAkJ
bWVtY3B5KHByaXYtPmRldi0+ZGV2X2FkZHIsIHJlcy0+bWFjLCBFVEhfQUxFTik7CiAKIAlkZXZf
c2V0X2RydmRhdGEoZGV2aWNlLCBwcml2LT5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvdGkvY3Bzdy5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvdGkvY3Bzdy5jCmluZGV4
IGUzNzY4MDYuLmIxOGVlYjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nw
c3cuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC90aS9jcHN3LmMKQEAgLTIyMzIsNyArMjIz
Miw3IEBAIHN0YXRpYyBpbnQgY3Bzd19wcm9iZV9kdChzdHJ1Y3QgY3Bzd19wbGF0Zm9ybV9kYXRh
ICpkYXRhLAogCiBub19waHlfc2xhdmU6CiAJCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNz
KHNsYXZlX25vZGUpOwotCQlpZiAobWFjX2FkZHIpIHsKKwkJaWYgKCFJU19FUlIobWFjX2FkZHIp
KSB7CiAJCQltZW1jcHkoc2xhdmVfZGF0YS0+bWFjX2FkZHIsIG1hY19hZGRyLCBFVEhfQUxFTik7
CiAJCX0gZWxzZSB7CiAJCQlyZXQgPSB0aV9jbV9nZXRfbWFjaWQoJnBkZXYtPmRldiwgaSwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL25ldGNwX2NvcmUuYyBiL2RyaXZlcnMv
bmV0L2V0aGVybmV0L3RpL25ldGNwX2NvcmUuYwppbmRleCAwMWQ0Y2EzLi42NDI4NDM5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC90aS9uZXRjcF9jb3JlLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvdGkvbmV0Y3BfY29yZS5jCkBAIC0yMDM3LDcgKzIwMzcsNyBAQCBzdGF0
aWMgaW50IG5ldGNwX2NyZWF0ZV9pbnRlcmZhY2Uoc3RydWN0IG5ldGNwX2RldmljZSAqbmV0Y3Bf
ZGV2aWNlLAogCQlkZXZtX3JlbGVhc2VfbWVtX3JlZ2lvbihkZXYsIHJlcy5zdGFydCwgc2l6ZSk7
CiAJfSBlbHNlIHsKIAkJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3Mobm9kZV9pbnRlcmZh
Y2UpOwotCQlpZiAobWFjX2FkZHIpCisJCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJCWV0aGVy
X2FkZHJfY29weShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIpOwogCQllbHNlCiAJCQlldGhfcmFu
ZG9tX2FkZHIobmRldi0+ZGV2X2FkZHIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvd2l6bmV0L3c1MTAwLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC93aXpuZXQvdzUxMDAuYwpp
bmRleCBkOGJhNTEyLi5iMDA1MjkzMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
d2l6bmV0L3c1MTAwLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvd2l6bmV0L3c1MTAwLmMK
QEAgLTExNjQsNyArMTE2NCw3IEBAIGludCB3NTEwMF9wcm9iZShzdHJ1Y3QgZGV2aWNlICpkZXYs
IGNvbnN0IHN0cnVjdCB3NTEwMF9vcHMgKm9wcywKIAlJTklUX1dPUksoJnByaXYtPnNldHJ4X3dv
cmssIHc1MTAwX3NldHJ4X3dvcmspOwogCUlOSVRfV09SSygmcHJpdi0+cmVzdGFydF93b3JrLCB3
NTEwMF9yZXN0YXJ0X3dvcmspOwogCi0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSX09SX05V
TEwobWFjX2FkZHIpKQogCQltZW1jcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyLCBFVEhfQUxF
Tik7CiAJZWxzZQogCQlldGhfaHdfYWRkcl9yYW5kb20obmRldik7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC94aWxpbngvbGxfdGVtYWNfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQveGlsaW54L2xsX3RlbWFjX21haW4uYwppbmRleCA5ODUxOTkxLi5mMzg5YTgxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngvbGxfdGVtYWNfbWFpbi5jCisrKyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC9sbF90ZW1hY19tYWluLmMKQEAgLTEyNTIsNyAr
MTI1Miw3IEBAIHN0YXRpYyBpbnQgdGVtYWNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldikKIAlpZiAodGVtYWNfbnApIHsKIAkJLyogUmV0cmlldmUgdGhlIE1BQyBhZGRyZXNzICov
CiAJCWFkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3ModGVtYWNfbnApOwotCQlpZiAoIWFkZHIpIHsK
KwkJaWYgKElTX0VSUihhZGRyKSkgewogCQkJZGV2X2VycigmcGRldi0+ZGV2LCAiY291bGQgbm90
IGZpbmQgTUFDIGFkZHJlc3NcbiIpOwogCQkJcmV0dXJuIC1FTk9ERVY7CiAJCX0KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC94aWxpbnhfYXhpZW5ldF9tYWluLmMgYi9k
cml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngveGlsaW54X2F4aWVuZXRfbWFpbi5jCmluZGV4IDQw
NDFjNzUuLjEwOGZiYzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC94
aWxpbnhfYXhpZW5ldF9tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hp
bGlueF9heGllbmV0X21haW4uYwpAQCAtMTU5Niw3ICsxNTk2LDcgQEAgc3RhdGljIGludCBheGll
bmV0X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAKIAkvKiBSZXRyaWV2ZSB0
aGUgTUFDIGFkZHJlc3MgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2LT5k
ZXYub2Zfbm9kZSk7Ci0JaWYgKCFtYWNfYWRkcikgeworCWlmIChJU19FUlIobWFjX2FkZHIpKSB7
CiAJCWRldl9lcnIoJnBkZXYtPmRldiwgImNvdWxkIG5vdCBmaW5kIE1BQyBhZGRyZXNzXG4iKTsK
IAkJZ290byBmcmVlX25ldGRldjsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC94aWxpbngveGlsaW54X2VtYWNsaXRlLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngv
eGlsaW54X2VtYWNsaXRlLmMKaW5kZXggZmMzODY5Mi4uNjkxMTcwNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9lbWFjbGl0ZS5jCisrKyBiL2RyaXZlcnMv
bmV0L2V0aGVybmV0L3hpbGlueC94aWxpbnhfZW1hY2xpdGUuYwpAQCAtMTE2NSw3ICsxMTY1LDcg
QEAgc3RhdGljIGludCB4ZW1hY2xpdGVfb2ZfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
b2ZkZXYpCiAJbHAtPnJ4X3BpbmdfcG9uZyA9IGdldF9ib29sKG9mZGV2LCAieGxueCxyeC1waW5n
LXBvbmciKTsKIAltYWNfYWRkcmVzcyA9IG9mX2dldF9tYWNfYWRkcmVzcyhvZmRldi0+ZGV2Lm9m
X25vZGUpOwogCi0JaWYgKG1hY19hZGRyZXNzKSB7CisJaWYgKCFJU19FUlIobWFjX2FkZHJlc3Mp
KSB7CiAJCS8qIFNldCB0aGUgTUFDIGFkZHJlc3MuICovCiAJCW1lbWNweShuZGV2LT5kZXZfYWRk
ciwgbWFjX2FkZHJlc3MsIEVUSF9BTEVOKTsKIAl9IGVsc2UgewpkaWZmIC0tZ2l0IGEvbmV0L2V0
aGVybmV0L2V0aC5jIGIvbmV0L2V0aGVybmV0L2V0aC5jCmluZGV4IGZkZGNlZTMuLjRiMmIyMjIg
MTAwNjQ0Ci0tLSBhL25ldC9ldGhlcm5ldC9ldGguYworKysgYi9uZXQvZXRoZXJuZXQvZXRoLmMK
QEAgLTU2MCw3ICs1NjAsNyBAQCBpbnQgZXRoX3BsYXRmb3JtX2dldF9tYWNfYWRkcmVzcyhzdHJ1
Y3QgZGV2aWNlICpkZXYsIHU4ICptYWNfYWRkcikKIAlhZGRyID0gTlVMTDsKIAlpZiAoZHApCiAJ
CWFkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MoZHApOwotCWlmICghYWRkcikKKwlpZiAoSVNfRVJS
X09SX05VTEwoYWRkcikpCiAJCWFkZHIgPSBhcmNoX2dldF9wbGF0Zm9ybV9tYWNfYWRkcmVzcygp
OwogCiAJaWYgKCFhZGRyKQotLSAKMS45LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRldmVsIG1haWxpbmcgbGlzdApkZXZlbEBsaW51eGRyaXZlcnBy
b2plY3Qub3JnCmh0dHA6Ly9kcml2ZXJkZXYubGludXhkcml2ZXJwcm9qZWN0Lm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaXZlcmRldi1kZXZlbAo=
