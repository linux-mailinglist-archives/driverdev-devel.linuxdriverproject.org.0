Return-Path: <driverdev-devel-bounces@linuxdriverproject.org>
X-Original-To: lists+driverdev-devel@lfdr.de
Delivered-To: lists+driverdev-devel@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id A606323C70A
	for <lists+driverdev-devel@lfdr.de>; Wed,  5 Aug 2020 09:39:35 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id D581C8765E;
	Wed,  5 Aug 2020 07:39:33 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
X-Amavis-Alert: BAD HEADER SECTION, Duplicate header field: "References"
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xmiJ0Clheqq2; Wed,  5 Aug 2020 07:39:33 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by whitealder.osuosl.org (Postfix) with ESMTP id ECBC3876E3;
	Wed,  5 Aug 2020 07:39:30 +0000 (UTC)
X-Original-To: devel@linuxdriverproject.org
Delivered-To: driverdev-devel@osuosl.org
Received: from silver.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by ash.osuosl.org (Postfix) with ESMTP id 06F101BF38B
 for <devel@linuxdriverproject.org>; Wed,  5 Aug 2020 07:39:29 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by silver.osuosl.org (Postfix) with ESMTP id EA5D520465
 for <devel@linuxdriverproject.org>; Wed,  5 Aug 2020 07:39:28 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
X-Amavis-Alert: BAD HEADER SECTION, Duplicate header field: "References"
Received: from silver.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id spDVKg6tcJ30 for <devel@linuxdriverproject.org>;
 Wed,  5 Aug 2020 07:39:27 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pj1-f65.google.com (mail-pj1-f65.google.com
 [209.85.216.65])
 by silver.osuosl.org (Postfix) with ESMTPS id 15A5E2044E
 for <devel@driverdev.osuosl.org>; Wed,  5 Aug 2020 07:39:27 +0000 (UTC)
Received: by mail-pj1-f65.google.com with SMTP id i92so2764729pje.0
 for <devel@driverdev.osuosl.org>; Wed, 05 Aug 2020 00:39:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=EAu4Xv5+GEzBUioolMyaF0uukE3fe4YKQVPhRE7ah24=;
 b=nGAmX3YexnKwR0dre7CSxOmgRr45TO/L2YtUfAFAFwj/0mN5ymzzqgrHgyktLPeJnK
 sTNqI8DYE3op7kX+WVRV7iLs6gWkcKm19DmZDFXlnR4v0p1+YfW05EWbSOWMsrKmYHkQ
 U3c91bTajpXfmZUicwHDlMzD1zpXtKs87lo/bSHTChseMOqc8AIKc7KdwnTw+cfW7FXt
 VU01u7Ci+349Qq5L1dr5szLg6tJxsVvpw5dQmtzuiA/pEHvW4eFsyivNdDPjJjusrTQx
 TGuFZHE/4L1CmSalrxCTV0dyD5NlY92imgMy71xaQGOa1sqLMrm/JEKi26bBqWG24oLy
 I93A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=EAu4Xv5+GEzBUioolMyaF0uukE3fe4YKQVPhRE7ah24=;
 b=XWvahZQjDpn+vZJ8pigLnRQkxToOAYS3gwhLF9Edo0V1kbt/1a4WDvcDosdvUebpTF
 QYTU5W91MXrs6jNuALhZaGSJVdSLUfCX9kBj26yUT6kiWCURDVbIgpXdcXTqcHtwcI1B
 HMCnr1HwWW3R2BXJczUbFtB6OOv3x+h9uP95L3SkYlgjSgFBaYyK3J8Sqo8oC6LjUlIB
 IbL6I4sq7ghEwefuSMHepFvaY1kZEY1rEcGeb16w3Udc9QFk0VqSyjkOvtj4TcEMYrpJ
 i/KVb6MYWzdteNAI+8SVx4A6C3+beR660HJzXSNr3K3RDCwTFNU8QQNI1Ct8sH0soYhW
 zshw==
X-Gm-Message-State: AOAM53046pyaMU+f9UajEO6YzNX0TBWesBpkVFfHpMfM4/57WvqV0Ma6
 VUkY9hM03WzpS2Q3h+d7ytM=
X-Google-Smtp-Source: ABdhPJxQKMiQqG88q+KKAXhHtCViMVeE+F+k2Qu6X+edHLHitZVnuk83bQuvyhV+2FvktxRcg/2Qqw==
X-Received: by 2002:a17:902:6904:: with SMTP id
 j4mr1973184plk.198.1596613166499; 
 Wed, 05 Aug 2020 00:39:26 -0700 (PDT)
Received: from yangdongdo-OptiPlex-9010.mioffice.cn ([43.224.245.179])
 by smtp.gmail.com with ESMTPSA id r28sm1972871pfg.158.2020.08.05.00.39.22
 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 05 Aug 2020 00:39:25 -0700 (PDT)
From: Dongdong Yang <contribute.kernel@gmail.com>
To: gregkh@linuxfoundation.org, rjw@rjwysocki.net, viresh.kumar@linaro.org,
 mingo@redhat.com, peterz@infradead.org, juri.lelli@redhat.com,
 vincent.guittot@linaro.org, dietmar.eggemann@arm.com, rostedt@goodmis.org,
 bsegall@google.com, mgorman@suse.de
Subject: [PATCH v5] sched: Provide USF for the portable equipment.
Date: Wed,  5 Aug 2020 15:36:21 +0800
Message-Id: <3bbd9a487176a05588e33ff660d4e58efa1fdb10.1596612536.git.yangdongdong@xiaomi.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <cover.1596612536.git.yangdongdong@xiaomi.com>
References: <cover.1596612536.git.yangdongdong@xiaomi.com>
In-Reply-To: <cover.1596612536.git.yangdongdong@xiaomi.com>
References: <cover.1596612536.git.yangdongdong@xiaomi.com>
MIME-Version: 1.0
X-BeenThere: driverdev-devel@linuxdriverproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Driver Project Developer List
 <driverdev-devel.linuxdriverproject.org>
List-Unsubscribe: <http://driverdev.linuxdriverproject.org/mailman/options/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=unsubscribe>
List-Archive: <http://driverdev.linuxdriverproject.org/pipermail/driverdev-devel/>
List-Post: <mailto:driverdev-devel@linuxdriverproject.org>
List-Help: <mailto:driverdev-devel-request@linuxdriverproject.org?subject=help>
List-Subscribe: <http://driverdev.linuxdriverproject.org/mailman/listinfo/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=subscribe>
Cc: devel@driverdev.osuosl.org, linux-pm@vger.kernel.org,
 linux-kernel@vger.kernel.org, yangdongdong@xiaomi.com, yanziily@xiaomi.com,
 rocking@linux.alibaba.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: driverdev-devel-bounces@linuxdriverproject.org
Sender: "devel" <driverdev-devel-bounces@linuxdriverproject.org>

RnJvbTogRG9uZ2RvbmcgWWFuZyA8eWFuZ2Rvbmdkb25nQHhpYW9taS5jb20+CgpUaGUgcG93ZXIg
Y29uc3VtcHRpb24gYW5kIFVJIHJlc3BvbnNlIGFyZSBtb3JlIGNhcmVkIGZvciBieSB0aGUgcG9y
dGFibGUKZXF1aXBtZW50wqB1c2Vycy4gVVNGKFVzZXIgU2Vuc2l0aXZlIEZlZWRiYWNrIGZhY3Rv
cikgYXV4aWxpYXJ5IGNwdWZyZXEKZ292ZXJub3IgaXMgcHJvdmlkaW5nIG1vcmUgdXRpbCBhZGp1
c3RtZW50IHNldHRpbmdzIHRvIHRoZSBoaWdoIGxldmVsCmJ5IHNjZW5hcmlvIGlkZW50aWZpY2F0
aW9uLgoKRnJvbSB0aGUgdmlldyBvZiBwb3J0YWJsZSBlcXVpcG1lbnQsIHNjcmVlbiBvZmYgc3Rh
dHVzIHVzdWFsbHkgc3RhbmRzCmZvciBubyByZXF1ZXN0IGZyb20gdGhlIHVzZXIsIGhvd2V2ZXIs
IHRoZSBrZXJuZWwgaXMgc3RpbGwgZXhwZWN0ZWQgdG8Kbm90aWZ5IHRoZSB1c2VyIGluIHRpbWUg
b24gbW9kZW0sIG5ldHdvcmsgb3IgcG93ZXJrZXkgZXZlbnRzIG9jY3VyLiBJbgpzb21lIHNjZW5h
cmlvcywgc3VjaCBhcyBsaXN0ZW5pbmcgdG8gbXVzaWMsIGxvdyBwb3dlciBwcm9jZXNzb3JzLCBz
dWNoCmFzIERTUCwgdGFrZSBtb3JlIGFjdGlvbnMgYW5kIENQVSBsb2FkIHJlcXVpcmVtZW50cyBj
dXQgZG93bi7CoCBJdCB3b3VsZApicmluZyBtb3JlIHBvd2VyIGNvbnN1bXB0aW9uIGJlbmVmaXQg
aWYgaGlnaCBsZXZlbCBoYXZlIGludGVyZmFjZXMgdG8KYWRqdXN0IHV0aWxzIGFjY29yZGluZyB0
byB0aGUgY3VycmVudCBzY2VuYXJpbyBhbmQgbG9hZC4KCkluIGFkZGl0aW9uLCB0aGUgcG9ydGFi
bGUgZXF1aXBtZW50IHVzZXIgdXN1YWxseSBoZWF2aWx5IGludGVyYWN0IHdpdGgKZGV2aWNlcyBi
eSB0b3VjaCwgYW5kIG90aGVyIHBlcmlwaGVyYWxzLiBUaGUgYm9vc3QgcHJlZW1wdGl2ZSBjb3Vu
dHMKYXJlIG1hcmtpbmcgdGhlIGxvYWQgcmVxdWlyZW1lbnQgdXJnZW50LCB2aWNlIHZlcnNhLiBJ
ZiBzdWNoIGZlZWRiYWNrCmZhY3RvciBjb3VsZCBiZSBzZXQgdG8gaGlnaCBsZXZlbCBhY2NvcmRp
bmcgdG8gdGhlIHNjZW5hcmlvLCBpdCB3b3VsZApjb250cmlidXRlIHRvIHRoZSBwb3dlciBjb25z
dW1wdGlvbiBhbmQgVUkgcmVzcG9uc2UuCgpJZiBubyBVU0Ygc3lzZnMgaW5vZGUgaXMgc2V0LCBh
bmQgbm8gc2NyZWVuIG9uIG9yIG9mZiBldmVudCwKYWRqdXN0X3ByZWRfZGVtYW5kIHNoYWxsIG5v
dCBiZSBpbnZva2VkLiBPbmNlIHVwX2wwX3IgZG93bl9yIG9yIG5vbl91eF9yCmJlIHNldCwgYWRq
dXN0X3ByZWRfZGVtYW5kIHNoYWxsIGJlIGNhbGxlZCBiYWNrIHRvIHVwZGF0ZSBzZXR0aW5ncwph
Y2NvcmRpbmcgdG8gaGlnaCBsZXZlbCBzY2VuYXJpbyBpZGVudGlmaWNhdGlvbi4KCldlIGNhbiBn
ZXQgYWJvdXQgMTclIG1lYW4gcG93ZXIgY29uc3VtcHRpb24gc2F2ZSBhdCBsaXN0ZW5pbmcgdG8g
bXVzaWMKd2l0aCBzcGVha2VyIG9uICJzY3JlZW4gb2ZmIiBzY2VuYXJpbywgYXMgYmVsb3cgc3Rh
dGlzdGljYWwgZGF0YSBmcm9tCjc3NjYgWGlhb01pIGRldmljZXMgZm9yIHR3byB3ZWVrcyB3aXRo
IG5vbl91eF9yIGJlIHNldDoKCiAgICAgICAgZGF5MSAgICAgICAgIGRheTIgICAgICAgICBkYXkz
ICAgICAgICAgZGF5NApjb3VudCAgIDc3NjYuMDAwMDAwICA3NzY2LjAwMDAwMCAgNzc2Ni4wMDAw
MDAgIDc3NjYuMDAwMDAwCm1lYW4gICAgODguMDM1NTI1ICAgIDg1LjUwMDI4MiAgICA4My44Mjkz
MDUgICAgODYuMDU0OTk3CnN0ZCAgICAgMTExLjA0OTk4MCAgIDEwOC4yNTg4MzQgICAxMDcuNTYy
NTgzICAgMTA4LjU1ODI0MAptaW4gICAgIDAuMDk5MDAwICAgICAwLjAzNzAwMCAgICAgMC4wNjcw
MDAgICAgIDAuMDQ1MDAwCjI1JSAgICAgMzQuNzY1NTAwICAgIDM0LjAyMTc1MCAgICAzNC4xMDE1
MDAgICAgMzQuNDIzMDAwCjUwJSAgICAgNTQuOTUwMDAwICAgIDU1LjI4NjUwMCAgICA1NC4xODk1
MDAgICAgNTQuMjQ4NTAwCjc1JSAgICAgOTUuOTU0MDAwICAgIDkzLjk0MjAwMCAgICA5MS43Mzgw
MDAgICAgOTQuMDU5MjUwMAo4MCUgICAgIDExNC42NzUwMDAgICAxMDcuNDMwMDAwICAgMTA2LjM3
ODAwMCAgIDEwOC42NzMwMDAKODUlICAgICAxMzcuODUxMDAwICAgMTI5LjUxMTAwMCAgIDEyNy4x
NTY1MDAgICAxMzEuNzUwNzUwCjkwJSAgICAgMTc5LjY2OTAwMCAgIDE3MC4yMDg1MDAgICAxNjQu
MDI3MDAwICAgMTcyLjM0ODAwMAo5NSUgICAgIDI3Mi4zOTUwMDAgICAyNTcuODQ1NTAwICAgMjQ3
Ljc1MDUwMCAgIDI2My4yNzU3NTAKOTglICAgICAzOTkuMDM0NTAwICAgNDEyLjE3MDQwMCAgIDM5
MS40ODQwMDAgICA0MDIuODM1NjAwCgogICAgICAgIGRheTUgICAgICAgICBkYXk2ICAgICAgICBk
YXk3ICAgICAgICAgZGF5OApjb3VudCAgIDc3NjYuMDAwMDAwICA3NzY2LjAwMDAwICA3NzY2LjAw
MDAwMCAgNzc2Ni4wMDAwMDAKbWVhbiAgICA4Mi41MzI2NzcgICAgNzkuMjE5MjMgICAgNzcuNjEx
MzgwICAgIDgxLjA3NTA4MQpzdGQgICAgIDEwNC44NzAwNzkgICAxMDEuMzQ4MTkgICAxMDMuMTQw
MDM3ICAgOTcuNTA2MjIxCm1pbiAgICAgMC4wNTEwMDAgICAgIDAuMDI5MDAgICAgIDAuMDA3MDAw
ICAgICAwLjA2ODAwMAoyNSUgICAgIDMyLjg3MzAwMCAgICAzMy40NDQwMCAgICAzMS45NjU1MDAg
ICAgMzMuODYzNTAwCjUwJSAgICAgNTIuMTgwNTAwICAgIDUxLjU2NTUwICAgIDUwLjgwNjUwMCAg
ICA1My4wODAwMDAKNzUlICAgICA5MC45MDU3NTAgICAgODYuODI2MjUgICAgODMuODU5MjUwICAg
IDg5Ljk3MzAwMAo4MCUgICAgIDEwNS40NTUwMDAgICA5OS42NDcwMCAgICA5Ny4yNzEwMDAgICAg
MTA0LjIyNTAwMAo4NSUgICAgIDEyOC4zMDAwMDAgICAxMTguNDc4MjUgICAxMTYuNTcwMjUwICAg
MTI2LjY0ODI1MAo5MCUgICAgIDE2Ni42NDc1MDAgICAxNDkuMTgwMDAgICAxNTAuNjQ5NTAwICAg
MTYxLjA4NzAwMAo5NSUgICAgIDI0Ny4yMDg1MDAgICAyMjQuMzYwNTAgICAyMjYuMzgwMDAwICAg
MjQ1LjI5MTI1MAo5OCUgICAgIDM5My4wMDIwMDAgICAzNDcuOTIwNjAgICAzNjkuNzkxODAwICAg
Mzc4Ljc3ODYwMAoKICAgICAgICBkYXk5ICAgICAgICAgZGF5MTAgICAgICAgIGRheTExICAgICAg
ICBkYXkxMgpjb3VudCAgIDc3NjYuMDAwMDAwICA3NzY2LjAwMDAwMCAgNzc2Ni4wMDAwMDAgIDc3
NjYuMDAwMDAwCm1lYW4gICAgNzkuOTg5MTcwICAgIDgzLjg1OTQxNyAgICA3OC4wMzI5MzAgICAg
NzcuMDYwNTQyCnN0ZCAgICAgMTA0LjIyNjEyMiAgIDEwOC44OTMwNDMgICAxMDIuNTYxNzE1ICAg
OTkuODQ0Mjc2Cm1pbiAgICAgMC4xMTgwMDAgICAgIDAuMDE3MDAwICAgICAwLjAyODAwMCAgICAg
MC4wMzkwMDAKMjUlICAgICAzMi4wNTYyNTAgICAgMzMuNDU0NTAwICAgIDMxLjE3NjI1MCAgICAz
MC44OTc3NTAKNTAlICAgICA1MS41MDYwMDAgICAgNTQuMDU2MDAwICAgIDQ4Ljk2OTUwMCAgICA0
OS4wNjkwMDAKNzUlICAgICA4OC41MTM1MDAgICAgOTIuOTUzNTAwICAgIDgzLjUwNjc1MCAgICA4
NC4wOTYwMDAKODAlICAgICAxMDIuODc2MDAwICAgMTA3Ljg0NTAwMCAgIDk3LjcxNzAwMCAgICA5
OC4wNzMwMDAKODUlICAgICAxMjQuMzYzMDAwICAgMTI4LjI4ODAwMCAgIDExOC4zNjY1MDAgICAx
MTYuODY5MjUwCjkwJSAgICAgMTYwLjU1NzAwMCAgIDE2Ny4wODQwMDAgICAxNTQuMzQyNTAwICAg
MTQ4LjE4NzUwMAo5NSUgICAgIDIzMS4xNDkwMDAgICAyNDIuOTI1NzUwICAgMjM2Ljc1OTAwMCAg
IDIyOC4xMzEyNTAKOTglICAgICAzNjcuMjA2NjAwICAgMzg4LjYxOTEwMCAgIDM4NS4yNjkxMDAg
ICAzNzYuNTQxNjAwCgogICAgICAgIGRheTEzICAgICAgICBkYXkxNApjb3VudCAgIDc3NjYuMDAw
MDAwICA3NzY2LjAwMDAwMAptZWFuICAgIDc1LjUyODAzNiAgICA3My43MDI4NzgKc3RkICAgICA5
MC43NTA1OTQgICAgODYuNzk2MDE2Cm1pbiAgICAgMC4wNjYwMDAgICAgIDAuMDU0MDAwCjI1JSAg
ICAgMzEuMTcwNTAwICAgIDMxLjYwODUwMAo1MCUgICAgIDQ4Ljc1ODUwMCAgICA0OS4yMTUwMDAK
NzUlICAgICA4NC41MjI3NTAgICAgODMuMDUzMDAwCjgwJSAgICAgOTcuODc5MDAwICAgIDk0Ljg3
NTAwMAo4NSUgICAgIDExNi42ODAyNTAgICAxMTMuNTczNzUwCjkwJSAgICAgMTQ5LjA4MzUwMCAg
IDE0NC4wODk1MDAKOTUlICAgICAyMjYuMTc3NzUwICAgMjExLjQ4ODc1MAo5OCUgICAgIDM0Ny4w
MTExMDAgICAzMzEuMzE3MTAwCgpTaWduZWQtb2ZmLWJ5OiBEb25nZG9uZyBZYW5nIDx5YW5nZG9u
Z2RvbmdAeGlhb21pLmNvbT4KQ28tZGV2ZWxvcGVkLWJ5OiBKdW4gVGFvIDx0YW9qdW5AeGlhb21p
LmNvbT4KQ28tZGV2ZWxvcGVkLWJ5OiBRaXd1IEh1YW5nIDxodWFuZ3Fpd3VAeGlhb21pLmNvbT4K
Q28tZGV2ZWxvcGVkLWJ5OiBQZW5nIFdhbmcgPHJvY2tpbmdAbGludXguYWxpYmFiYS5jb20+ClNp
Z25lZC1vZmYtYnk6IERvbmdkb25nIFlhbmcgPHlhbmdkb25nZG9uZ0B4aWFvbWkuY29tPgotLS0K
IERvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMtZGV2aWNlcy1zeXN0ZW0tY3B1IHwgIDMx
ICsrCiBkcml2ZXJzL2NwdWZyZXEvS2NvbmZpZyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
ICAxMSArCiBrZXJuZWwvc2NoZWQvTWFrZWZpbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB8ICAgMSArCiBrZXJuZWwvc2NoZWQvY3B1ZnJlcV9zY2hlZHV0aWwuYyAgICAgICAgICAgICAg
ICAgICB8ICAgNSArCiBrZXJuZWwvc2NoZWQvdXNmLmMgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB8IDMxNCArKysrKysrKysrKysrKysrKysrKysKIDUgZmlsZXMgY2hhbmdlZCwgMzYy
IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrZXJuZWwvc2NoZWQvdXNmLmMKCmRp
ZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL0FCSS90ZXN0aW5nL3N5c2ZzLWRldmljZXMtc3lzdGVt
LWNwdSBiL0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMtZGV2aWNlcy1zeXN0ZW0tY3B1
CmluZGV4IGI1NTVkZjguLmU5YTRjZmQgMTAwNjQ0Ci0tLSBhL0RvY3VtZW50YXRpb24vQUJJL3Rl
c3Rpbmcvc3lzZnMtZGV2aWNlcy1zeXN0ZW0tY3B1CisrKyBiL0RvY3VtZW50YXRpb24vQUJJL3Rl
c3Rpbmcvc3lzZnMtZGV2aWNlcy1zeXN0ZW0tY3B1CkBAIC02MTQsMyArNjE0LDM0IEBAIERlc2Ny
aXB0aW9uOglTUFVSUiB0aWNrcyBmb3IgY3B1WCB3aGVuIGl0IHdhcyBpZGxlLgogCiAJCVRoaXMg
c3lzZnMgaW50ZXJmYWNlIGV4cG9zZXMgdGhlIG51bWJlciBvZiBTUFVSUiB0aWNrcwogCQlmb3Ig
Y3B1WCB3aGVuIGl0IHdhcyBpZGxlLgorCitXaGF0OgkJL3N5cy9kZXZpY2VzL3N5c3RlbS9jcHUv
c2NoZWRfdXNmCisJCS9zeXMvZGV2aWNlcy9zeXN0ZW0vY3B1L3NjaGVkX3VzZi9ub25fdXhfcgor
CQkvc3lzL2RldmljZXMvc3lzdGVtL2NwdS9zY2hlZF91c2YvdXBfbDBfcgorCQkvc3lzL2Rldmlj
ZXMvc3lzdGVtL2NwdS9zY2hlZF91c2YvZG93bl9yCitEYXRlOgkJQXVnIDIwMjAKK0NvbnRhY3Q6
CUxpbnV4IGtlcm5lbCBtYWlsaW5nIGxpc3QgPGxpbnV4LWtlcm5lbEB2Z2VyLmtlcm5lbC5vcmc+
CitEZXNjcmlwdGlvbjoJVXNlciBTZW5zaXRpdmUgRmVlZGJhY2sgZmFjdG9yIGF1eGlsaWFyeSBz
Y2hlZHVsaW5nIHdoaWNoCisJCWlzIHByb3ZpZGluZyBtb3JlIHV0aWwgYWRqdXN0bWVudCBzZXR0
aW5ncyBiYXNlZCBvbiBzY2hlZHV0aWwKKwkJZ292ZXJub3IgdG8gdGhlIGhpZ2ggbGV2ZWwgYnkg
c2NlbmFyaW8gaWRlbnRpZmljYXRpb24gb24KKwkJcG9ydGFibGUgZXF1aXBtZW50LgorCQlub25f
dXhfcjoKKwkJCVRoZSBkZWZhdWx0IHZhbHVlIGlzIDAuCVRoZSByYW5nZSBpcyBbLTEwMCAsIDBd
LgorCQkJSWYgaXQgZmFsbHMgaW50byBbLTUwLCAwKSwgdGhlIGhhbGYgb2YgdXRpbHMsIHdoaWNo
CisJCQljYWxjdWxhdGVzIGNwdWZyZXEsIHNoYWxsIGJlIGN1dCBkb3duIG9uIHNjcmVlbiBvZmYu
CisJCQlJZiBpdCBmYWxscyBpbnRvIFstMTAwLCAtNTApLCBvbmx5IGEgcXVhcnRlciBvZiB1dGls
cworCQkJYXJlIGxlZnQgdG8gY29udGludWUgdG8gY2FsY3VsYXRlIGNwdWZyZXEgb24gc2NyZWVu
IG9mZi4KKworCQl1cF9sMF9yOgorCQkJVGhlIGRlZmF1bHQgdmFsdWUgaXMgMC4JVGhlIHJhbmdl
IGlzIFswICwgMTAwXS4KKwkJCUlmIGl0IGZhbGxzIGludG8gKDAsIDUwXSwgYSBxdWFydGVyIG9m
IGV4dHJhIHV0aWxzLAorCQkJd2hpY2ggY2FsY3VsYXRlIGNwdWZyZXEsIHNoYWxsIGJlIGFkZGVk
IG9uIHNjcmVlbiBvbi4KKwkJCUlmIGl0IGZhbGxzIGludG8gKDUwLCAxMDBdLCB0aGUgaGFsZiBv
ZiBleHRyYSB1dGlscyBhcmUKKwkJCWFkZGVkIHRvIGNvbnRpbnVlIHRvIGNhbGN1bGF0ZSBjcHVm
cmVxIG9uIHNjcmVlbiBvbi4KKworCQlkb3duX3I6CisJCQlUaGUgZGVmYXVsdCB2YWx1ZSBpcyAw
LglUaGUgcmFuZ2UgaXMgWy0xMDAgLCAwXS4KKwkJCUlmIGl0IGZhbGxzIGludG8gWy01MCwgMCks
IHRoZSBoYWxmIG9mIHV0aWxzLCB3aGljaAorCQkJY2FsY3VsYXRlIGNwdWZyZXEsIHNoYWxsIGJl
ICBjdXQgZG93biBvbiBzY3JlZW4gb24uCisJCQlJZiBpdCBmYWxscyBpbnRvIFstMTAwLCAtNTAp
LCBvbmx5IGEgcXVhcnRlciBvZiB1dGlscworCQkJYXJlIGxlZnQgdG8gY29udGludWUgdG8gY2Fs
Y3VsYXRlIGNwdWZyZXEgb24gc2NyZWVuIG9uLgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9jcHVmcmVx
L0tjb25maWcgYi9kcml2ZXJzL2NwdWZyZXEvS2NvbmZpZwppbmRleCBlOTE3NTAxLi5hMjFjNmFk
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2NwdWZyZXEvS2NvbmZpZworKysgYi9kcml2ZXJzL2NwdWZy
ZXEvS2NvbmZpZwpAQCAtMjI0LDYgKzIyNCwxNyBAQCBjb25maWcgQ1BVRlJFUV9EVF9QTEFUREVW
CiAKIAkgIElmIGluIGRvdWJ0LCBzYXkgTi4KIAorY29uZmlnIFNDSEVEX1VTRgorCWJvb2wgIlVz
ZXIgU2Vuc2l0aXZlIEZhY3RvcnMgZm9yIFNjaGVkdWxlciIKKwlkZXBlbmRzIG9uIENQVV9GUkVR
X0dPVl9TQ0hFRFVUSUwgJiYgRkIKKwloZWxwCisJICBTZWxlY3QgdGhpcyBvcHRpb24gdG8gZW5h
YmxlIHRoZSBhZGp1c3RtZW50IG9uIHRoZSBjcHVmcmVxIHdpdGgKKwkgIHRoZSB1c2VyIHNlbnNp
dGl2ZSBmYWN0b3JzIG9uIHNjaGVkdWxlLiBJdCBpcyBzcGVjaWFsIGZvciBtb2JpbGUKKwkgIGRl
dmljZXMgd2hpY2ggbW9yZSBwb3dlciBjYXJlIGFuZCBxdWljayByZXNwb25zZSByZXF1aXJlbWVu
dCBvbgorCSAgc2NyZWVuIG9uLgorCisJICBJZiB1bnN1cmUsIHNheSBOLgorCiBpZiBYODYKIHNv
dXJjZSAiZHJpdmVycy9jcHVmcmVxL0tjb25maWcueDg2IgogZW5kaWYKZGlmZiAtLWdpdCBhL2tl
cm5lbC9zY2hlZC9NYWtlZmlsZSBiL2tlcm5lbC9zY2hlZC9NYWtlZmlsZQppbmRleCA1ZmM5Yzli
Li41OGEwZTdiIDEwMDY0NAotLS0gYS9rZXJuZWwvc2NoZWQvTWFrZWZpbGUKKysrIGIva2VybmVs
L3NjaGVkL01ha2VmaWxlCkBAIC0zNiwzICszNiw0IEBAIG9iai0kKENPTkZJR19DUFVfRlJFUV9H
T1ZfU0NIRURVVElMKSArPSBjcHVmcmVxX3NjaGVkdXRpbC5vCiBvYmotJChDT05GSUdfTUVNQkFS
UklFUikgKz0gbWVtYmFycmllci5vCiBvYmotJChDT05GSUdfQ1BVX0lTT0xBVElPTikgKz0gaXNv
bGF0aW9uLm8KIG9iai0kKENPTkZJR19QU0kpICs9IHBzaS5vCitvYmotJChDT05GSUdfU0NIRURf
VVNGKSArPSB1c2YubwpkaWZmIC0tZ2l0IGEva2VybmVsL3NjaGVkL2NwdWZyZXFfc2NoZWR1dGls
LmMgYi9rZXJuZWwvc2NoZWQvY3B1ZnJlcV9zY2hlZHV0aWwuYwppbmRleCA3ZmJhZWUyLi42Zjlj
YjZjIDEwMDY0NAotLS0gYS9rZXJuZWwvc2NoZWQvY3B1ZnJlcV9zY2hlZHV0aWwuYworKysgYi9r
ZXJuZWwvc2NoZWQvY3B1ZnJlcV9zY2hlZHV0aWwuYwpAQCAtMjg5LDEyICsyODksMTcgQEAgdW5z
aWduZWQgbG9uZyBzY2hlZHV0aWxfY3B1X3V0aWwoaW50IGNwdSwgdW5zaWduZWQgbG9uZyB1dGls
X2NmcywKIAlyZXR1cm4gbWluKG1heCwgdXRpbCk7CiB9CiAKK3ZvaWQgKCphZGp1c3RfcHJlZF9k
ZW1hbmRfcCkoaW50IGNwdWlkLCB1bnNpZ25lZCBsb25nICp1dGlsLAorCQkJICAgICBzdHJ1Y3Qg
cnEgKnJxKSA9IE5VTEw7CisKIHN0YXRpYyB1bnNpZ25lZCBsb25nIHN1Z292X2dldF91dGlsKHN0
cnVjdCBzdWdvdl9jcHUgKnNnX2NwdSkKIHsKIAlzdHJ1Y3QgcnEgKnJxID0gY3B1X3JxKHNnX2Nw
dS0+Y3B1KTsKIAl1bnNpZ25lZCBsb25nIHV0aWwgPSBjcHVfdXRpbF9jZnMocnEpOwogCXVuc2ln
bmVkIGxvbmcgbWF4ID0gYXJjaF9zY2FsZV9jcHVfY2FwYWNpdHkoc2dfY3B1LT5jcHUpOwogCisJ
aWYgKHVubGlrZWx5KGFkanVzdF9wcmVkX2RlbWFuZF9wKSkKKwkJYWRqdXN0X3ByZWRfZGVtYW5k
X3Aoc2dfY3B1LT5jcHUsICZ1dGlsLCBycSk7CiAJc2dfY3B1LT5tYXggPSBtYXg7CiAJc2dfY3B1
LT5id19kbCA9IGNwdV9id19kbChycSk7CiAKZGlmZiAtLWdpdCBhL2tlcm5lbC9zY2hlZC91c2Yu
YyBiL2tlcm5lbC9zY2hlZC91c2YuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
Li5mMzE4M2YxCi0tLSAvZGV2L251bGwKKysrIGIva2VybmVsL3NjaGVkL3VzZi5jCkBAIC0wLDAg
KzEsMzE0IEBACisvKgorICogQ29weXJpZ2h0IChDKSAyMDIwIFhpYW9NaSBJbmMuCisgKiBBdXRo
b3I6IFlhbmcgRG9uZ2RvbmcgPHlhbmdkb25nZG9uZ0B4aWFvbWkuY29tPgorICogVGhpcyBwcm9n
cmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2Rp
ZnkKKyAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vu
c2UgdmVyc2lvbiAyIGFzCisgKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRh
dGlvbi4KKyAqCisgKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhh
dCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91
dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklU
TkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuCisgKiBTZWUgaHR0cDovL3d3dy5nbnUub3Jn
L2xpY2Vuc2VzL2dwbC0yLjAuaHRtbCBmb3IgbW9yZSBkZXRhaWxzLgorICovCisKKyNpbmNsdWRl
IDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9pbml0Lmg+CisjaW5jbHVkZSA8bGlu
dXgvcGxhdGZvcm1fZGV2aWNlLmg+CisjaW5jbHVkZSA8bGludXgva3RocmVhZC5oPgorI2luY2x1
ZGUgPGxpbnV4L2NwdS5oPgorI2luY2x1ZGUgPGxpbnV4L3N5c2ZzLmg+CisjaW5jbHVkZSA8bGlu
dXgva3RocmVhZC5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4
L2tlcm5lbC5oPgorI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KKyNpbmNsdWRlIDxsaW51eC9rYWxs
c3ltcy5oPgorI2luY2x1ZGUgPGxpbnV4L2ZiLmg+CisjaW5jbHVkZSA8bGludXgvbm90aWZpZXIu
aD4KKyNpbmNsdWRlICJzY2hlZC5oIgorCisjZGVmaW5lIEJPT1NUX01JTl9WIC0xMDAKKyNkZWZp
bmUgQk9PU1RfTUFYX1YgMTAwCisjZGVmaW5lIExFVkVMX1RPUCAzCisKK2V4dGVybiB2b2lkICgq
YWRqdXN0X3ByZWRfZGVtYW5kX3ApKGludCBjcHVpZCwKKwkJCXVuc2lnbmVkIGxvbmcgKnV0aWws
IHN0cnVjdCBycSAqcnEpOworREVGSU5FX1BFUl9DUFUodW5zaWduZWQgbG9uZ1tQSURfTUFYX0RF
RkFVTFRdLCB0YXNrX2hpc3Rfbml2Y3N3KTsKKworc3RhdGljIHN0cnVjdCB7CisJYm9vbCBpc19l
bmFibGVkOworCWJvb2wgaXNfc2NyZWVuX29uOworCWludCBzeXNjdGxfdXBfbDA7CisJaW50IHN5
c2N0bF9kb3duOworCWludCBzeXNjdGxfbm9uX3V4OworCWludCB1c2ZfdXBfbDA7CisJaW50IHVz
Zl9kb3duOworCWludCB1c2Zfbm9uX3V4OworfSB1c2ZfdmRldjsKKwordm9pZCBhZGp1c3RfcHJl
ZF9kZW1hbmQoaW50IGNwdWlkLAorCQkJdW5zaWduZWQgbG9uZyAqdXRpbCwKKwkJCXN0cnVjdCBy
cSAqcnEpCit7CisJLyoKKwkgKiBUaGUgaW5pdGlhbCB2YWx1ZSBvZiBibF9zd19udW0gaXMgdGhl
IHJhdGlvIG9mCisJICogc3lzY3RsX3NjaGVkX2xhdGVuY3kvc3lzY3RsX3NjaGVkX21pbl9ncmFu
dWxhcml0eS4KKwkgKiBJdCBzdGFuZHMgZm9yIHRoZSBiYXNpYyBhY2NlcHRhYmxlIGZsdWVuY3ku
CisJICovCisJdTMyIGJsX3N3X251bSA9IDM7CisKKwlpZiAoIXVzZl92ZGV2LmlzX2VuYWJsZWQg
fHwgIXJxIHx8ICFycS0+Y3VyciB8fAorCQkocnEtPmN1cnItPnBpZCA+PSBQSURfTUFYX0RFRkFV
TFQpKQorCQlyZXR1cm47CisJLyoKKwkgKiB1c2Zfbm9uX3V4OgorCSAqCUl0IGNvbWVzIGZyb20g
bm9uX3V4X3IsIHdoaWNoIGlzIHRoZSByYXRpbyBvZiB1dGlscworCSAqCWN1dCBkb3duIG9uIHNj
cmVlbiBvZmYuIFRoZXJlIGFyZSAzIGxldmVscy4gVGhlIGRlZmF1bHQKKwkgKgl2YWx1ZSBpcyAw
LCB3aGljaCBubyB1dGlsIGlzIGFkanVzdGVkIG9uIGNhbGN1bGF0aW5nCisJICoJdXRpbHMgdG8g
c2VsZWN0IGNwdWZyZXEuIElmIG5vbl91eF9yIGZhbGxzIGludG8gWy01MCwgMCksCisJICoJdXNm
X25vbl91eCBlcXVhbHMgMSwgYW5kIGEgaGFsZiBvZiB1dGlscywgd2hpY2ggY2FsY3VsYXRlcwor
CSAqCWNwdWZyZXEsIHNoYWxsIGJlIGN1dCBkb3duLiBJZiBub25fdXhfciBmYWxscyBpbnRvCisJ
ICoJWy0xMDAsIC01MCksIHVzZl9ub25fdXggZXF1YWxzIHRvIDIsIG9ubHkgYSBxdWFydGVyIG9m
CisJICoJdXRpbHMgYXJlIGxlZnQgdG8gY29udGludWUgdG8gY2FsY3VsYXRlIGNwdWZyZXEuCisJ
ICoKKwkgKiB1c2ZfdXBfbDA6CisJICoJSXQgY29tZXMgZnJvbSBzeXNmcyB1cF9sMCwgd2hpY2gg
aXMgdGhlIHJhdGlvIG9mIHV0aWxzCisJICoJYm9vc3QgdXAgb24gc2NyZWVuIG9uLiBUaGVyZSBh
cmUgMyBsZXZlbHMuIFRoZSBkZWZhdWx0CisJICoJdmFsdWUgaXMgMCwgd2hpY2ggbm8gdXRpbCBp
cyBhZGp1c3RlZCB3aGVuIGNwdWZyZXEgYmUKKwkgKgljYWxjdWxhdGVkIGFjY29yZGluZyBpdC4g
SWYgdXBfbDAgZmFsbHMgaW50byAoMCwgNTBdLAorCSAqCXVzZl91cF9sMCBlcXVhbHMgdG8gMi4g
QW5kIGEgcXVhcnRlciBvZiBleHRyYSB1dGlscywKKwkgKgl3aGljaCBjYWxjdWxhdGUgY3B1ZnJl
cSwgc2hhbGwgYmUgYWRkZWQuIElmIHVwX2wwIGZhbGxzCisJICoJaW50byAoNTAsIDEwMF0sIHVz
Zl91cF9sMCBlcXVhbHMgdG8gMS4gQW5kIHRoZSBoYWxmIG9mCisJICoJZXh0cmEgdXRpbHMgYXJl
IGFkZGVkIHRvIGNvbnRpbnVlIHRvIGNhbGN1bGF0ZSBjcHVmcmVxLgorCSAqCisJICogdXNmX2Rv
d246CisJICoJSXQgY29tZXMgZnJvbSBkb3duX3IsIHdoaWNoIGlzIHRoZSByYXRpbyBvZiB1dGls
cyBjdXQKKwkgKglkb3duIG9uIHNjcmVlbiBvbi4gVGhlcmUgYXJlIDMgbGV2ZWxzLiBUaGUgZGVm
YXVsdCB2YWx1ZQorCSAqCWlzIDAsIHdoaWNoIG5vIHV0aWwgaXMgYWRqdXN0ZWQgb24gY2FsY3Vs
YXRpbmcgdXRpbHMgdG8KKwkgKglzZWxlY3QgY3B1ZnJlcS4gSWYgZG93bl9yIGZhbGxzIGludG8g
Wy01MCwgMCksIHVzZl9kb3duCisJICoJZXF1YWxzIHRvIDEsIGFuZCBhIGhhbGYgb2YgdXRpbHMs
IHdoaWNoIGNhbGN1bGF0ZSBjcHVmcmVxCisJICoJc2hhbGwgYmUgIGN1dCBkb3duLiBJZiBkb3du
X3IgZmFsbHMgaW50byBbLTEwMCwgLTUwKQorCSAqCXVzZl9kb3duIGVxdWFscyB0byAyLCBhbmQg
b25seSBhIHF1YXJ0ZXIgb2YgdXRpbHMgYXJlCisJICoJbGVmdCB0byBjb250aW51ZSB0byBjYWxj
dWxhdGUgY3B1ZnJlcS4KKwkgKi8KKwlpZiAodXNmX3ZkZXYuaXNfc2NyZWVuX29uKSB7CisJCWlm
IChycS0+Y3Vyci0+bml2Y3N3ID4KKwkJICAgIChwZXJfY3B1KHRhc2tfaGlzdF9uaXZjc3csIGNw
dWlkKVtycS0+Y3Vyci0+cGlkXQorCQkgICAgICsgYmxfc3dfbnVtICsgMSkpIHsKKwkJCSgqdXRp
bCkgKz0gKCp1dGlsKSA+PiB1c2ZfdmRldi51c2ZfdXBfbDA7CisJCX0gZWxzZSBpZiAocnEtPmN1
cnItPm5pdmNzdyA8CisJCQkgICAocGVyX2NwdSh0YXNrX2hpc3Rfbml2Y3N3LCBjcHVpZClbcnEt
PmN1cnItPnBpZF0KKwkJCSAgICArIGJsX3N3X251bSAtIDEpICYmIChycS0+bnJfcnVubmluZyA8
IGJsX3N3X251bSkpIHsKKwkJCSgqdXRpbCkgPj49IHVzZl92ZGV2LnVzZl9kb3duOworCQl9CisJ
CXBlcl9jcHUodGFza19oaXN0X25pdmNzdywgY3B1aWQpW3JxLT5jdXJyLT5waWRdID0KKwkJICAg
IHJxLT5jdXJyLT5uaXZjc3c7CisJfSBlbHNlIGlmIChycS0+Y3Vyci0+bW0pIHsKKwkJKCp1dGls
KSA+Pj0gdXNmX3ZkZXYudXNmX25vbl91eDsKKwl9Cit9CisKK3N0YXRpYyBpbnQgdXNmX2xjZF9u
b3RpZmllcihzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKm5iLAorCQkJICAgIHVuc2lnbmVkIGxvbmcg
dmFsLCB2b2lkICpkYXRhKQoreworCXN0cnVjdCBmYl9ldmVudCAqZXZkYXRhID0gZGF0YTsKKwl1
bnNpZ25lZCBpbnQgYmxhbms7CisKKwlpZiAoIWV2ZGF0YSkKKwkJcmV0dXJuIDA7CisKKwlpZiAo
dmFsICE9IEZCX0VWRU5UX0JMQU5LKQorCQlyZXR1cm4gMDsKKworCWlmIChldmRhdGEtPmRhdGEg
JiYgdmFsID09IEZCX0VWRU5UX0JMQU5LKSB7CisJCWJsYW5rID0gKihpbnQgKikoZXZkYXRhLT5k
YXRhKTsKKworCQlzd2l0Y2ggKGJsYW5rKSB7CisJCWNhc2UgRkJfQkxBTktfUE9XRVJET1dOOgor
CQkJdXNmX3ZkZXYuaXNfc2NyZWVuX29uID0gZmFsc2U7CisJCQlpZiAodXNmX3ZkZXYuc3lzY3Rs
X25vbl91eCAhPSAwKQorCQkJCWFkanVzdF9wcmVkX2RlbWFuZF9wID0gYWRqdXN0X3ByZWRfZGVt
YW5kOworCQkJZWxzZQorCQkJCWFkanVzdF9wcmVkX2RlbWFuZF9wID0gTlVMTDsKKworCQkJYnJl
YWs7CisKKwkJY2FzZSBGQl9CTEFOS19VTkJMQU5LOgorCQkJdXNmX3ZkZXYuaXNfc2NyZWVuX29u
ID0gdHJ1ZTsKKwkJCWlmICh1c2ZfdmRldi5zeXNjdGxfdXBfbDAgIT0gMCB8fAorCQkJICAgIHVz
Zl92ZGV2LnN5c2N0bF9kb3duICE9IDApCisJCQkJYWRqdXN0X3ByZWRfZGVtYW5kX3AgPSBhZGp1
c3RfcHJlZF9kZW1hbmQ7CisJCQllbHNlCisJCQkJYWRqdXN0X3ByZWRfZGVtYW5kX3AgPSBOVUxM
OworCQkJYnJlYWs7CisJCWRlZmF1bHQ6CisJCQlicmVhazsKKwkJfQorCisJCXVzZl92ZGV2Lmlz
X2VuYWJsZWQgPSB0cnVlOworCQlwcl9pbmZvKCIlcyA6IHVzZl92ZGV2LmlzX3NjcmVlbl9vbjol
YlxuIiwKKwkJCQkgICAgIF9fZnVuY19fLCB1c2ZfdmRldi5pc19zY3JlZW5fb24pOworCX0KKwly
ZXR1cm4gTk9USUZZX09LOworfQorCitzdGF0aWMgc3RydWN0IG5vdGlmaWVyX2Jsb2NrIHVzZl9s
Y2RfbmIgPSB7CisJLm5vdGlmaWVyX2NhbGwgPSB1c2ZfbGNkX25vdGlmaWVyLAorCS5wcmlvcml0
eSA9IElOVF9NQVgsCit9OworCitzdGF0aWMgc3NpemVfdCB1cF9sMF9yX3N0b3JlKHN0cnVjdCBk
ZXZpY2UgKmtvYmosCisJCQkgICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLAorCQkJ
ICAgICBjb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCkKK3sKKwlpbnQgdmFsID0gMDsKKwlp
bnQgcmV0ID0gMDsKKworCXJldCA9IGtzdHJ0b2ludChidWYsIDAsICZ2YWwpOworCWlmIChyZXQp
CisJCXJldHVybiByZXQ7CisKKwlpZiAodmFsID09IDApIHsKKwkJdXNmX3ZkZXYuc3lzY3RsX3Vw
X2wwID0gdmFsOworCQl1c2ZfdmRldi51c2ZfdXBfbDAgPSAwOworCX0gZWxzZSBpZiAoKHZhbCA+
IDApICYmICh2YWwgPD0gQk9PU1RfTUFYX1YpKSB7CisJCXVzZl92ZGV2LnN5c2N0bF91cF9sMCA9
IHZhbDsKKwkJdXNmX3ZkZXYudXNmX3VwX2wwID0gTEVWRUxfVE9QIC0KKwkJCQlESVZfUk9VTkRf
VVAodmFsLCBCT09TVF9NQVhfViAvIDIpOworCQlyZXQgPSBjb3VudDsKKwl9IGVsc2UgeworCQlw
cl9lcnIoIlVTRiBCVUc6ICVkIHNob3VsZCBmYWxsIGludG8gWyVkICVkXSIsCisJCSAgICAgICB2
YWwsIDAsIEJPT1NUX01BWF9WKTsKKwkJcmV0ID0gLUVJTlZBTDsKKwl9CisJaWYgKCh1c2ZfdmRl
di5zeXNjdGxfdXBfbDAgPT0gMCkgJiYKKwkgICAgKHVzZl92ZGV2LnN5c2N0bF9kb3duID09IDAp
KQorCQlhZGp1c3RfcHJlZF9kZW1hbmRfcCA9IE5VTEw7CisJZWxzZQorCQlhZGp1c3RfcHJlZF9k
ZW1hbmRfcCA9IGFkanVzdF9wcmVkX2RlbWFuZDsKKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRp
YyBzc2l6ZV90IGRvd25fcl9zdG9yZShzdHJ1Y3QgZGV2aWNlICprb2JqLAorCQkJICAgIHN0cnVj
dCBkZXZpY2VfYXR0cmlidXRlICphdHRyLAorCQkJICAgIGNvbnN0IGNoYXIgKmJ1Ziwgc2l6ZV90
IGNvdW50KQoreworCWludCB2YWwgPSAwOworCWludCByZXQgPSAwOworCisJcmV0ID0ga3N0cnRv
aW50KGJ1ZiwgMCwgJnZhbCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCWlmICgodmFs
ID49IEJPT1NUX01JTl9WKSAmJiAodmFsIDw9IDApKSB7CisJCXVzZl92ZGV2LnN5c2N0bF9kb3du
ID0gdmFsOworCQl1c2ZfdmRldi51c2ZfZG93biA9IERJVl9ST1VORF9VUCgtdmFsLCAtQk9PU1Rf
TUlOX1YgLyAyKTsKKwkJcmV0ID0gY291bnQ7CisJfSBlbHNlIHsKKwkJcHJfZXJyKCJVU0YgQlVH
OiAlZCBzaG91bGQgZmFsbCBpbnRvIFslZCAlZF0iLAorCQkgICAgICAgdmFsLCBCT09TVF9NSU5f
ViwgMCk7CisJCXJldCA9IC1FSU5WQUw7CisJfQorCWlmICgodXNmX3ZkZXYuc3lzY3RsX3VwX2ww
ID09IDApICYmCisJICAgICh1c2ZfdmRldi5zeXNjdGxfZG93biA9PSAwKSkKKwkJYWRqdXN0X3By
ZWRfZGVtYW5kX3AgPSBOVUxMOworCWVsc2UKKwkJYWRqdXN0X3ByZWRfZGVtYW5kX3AgPSBhZGp1
c3RfcHJlZF9kZW1hbmQ7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgc3NpemVfdCBub25f
dXhfcl9zdG9yZShzdHJ1Y3QgZGV2aWNlICprb2JqLAorCQkJICAgICAgc3RydWN0IGRldmljZV9h
dHRyaWJ1dGUgKmF0dHIsCisJCQkgICAgICBjb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCkK
K3sKKwlpbnQgdmFsID0gMDsKKwlpbnQgcmV0ID0gMDsKKworCXJldCA9IGtzdHJ0b2ludChidWYs
IDAsICZ2YWwpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlpZiAoKHZhbCA+PSBCT09T
VF9NSU5fVikgJiYgKHZhbCA8PSAwKSkgeworCQl1c2ZfdmRldi5zeXNjdGxfbm9uX3V4ID0gdmFs
OworCQl1c2ZfdmRldi51c2Zfbm9uX3V4ID0gRElWX1JPVU5EX1VQKC12YWwsIC1CT09TVF9NSU5f
ViAvIDIpOworCQlyZXQgPSBjb3VudDsKKwl9IGVsc2UgeworCQlwcl9lcnIoIlVTRiBCVUc6ICVk
IHNob3VsZCBmYWxsIGludG8gWyVkICVkXSIsCisJCSAgICAgICB2YWwsIEJPT1NUX01JTl9WLCAw
KTsKKwkJcmV0ID0gLUVJTlZBTDsKKwl9CisJaWYgKHVzZl92ZGV2LnN5c2N0bF9ub25fdXggPT0g
MCkKKwkJYWRqdXN0X3ByZWRfZGVtYW5kX3AgPSBOVUxMOworCWVsc2UKKwkJYWRqdXN0X3ByZWRf
ZGVtYW5kX3AgPSBhZGp1c3RfcHJlZF9kZW1hbmQ7CisKKwlyZXR1cm4gcmV0OworfQorCisjZGVm
aW5lIHVzZl9hdHRyX3J3KF9uYW1lKQkJCQkJCVwKK3N0YXRpYyBzdHJ1Y3QgZGV2aWNlX2F0dHJp
YnV0ZSBfbmFtZSA9CQkJCQlcCitfX0FUVFJfUlcoX25hbWUpCisKKyNkZWZpbmUgdXNmX3Nob3df
bm9kZShfbmFtZSwgX3ZhbHVlKQkJCQkJXAorc3RhdGljIHNzaXplX3QgX25hbWUjI19zaG93CQkJ
CQkJXAorKHN0cnVjdCBkZXZpY2UgKmtvYmosIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRy
LCAgY2hhciAqYnVmKQkJXAorewkJCQkJCQkJCVwKKwlyZXR1cm4gc3ByaW50ZihidWYsICIlZCIs
IHVzZl92ZGV2LnN5c2N0bF8jI192YWx1ZSk7CQlcCit9CisKK3VzZl9zaG93X25vZGUodXBfbDBf
ciwgdXBfbDApOwordXNmX3Nob3dfbm9kZShkb3duX3IsIGRvd24pOwordXNmX3Nob3dfbm9kZShu
b25fdXhfciwgbm9uX3V4KTsKKwordXNmX2F0dHJfcncodXBfbDBfcik7Cit1c2ZfYXR0cl9ydyhk
b3duX3IpOwordXNmX2F0dHJfcncobm9uX3V4X3IpOworCitzdGF0aWMgc3RydWN0IGF0dHJpYnV0
ZSAqc2NoZWRfdXNmX2F0dHJzW10gPSB7CisJJnVwX2wwX3IuYXR0ciwKKwkmZG93bl9yLmF0dHIs
CisJJm5vbl91eF9yLmF0dHIsCisJTlVMTCwKK307CisKK0FUVFJJQlVURV9HUk9VUFMoc2NoZWRf
dXNmKTsKKworc3RhdGljIGludCBfX2luaXQgaW50ZXJhX21vbml0b3JfaW5pdCh2b2lkKQorewor
CWludCByZXMgPSAtMTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXY7CisKKwlyZXMgPSBmYl9yZWdpc3Rl
cl9jbGllbnQoJnVzZl9sY2RfbmIpOworCWlmIChyZXMgPCAwKSB7CisJCXByX2VycigiRmFpbGVk
IHRvIHJlZ2lzdGVyIHVzZl9sY2RfbmIhXG4iKTsKKwkJcmV0dXJuIHJlczsKKwl9CisKKwkvKgor
CSAqIGNyZWF0ZSBhIHNjaGVkX3VzZiBpbiBjcHVfc3Vic3lzOgorCSAqIC9zeXMvZGV2aWNlcy9z
eXN0ZW0vY3B1L3NjaGVkX3VzZi8uLi4KKwkgKi8KKwlkZXYgPSBjcHVfc3Vic3lzLmRldl9yb290
OworCXJlcyA9IHN5c2ZzX2NyZWF0ZV9ncm91cCgmZGV2LT5rb2JqLCAmc2NoZWRfdXNmX2dyb3Vw
KTsKKwlpZiAocmVzKSB7CisJCWZiX3VucmVnaXN0ZXJfY2xpZW50KCZ1c2ZfbGNkX25iKTsKKwkJ
cmV0dXJuIHJlczsKKwl9CisKKwlyZXR1cm4gcmVzOworfQorCittb2R1bGVfaW5pdChpbnRlcmFf
bW9uaXRvcl9pbml0KTsKKworc3RhdGljIHZvaWQgX19leGl0IGludGVyYV9tb25pdG9yX2V4aXQo
dm9pZCkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXY7CisKKwlkZXYgPSBjcHVfc3Vic3lzLmRldl9y
b290OworCXN5c2ZzX3JlbW92ZV9ncm91cCgmZGV2LT5rb2JqLCAmc2NoZWRfdXNmX2dyb3VwKTsK
KwlmYl91bnJlZ2lzdGVyX2NsaWVudCgmdXNmX2xjZF9uYik7CisJYWRqdXN0X3ByZWRfZGVtYW5k
X3AgPSBOVUxMOworfQorCittb2R1bGVfZXhpdChpbnRlcmFfbW9uaXRvcl9leGl0KTsKLS0gCjIu
Ny40CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkZXZl
bCBtYWlsaW5nIGxpc3QKZGV2ZWxAbGludXhkcml2ZXJwcm9qZWN0Lm9yZwpodHRwOi8vZHJpdmVy
ZGV2LmxpbnV4ZHJpdmVycHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcml2ZXJkZXYtZGV2
ZWwK
