Return-Path: <driverdev-devel-bounces@linuxdriverproject.org>
X-Original-To: lists+driverdev-devel@lfdr.de
Delivered-To: lists+driverdev-devel@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 6364569DBB
	for <lists+driverdev-devel@lfdr.de>; Mon, 15 Jul 2019 23:21:47 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id EDFD5871F4;
	Mon, 15 Jul 2019 21:21:45 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fYdWAQBi-fmt; Mon, 15 Jul 2019 21:21:44 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by whitealder.osuosl.org (Postfix) with ESMTP id E86B9843DB;
	Mon, 15 Jul 2019 21:21:34 +0000 (UTC)
X-Original-To: devel@linuxdriverproject.org
Delivered-To: driverdev-devel@osuosl.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by ash.osuosl.org (Postfix) with ESMTP id C93781BF35C
 for <devel@linuxdriverproject.org>; Mon, 15 Jul 2019 21:21:32 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id BBCB585F53
 for <devel@linuxdriverproject.org>; Mon, 15 Jul 2019 21:21:32 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id QIAVggD4Ojnp for <devel@linuxdriverproject.org>;
 Mon, 15 Jul 2019 21:21:28 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pf1-f193.google.com (mail-pf1-f193.google.com
 [209.85.210.193])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id E2F9585F50
 for <devel@driverdev.osuosl.org>; Mon, 15 Jul 2019 21:21:28 +0000 (UTC)
Received: by mail-pf1-f193.google.com with SMTP id i189so8007985pfg.10
 for <devel@driverdev.osuosl.org>; Mon, 15 Jul 2019 14:21:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=CGFluWUQeb793ccUxoO6ykF17I/3PMOKAprht6pktCA=;
 b=GXwUD3QyEOJ7ZBkCF0Zx941tElovhC9DV/IATPb5vNCddy+uoY4yrMsVqR0mc6aJ1F
 pyyXJ7meZvI62jetvtbNvpLSW0vtifZ6VmL15I167aaWx2GZwQr3KihyQcPeqPUs+6Jk
 EDIYe42ts24rF0V2po0vUpRFGdAXMmrXgwoCm5d+JeDFVVHGnQykJffcZOEn3XONYr+q
 3kx2h9oeA/4m5lwoa8xA/ThuuMF3A4ThlcYJzD1P/qCUZHGFntSQLtyJqK9JtpAo8AKc
 wnZY2sr4CFAGuyCrw4ZSRlrRmFXQnujaXYgJbbmo0FZtamiUk/lSYLER5b8Uyvmigh3Q
 xsrg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=CGFluWUQeb793ccUxoO6ykF17I/3PMOKAprht6pktCA=;
 b=TIbVuto3S9r88/qOX/qCvqV0P1MJ8vn2ylOUHWJ0DLmYh/ubcqFlF4JShqjpsDpdQ8
 UfDUcu7+n7MoXQKx6ca5tA0TA4bwLIVhPSTOo0KHFis81klyfZDVSCHG4AcEMidu0kdk
 42awp7zeIBes6lMzqFh4tNe+2qBLUvCJJT1NiM8EBiv/CspqQdohx+s5U/+7BJ7A13B6
 4LztOVLXOew8Lneb7ChfRVgzVY/srzy9yD0FNjh2lr2eqNaTeYwZAvVN05irkZZtdkKS
 CQ/kzX6vX5qIqsDkiX4nDgR2IDEBezn6tykGn9hNoIztLofldnCxyIBEDsi5xU7b7j1T
 rU2Q==
X-Gm-Message-State: APjAAAWAxVpBZ99fRCV5pmZ0+M25VFtspLOzfgZ31QU4ne36tOnykigs
 eu7lvSBzYAoG/BpM2mPyB/SAtUis
X-Google-Smtp-Source: APXvYqzr7FFs4XOG9IxHqCbJ7k5U3D26E1PwxhgFTd8zgOUqjHdm4oLfH4cGEV+zzYhNgWW602aHZw==
X-Received: by 2002:a63:2744:: with SMTP id n65mr16404275pgn.277.1563225688177; 
 Mon, 15 Jul 2019 14:21:28 -0700 (PDT)
Received: from blueforge.nvidia.com (searspoint.nvidia.com. [216.228.112.21])
 by smtp.gmail.com with ESMTPSA id
 b6sm16820322pgq.26.2019.07.15.14.21.27
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 15 Jul 2019 14:21:27 -0700 (PDT)
From: john.hubbard@gmail.com
X-Google-Original-From: jhubbard@nvidia.com
To: Dan Carpenter <dan.carpenter@oracle.com>
Subject: [PATCH] staging: kpc2000: whitespace and line length cleanup
Date: Mon, 15 Jul 2019 14:21:23 -0700
Message-Id: <20190715212123.432-2-jhubbard@nvidia.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190715212123.432-1-jhubbard@nvidia.com>
References: <20190715212123.432-1-jhubbard@nvidia.com>
MIME-Version: 1.0
X-NVConfidentiality: public
X-BeenThere: driverdev-devel@linuxdriverproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Driver Project Developer List
 <driverdev-devel.linuxdriverproject.org>
List-Unsubscribe: <http://driverdev.linuxdriverproject.org/mailman/options/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=unsubscribe>
List-Archive: <http://driverdev.linuxdriverproject.org/pipermail/driverdev-devel/>
List-Post: <mailto:driverdev-devel@linuxdriverproject.org>
List-Help: <mailto:driverdev-devel-request@linuxdriverproject.org?subject=help>
List-Subscribe: <http://driverdev.linuxdriverproject.org/mailman/listinfo/driverdev-devel>, 
 <mailto:driverdev-devel-request@linuxdriverproject.org?subject=subscribe>
Cc: devel@driverdev.osuosl.org, Vandana BN <bnvandana@gmail.com>,
 Geordan Neukum <gneukum1@gmail.com>, Bharath Vedartham <linux.bhar@gmail.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 John Hubbard <jhubbard@nvidia.com>, LKML <linux-kernel@vger.kernel.org>,
 =?UTF-8?q?Simon=20Sandstr=C3=B6m?= <simon@nikanor.nu>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: driverdev-devel-bounces@linuxdriverproject.org
Sender: "devel" <driverdev-devel-bounces@linuxdriverproject.org>

RnJvbTogSm9obiBIdWJiYXJkIDxqaHViYmFyZEBudmlkaWEuY29tPgoKVGhpcyBjb21taXQgd2Fz
IGNyZWF0ZWQgYnkgcnVubmluZyBpbmRlbnQoMSk6CiAgICBgaW5kZW50IC1saW51eGAKCi4uLmFu
ZCB0aGVuIGFwcGx5aW5nIHNvbWUgbWFudWFsIGNvcnJlY3Rpb25zIGFuZApjbGVhbnVwIGFmdGVy
d2FyZCwgdG8ga2VlcCBpdCBzYW5lLiBObyBmdW5jdGlvbmFsIGNoYW5nZXMKd2VyZSBtYWRlLgoK
SW4gYWRkaXRpb24gdG8gd2hpdGVzcGFjZSBjaGFuZ2VzLCBzb21lIHN0cmluZ3Mgd2VyZSBzcGxp
dCwKYnV0IG5vdCBzdHJpbmdzIHRoYXQgd2VyZSBsaWtlbHkgdG8gYmUgYSBncmVwIHByb2JsZW0K
KGluIG90aGVyIHdvcmRzLCBpZiBhIHVzZXIgaXMgbGlrZWx5IHRvIGdyZXAgZm9yIGEgc3RyaW5n
CndpdGhpbiB0aGUgZHJpdmVyLCB0aGF0IHNob3VsZCBzdGlsbCB3b3JrIGluIG1vc3QgY2FzZXMp
LgoKQSBmZXcgInZvaWQgKiBmb28iIGNhc2VzIHdlcmUgZml4ZWQgdG8gYmUgInZvaWQgKmZvbyIu
CgpUaGF0IHdhcyBlbm91Z2ggdG8gbWFrZSBjaGVja3BhdGNoLnBsIHJ1biB3aXRob3V0IGVycm9y
cywKYWx0aG91Z2ggbm90ZSB0aGF0IHRoZXJlIGFyZSBsb3RzIG9mIHNlcmlvdXMgd2FybmluZ3MK
cmVtYWluaW5nLS1idXQgdGhvc2UgcmVxdWlyZSBmdW5jdGlvbmFsLCBub3QganVzdCB3aGl0ZXNw
YWNlCmNoYW5nZXMuIFNvIHRob3NlIGFyZSBsZWZ0IGZvciBhIHNlcGFyYXRlIHBhdGNoLgoKQ2M6
IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+CkNjOiBTaW1v
biBTYW5kc3Ryw7ZtIDxzaW1vbkBuaWthbm9yLm51PgpDYzogR2VvcmRhbiBOZXVrdW0gPGduZXVr
dW0xQGdtYWlsLmNvbT4KQ2M6IEplcmVteSBTb3dkZW4gPGplcmVteUBhemF6ZWwubmV0PgpDYzog
RGFuIENhcnBlbnRlciA8ZGFuLmNhcnBlbnRlckBvcmFjbGUuY29tPgpDYzogVmFuZGFuYSBCTiA8
Ym52YW5kYW5hQGdtYWlsLmNvbT4KQ2M6IGRldmVsQGRyaXZlcmRldi5vc3Vvc2wub3JnCkNjOiBC
aGFyYXRoIFZlZGFydGhhbSA8bGludXguYmhhckBnbWFpbC5jb20+ClNpZ25lZC1vZmYtYnk6IEpv
aG4gSHViYmFyZCA8amh1YmJhcmRAbnZpZGlhLmNvbT4KLS0tCiBkcml2ZXJzL3N0YWdpbmcva3Bj
MjAwMC9rcGMyMDAwX2kyYy5jICAgICAgICAgfCAxODkgKysrKysrKysrKystLS0tLS0KIGRyaXZl
cnMvc3RhZ2luZy9rcGMyMDAwL2twYzIwMDBfc3BpLmMgICAgICAgICB8IDExNiArKysrKy0tLS0t
CiBkcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGNfZG1hL2RtYS5jICAgICAgICAgfCAxMDkgKysr
KysrLS0tLQogZHJpdmVycy9zdGFnaW5nL2twYzIwMDAva3BjX2RtYS9maWxlb3BzLmMgICAgIHwg
MTk5ICsrKysrKysrKysrLS0tLS0tLQogLi4uL3N0YWdpbmcva3BjMjAwMC9rcGNfZG1hL2twY19k
bWFfZHJpdmVyLmMgIHwgMTEzICsrKysrLS0tLS0KIC4uLi9zdGFnaW5nL2twYzIwMDAva3BjX2Rt
YS9rcGNfZG1hX2RyaXZlci5oICB8IDE1NiArKysrKysrLS0tLS0tLQogNiBmaWxlcyBjaGFuZ2Vk
LCA1MDkgaW5zZXJ0aW9ucygrKSwgMzczIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvc3RhZ2luZy9rcGMyMDAwL2twYzIwMDBfaTJjLmMgYi9kcml2ZXJzL3N0YWdpbmcva3BjMjAw
MC9rcGMyMDAwX2kyYy5jCmluZGV4IGIxMDhkYTRhYzYzMy4uOTNmYTE4NThmNmI1IDEwMDY0NAot
LS0gYS9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGMyMDAwX2kyYy5jCisrKyBiL2RyaXZlcnMv
c3RhZ2luZy9rcGMyMDAwL2twYzIwMDBfaTJjLmMKQEAgLTMzLDkgKzMzLDkgQEAgTU9EVUxFX0xJ
Q0VOU0UoIkdQTCIpOwogTU9EVUxFX0FVVEhPUigiTWF0dC5TaWNrbGVyQERha3Ryb25pY3MuY29t
Iik7CiAKIHN0cnVjdCBpMmNfZGV2aWNlIHsKLQl1bnNpZ25lZCBsb25nICAgICAgICAgICBzbWJh
OwotCXN0cnVjdCBpMmNfYWRhcHRlciAgICAgIGFkYXB0ZXI7Ci0JdW5zaWduZWQgaW50ICAgICAg
ICAgICAgZmVhdHVyZXM7CisJdW5zaWduZWQgbG9uZwkJc21iYTsKKwlzdHJ1Y3QgaTJjX2FkYXB0
ZXIJYWRhcHRlcjsKKwl1bnNpZ25lZCBpbnQJCWZlYXR1cmVzOwogfTsKIAogLyoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCkBAIC01Miw5ICs1Miw5IEBAIHN0cnVjdCBpMmNfZGV2aWNlIHsK
ICNkZWZpbmUgU01CSFNUREFUMChwKSAgICgoNSAgKiBSRUdfU0laRSkgKyAocCktPnNtYmEpCiAj
ZGVmaW5lIFNNQkhTVERBVDEocCkgICAoKDYgICogUkVHX1NJWkUpICsgKHApLT5zbWJhKQogI2Rl
ZmluZSBTTUJCTEtEQVQocCkgICAgKCg3ICAqIFJFR19TSVpFKSArIChwKS0+c21iYSkKLSNkZWZp
bmUgU01CUEVDKHApICAgICAgICgoOCAgKiBSRUdfU0laRSkgKyAocCktPnNtYmEpICAgLyogSUNI
MyBhbmQgbGF0ZXIgKi8KLSNkZWZpbmUgU01CQVVYU1RTKHApICAgICgoMTIgKiBSRUdfU0laRSkg
KyAocCktPnNtYmEpICAgLyogSUNINCBhbmQgbGF0ZXIgKi8KLSNkZWZpbmUgU01CQVVYQ1RMKHAp
ICAgICgoMTMgKiBSRUdfU0laRSkgKyAocCktPnNtYmEpICAgLyogSUNINCBhbmQgbGF0ZXIgKi8K
KyNkZWZpbmUgU01CUEVDKHApICAgICAgICgoOCAgKiBSRUdfU0laRSkgKyAocCktPnNtYmEpCS8q
IElDSDMgYW5kIGxhdGVyICovCisjZGVmaW5lIFNNQkFVWFNUUyhwKSAgICAoKDEyICogUkVHX1NJ
WkUpICsgKHApLT5zbWJhKQkvKiBJQ0g0IGFuZCBsYXRlciAqLworI2RlZmluZSBTTUJBVVhDVEwo
cCkgICAgKCgxMyAqIFJFR19TSVpFKSArIChwKS0+c21iYSkJLyogSUNINCBhbmQgbGF0ZXIgKi8K
IAogLyogUENJIEFkZHJlc3MgQ29uc3RhbnRzICovCiAjZGVmaW5lIFNNQkJBUiAgICAgIDQKQEAg
LTc0LDIwICs3NCwyMCBAQCBzdHJ1Y3QgaTJjX2RldmljZSB7CiAKIC8qIE90aGVyIHNldHRpbmdz
ICovCiAjZGVmaW5lIE1BWF9SRVRSSUVTICAgICAgICAgNDAwCi0jZGVmaW5lIEVOQUJMRV9JTlQ5
ICAgICAgICAgMCAgICAgICAvKiBzZXQgdG8gMHgwMSB0byBlbmFibGUgLSB1bnRlc3RlZCAqLwor
I2RlZmluZSBFTkFCTEVfSU5UOSAgICAgICAgIDAJLyogc2V0IHRvIDB4MDEgdG8gZW5hYmxlIC0g
dW50ZXN0ZWQgKi8KIAogLyogSTgwMSBjb21tYW5kIGNvbnN0YW50cyAqLwogI2RlZmluZSBJODAx
X1FVSUNLICAgICAgICAgICAgICAweDAwCiAjZGVmaW5lIEk4MDFfQllURSAgICAgICAgICAgICAg
IDB4MDQKICNkZWZpbmUgSTgwMV9CWVRFX0RBVEEgICAgICAgICAgMHgwOAogI2RlZmluZSBJODAx
X1dPUkRfREFUQSAgICAgICAgICAweDBDCi0jZGVmaW5lIEk4MDFfUFJPQ19DQUxMICAgICAgICAg
IDB4MTAgICAgLyogdW5pbXBsZW1lbnRlZCAqLworI2RlZmluZSBJODAxX1BST0NfQ0FMTCAgICAg
ICAgICAweDEwCS8qIHVuaW1wbGVtZW50ZWQgKi8KICNkZWZpbmUgSTgwMV9CTE9DS19EQVRBICAg
ICAgICAgMHgxNAotI2RlZmluZSBJODAxX0kyQ19CTE9DS19EQVRBICAgICAweDE4ICAgIC8qIElD
SDUgYW5kIGxhdGVyICovCisjZGVmaW5lIEk4MDFfSTJDX0JMT0NLX0RBVEEgICAgIDB4MTgJLyog
SUNINSBhbmQgbGF0ZXIgKi8KICNkZWZpbmUgSTgwMV9CTE9DS19MQVNUICAgICAgICAgMHgzNAot
I2RlZmluZSBJODAxX0kyQ19CTE9DS19MQVNUICAgICAweDM4ICAgIC8qIElDSDUgYW5kIGxhdGVy
ICovCisjZGVmaW5lIEk4MDFfSTJDX0JMT0NLX0xBU1QgICAgIDB4MzgJLyogSUNINSBhbmQgbGF0
ZXIgKi8KICNkZWZpbmUgSTgwMV9TVEFSVCAgICAgICAgICAgICAgMHg0MAotI2RlZmluZSBJODAx
X1BFQ19FTiAgICAgICAgICAgICAweDgwICAgIC8qIElDSDMgYW5kIGxhdGVyICovCisjZGVmaW5l
IEk4MDFfUEVDX0VOICAgICAgICAgICAgIDB4ODAJLyogSUNIMyBhbmQgbGF0ZXIgKi8KIAogLyog
STgwMSBIb3N0cyBTdGF0dXMgcmVnaXN0ZXIgYml0cyAqLwogI2RlZmluZSBTTUJIU1RTVFNfQllU
RV9ET05FICAgICAweDgwCkBAIC05OSw3ICs5OSw5IEBAIHN0cnVjdCBpMmNfZGV2aWNlIHsKICNk
ZWZpbmUgU01CSFNUU1RTX0lOVFIgICAgICAgICAgMHgwMgogI2RlZmluZSBTTUJIU1RTVFNfSE9T
VF9CVVNZICAgICAweDAxCiAKLSNkZWZpbmUgU1RBVFVTX0ZMQUdTICAgICAgICAoU01CSFNUU1RT
X0JZVEVfRE9ORSB8IFNNQkhTVFNUU19GQUlMRUQgfCBTTUJIU1RTVFNfQlVTX0VSUiB8IFNNQkhT
VFNUU19ERVZfRVJSIHwgU01CSFNUU1RTX0lOVFIpCisjZGVmaW5lIFNUQVRVU19GTEFHUyBcCisJ
KFNNQkhTVFNUU19CWVRFX0RPTkUgfCBTTUJIU1RTVFNfRkFJTEVEIHwgU01CSFNUU1RTX0JVU19F
UlIgfCBcCisJIFNNQkhTVFNUU19ERVZfRVJSIHwgU01CSFNUU1RTX0lOVFIpCiAKIC8qIE9sZGVy
IGRldmljZXMgaGF2ZSB0aGVpciBJRCBkZWZpbmVkIGluIDxsaW51eC9wY2lfaWRzLmg+ICovCiAj
ZGVmaW5lIFBDSV9ERVZJQ0VfSURfSU5URUxfQ09VR0FSUE9JTlRfU01CVVMgICAgICAgMHgxYzIy
CkBAIC0xMzYsMTcgKzEzOCwyMSBAQCBzdGF0aWMgaW50IGk4MDFfY2hlY2tfcHJlKHN0cnVjdCBp
MmNfZGV2aWNlICpwcml2KQogCiAJc3RhdHVzID0gaW5iX3AoU01CSFNUU1RTKHByaXYpKTsKIAlp
ZiAoc3RhdHVzICYgU01CSFNUU1RTX0hPU1RfQlVTWSkgewotCQlkZXZfZXJyKCZwcml2LT5hZGFw
dGVyLmRldiwgIlNNQnVzIGlzIGJ1c3ksIGNhbid0IHVzZSBpdCEgKHN0YXR1cz0leClcbiIsIHN0
YXR1cyk7CisJCWRldl9lcnIoJnByaXYtPmFkYXB0ZXIuZGV2LAorCQkJIlNNQnVzIGlzIGJ1c3ks
IGNhbid0IHVzZSBpdCEgKHN0YXR1cz0leClcbiIsIHN0YXR1cyk7CiAJCXJldHVybiAtRUJVU1k7
CiAJfQogCiAJc3RhdHVzICY9IFNUQVRVU19GTEFHUzsKIAlpZiAoc3RhdHVzKSB7Ci0JCS8vZGV2
X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsICJDbGVhcmluZyBzdGF0dXMgZmxhZ3MgKCUwMngpXG4i
LCBzdGF0dXMpOworCQkvL2Rldl9kYmcoJnByaXYtPmFkYXB0ZXIuZGV2LAorCQkvLyJDbGVhcmlu
ZyBzdGF0dXMgZmxhZ3MgKCUwMngpXG4iLCBzdGF0dXMpOwogCQlvdXRiX3Aoc3RhdHVzLCBTTUJI
U1RTVFMocHJpdikpOwogCQlzdGF0dXMgPSBpbmJfcChTTUJIU1RTVFMocHJpdikpICYgU1RBVFVT
X0ZMQUdTOwogCQlpZiAoc3RhdHVzKSB7Ci0JCQlkZXZfZXJyKCZwcml2LT5hZGFwdGVyLmRldiwg
IkZhaWxlZCBjbGVhcmluZyBzdGF0dXMgZmxhZ3MgKCUwMngpXG4iLCBzdGF0dXMpOworCQkJZGV2
X2VycigmcHJpdi0+YWRhcHRlci5kZXYsCisJCQkJIkZhaWxlZCBjbGVhcmluZyBzdGF0dXMgZmxh
Z3MgKCUwMngpXG4iLAorCQkJCXN0YXR1cyk7CiAJCQlyZXR1cm4gLUVCVVNZOwogCQl9CiAJfQpA
QCAtMTYyLDE1ICsxNjgsMjAgQEAgc3RhdGljIGludCBpODAxX2NoZWNrX3Bvc3Qoc3RydWN0IGky
Y19kZXZpY2UgKnByaXYsIGludCBzdGF0dXMsIGludCB0aW1lb3V0KQogCWlmICh0aW1lb3V0KSB7
CiAJCWRldl9lcnIoJnByaXYtPmFkYXB0ZXIuZGV2LCAiVHJhbnNhY3Rpb24gdGltZW91dFxuIik7
CiAJCS8qIHRyeSB0byBzdG9wIHRoZSBjdXJyZW50IGNvbW1hbmQgKi8KLQkJZGV2X2RiZygmcHJp
di0+YWRhcHRlci5kZXYsICJUZXJtaW5hdGluZyB0aGUgY3VycmVudCBvcGVyYXRpb25cbiIpOwot
CQlvdXRiX3AoaW5iX3AoU01CSFNUQ05UKHByaXYpKSB8IFNNQkhTVENOVF9LSUxMLCBTTUJIU1RD
TlQocHJpdikpOworCQlkZXZfZGJnKCZwcml2LT5hZGFwdGVyLmRldiwKKwkJCSJUZXJtaW5hdGlu
ZyB0aGUgY3VycmVudCBvcGVyYXRpb25cbiIpOworCQlvdXRiX3AoaW5iX3AoU01CSFNUQ05UKHBy
aXYpKSB8IFNNQkhTVENOVF9LSUxMLAorCQkgICAgICAgU01CSFNUQ05UKHByaXYpKTsKIAkJdXNs
ZWVwX3JhbmdlKDEwMDAsIDIwMDApOwotCQlvdXRiX3AoaW5iX3AoU01CSFNUQ05UKHByaXYpKSAm
ICh+U01CSFNUQ05UX0tJTEwpLCBTTUJIU1RDTlQocHJpdikpOworCQlvdXRiX3AoaW5iX3AoU01C
SFNUQ05UKHByaXYpKSAmICh+U01CSFNUQ05UX0tJTEwpLAorCQkgICAgICAgU01CSFNUQ05UKHBy
aXYpKTsKIAogCQkvKiBDaGVjayBpZiBpdCB3b3JrZWQgKi8KIAkJc3RhdHVzID0gaW5iX3AoU01C
SFNUU1RTKHByaXYpKTsKLQkJaWYgKChzdGF0dXMgJiBTTUJIU1RTVFNfSE9TVF9CVVNZKSB8fCAh
KHN0YXR1cyAmIFNNQkhTVFNUU19GQUlMRUQpKQotCQkJZGV2X2VycigmcHJpdi0+YWRhcHRlci5k
ZXYsICJGYWlsZWQgdGVybWluYXRpbmcgdGhlIHRyYW5zYWN0aW9uXG4iKTsKKwkJaWYgKChzdGF0
dXMgJiBTTUJIU1RTVFNfSE9TVF9CVVNZKQorCQkgICAgfHwgIShzdGF0dXMgJiBTTUJIU1RTVFNf
RkFJTEVEKSkKKwkJCWRldl9lcnIoJnByaXYtPmFkYXB0ZXIuZGV2LAorCQkJCSJGYWlsZWQgdGVy
bWluYXRpbmcgdGhlIHRyYW5zYWN0aW9uXG4iKTsKIAkJb3V0Yl9wKFNUQVRVU19GTEFHUywgU01C
SFNUU1RTKHByaXYpKTsKIAkJcmV0dXJuIC1FVElNRURPVVQ7CiAJfQpAQCAtMTkzLDcgKzIwNCw5
IEBAIHN0YXRpYyBpbnQgaTgwMV9jaGVja19wb3N0KHN0cnVjdCBpMmNfZGV2aWNlICpwcml2LCBp
bnQgc3RhdHVzLCBpbnQgdGltZW91dCkKIAkJb3V0Yl9wKHN0YXR1cyAmIFNUQVRVU19GTEFHUywg
U01CSFNUU1RTKHByaXYpKTsKIAkJc3RhdHVzID0gaW5iX3AoU01CSFNUU1RTKHByaXYpKSAmIFNU
QVRVU19GTEFHUzsKIAkJaWYgKHN0YXR1cykKLQkJCWRldl93YXJuKCZwcml2LT5hZGFwdGVyLmRl
diwgIkZhaWxlZCBjbGVhcmluZyBzdGF0dXMgZmxhZ3MgYXQgZW5kIG9mIHRyYW5zYWN0aW9uICgl
MDJ4KVxuIiwgc3RhdHVzKTsKKwkJCWRldl93YXJuKCZwcml2LT5hZGFwdGVyLmRldiwKKwkJCQkg
IkZhaWxlZCBjbGVhcmluZyBzdGF0dXMgZmxhZ3MgYXQgZW5kIG9mIHRyYW5zYWN0aW9uICglMDJ4
KVxuIiwKKwkJCQkgc3RhdHVzKTsKIAl9CiAKIAlyZXR1cm4gcmVzdWx0OwpAQCAtMjQ0LDEyICsy
NTcsMTQgQEAgc3RhdGljIHZvaWQgaTgwMV93YWl0X2h3cGVjKHN0cnVjdCBpMmNfZGV2aWNlICpw
cml2KQogCW91dGJfcChzdGF0dXMsIFNNQkhTVFNUUyhwcml2KSk7CiB9CiAKLXN0YXRpYyBpbnQg
aTgwMV9ibG9ja190cmFuc2FjdGlvbl9ieV9ibG9jayhzdHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwg
dW5pb24gaTJjX3NtYnVzX2RhdGEgKmRhdGEsIGNoYXIgcmVhZF93cml0ZSwgaW50IGh3cGVjKQor
c3RhdGljIGludCBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uX2J5X2Jsb2NrKHN0cnVjdCBpMmNfZGV2
aWNlICpwcml2LAorCQkJCQkgICB1bmlvbiBpMmNfc21idXNfZGF0YSAqZGF0YSwKKwkJCQkJICAg
Y2hhciByZWFkX3dyaXRlLCBpbnQgaHdwZWMpCiB7CiAJaW50IGksIGxlbjsKIAlpbnQgc3RhdHVz
OwogCi0JaW5iX3AoU01CSFNUQ05UKHByaXYpKTsgLyogcmVzZXQgdGhlIGRhdGEgYnVmZmVyIGlu
ZGV4ICovCisJaW5iX3AoU01CSFNUQ05UKHByaXYpKTsJLyogcmVzZXQgdGhlIGRhdGEgYnVmZmVy
IGluZGV4ICovCiAKIAkvKiBVc2UgMzItYnl0ZSBidWZmZXIgdG8gcHJvY2VzcyB0aGlzIHRyYW5z
YWN0aW9uICovCiAJaWYgKHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1dSSVRFKSB7CkBAIC0yNTks
NyArMjc0LDEwIEBAIHN0YXRpYyBpbnQgaTgwMV9ibG9ja190cmFuc2FjdGlvbl9ieV9ibG9jayhz
dHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwgdW5pb24gaTJjX3NtCiAJCQlvdXRiX3AoZGF0YS0+Ymxv
Y2tbaSArIDFdLCBTTUJCTEtEQVQocHJpdikpOwogCX0KIAotCXN0YXR1cyA9IGk4MDFfdHJhbnNh
Y3Rpb24ocHJpdiwgSTgwMV9CTE9DS19EQVRBIHwgRU5BQkxFX0lOVDkgfCBJODAxX1BFQ19FTiAq
IGh3cGVjKTsKKwlzdGF0dXMgPQorCSAgICBpODAxX3RyYW5zYWN0aW9uKHByaXYsCisJCQkgICAg
IEk4MDFfQkxPQ0tfREFUQSB8IEVOQUJMRV9JTlQ5IHwgSTgwMV9QRUNfRU4gKgorCQkJICAgICBo
d3BlYyk7CiAJaWYgKHN0YXR1cykKIAkJcmV0dXJuIHN0YXR1czsKIApAQCAtMjc1LDcgKzI5Mywx
MCBAQCBzdGF0aWMgaW50IGk4MDFfYmxvY2tfdHJhbnNhY3Rpb25fYnlfYmxvY2soc3RydWN0IGky
Y19kZXZpY2UgKnByaXYsIHVuaW9uIGkyY19zbQogCXJldHVybiAwOwogfQogCi1zdGF0aWMgaW50
IGk4MDFfYmxvY2tfdHJhbnNhY3Rpb25fYnl0ZV9ieV9ieXRlKHN0cnVjdCBpMmNfZGV2aWNlICpw
cml2LCB1bmlvbiBpMmNfc21idXNfZGF0YSAqZGF0YSwgY2hhciByZWFkX3dyaXRlLCBpbnQgY29t
bWFuZCwgaW50IGh3cGVjKQorc3RhdGljIGludCBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uX2J5dGVf
YnlfYnl0ZShzdHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwKKwkJCQkJICAgICAgIHVuaW9uIGkyY19z
bWJ1c19kYXRhICpkYXRhLAorCQkJCQkgICAgICAgY2hhciByZWFkX3dyaXRlLCBpbnQgY29tbWFu
ZCwKKwkJCQkJICAgICAgIGludCBod3BlYykKIHsKIAlpbnQgaSwgbGVuOwogCWludCBzbWJjbWQ7
CkBAIC0zMDEsNyArMzIyLDggQEAgc3RhdGljIGludCBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uX2J5
dGVfYnlfYnl0ZShzdHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwgdW5pb24gaTIKIAkJCWVsc2UKIAkJ
CQlzbWJjbWQgPSBJODAxX0JMT0NLX0xBU1Q7CiAJCX0gZWxzZSB7Ci0JCQlpZiAoY29tbWFuZCA9
PSBJMkNfU01CVVNfSTJDX0JMT0NLX0RBVEEgJiYgcmVhZF93cml0ZSA9PSBJMkNfU01CVVNfUkVB
RCkKKwkJCWlmIChjb21tYW5kID09IEkyQ19TTUJVU19JMkNfQkxPQ0tfREFUQQorCQkJICAgICYm
IHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1JFQUQpCiAJCQkJc21iY21kID0gSTgwMV9JMkNfQkxP
Q0tfREFUQTsKIAkJCWVsc2UKIAkJCQlzbWJjbWQgPSBJODAxX0JMT0NLX0RBVEE7CkBAIC0zMDks
MjQgKzMzMSwzMCBAQCBzdGF0aWMgaW50IGk4MDFfYmxvY2tfdHJhbnNhY3Rpb25fYnl0ZV9ieV9i
eXRlKHN0cnVjdCBpMmNfZGV2aWNlICpwcml2LCB1bmlvbiBpMgogCQlvdXRiX3Aoc21iY21kIHwg
RU5BQkxFX0lOVDksIFNNQkhTVENOVChwcml2KSk7CiAKIAkJaWYgKGkgPT0gMSkKLQkJCW91dGJf
cChpbmIoU01CSFNUQ05UKHByaXYpKSB8IEk4MDFfU1RBUlQsIFNNQkhTVENOVChwcml2KSk7CisJ
CQlvdXRiX3AoaW5iKFNNQkhTVENOVChwcml2KSkgfCBJODAxX1NUQVJULAorCQkJICAgICAgIFNN
QkhTVENOVChwcml2KSk7CiAJCS8qIFdlIHdpbGwgYWx3YXlzIHdhaXQgZm9yIGEgZnJhY3Rpb24g
b2YgYSBzZWNvbmQhICovCiAJCXRpbWVvdXQgPSAwOwogCQlkbyB7CiAJCQl1c2xlZXBfcmFuZ2Uo
MjUwLCA1MDApOwogCQkJc3RhdHVzID0gaW5iX3AoU01CSFNUU1RTKHByaXYpKTsKLQkJfSB3aGls
ZSAoKCEoc3RhdHVzICYgU01CSFNUU1RTX0JZVEVfRE9ORSkpICYmICh0aW1lb3V0KysgPCBNQVhf
UkVUUklFUykpOworCQl9IHdoaWxlICgoIShzdGF0dXMgJiBTTUJIU1RTVFNfQllURV9ET05FKSkK
KwkJCSAmJiAodGltZW91dCsrIDwgTUFYX1JFVFJJRVMpKTsKIAogCQlyZXN1bHQgPSBpODAxX2No
ZWNrX3Bvc3QocHJpdiwgc3RhdHVzLCB0aW1lb3V0ID4gTUFYX1JFVFJJRVMpOwogCQlpZiAocmVz
dWx0IDwgMCkKIAkJCXJldHVybiByZXN1bHQ7Ci0JCWlmIChpID09IDEgJiYgcmVhZF93cml0ZSA9
PSBJMkNfU01CVVNfUkVBRCAmJiBjb21tYW5kICE9IEkyQ19TTUJVU19JMkNfQkxPQ0tfREFUQSkg
eworCQlpZiAoaSA9PSAxICYmIHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1JFQUQKKwkJICAgICYm
IGNvbW1hbmQgIT0gSTJDX1NNQlVTX0kyQ19CTE9DS19EQVRBKSB7CiAJCQlsZW4gPSBpbmJfcChT
TUJIU1REQVQwKHByaXYpKTsKIAkJCWlmIChsZW4gPCAxIHx8IGxlbiA+IEkyQ19TTUJVU19CTE9D
S19NQVgpIHsKLQkJCQlkZXZfZXJyKCZwcml2LT5hZGFwdGVyLmRldiwgIklsbGVnYWwgU01CdXMg
YmxvY2sgcmVhZCBzaXplICVkXG4iLCBsZW4pOworCQkJCWRldl9lcnIoJnByaXYtPmFkYXB0ZXIu
ZGV2LAorCQkJCQkiSWxsZWdhbCBTTUJ1cyBibG9jayByZWFkIHNpemUgJWRcbiIsCisJCQkJCWxl
bik7CiAJCQkJLyogUmVjb3ZlciAqLwogCQkJCXdoaWxlIChpbmJfcChTTUJIU1RTVFMocHJpdikp
ICYgU01CSFNUU1RTX0hPU1RfQlVTWSkKLQkJCQkJb3V0Yl9wKFNNQkhTVFNUU19CWVRFX0RPTkUs
IFNNQkhTVFNUUyhwcml2KSk7CisJCQkJCW91dGJfcChTTUJIU1RTVFNfQllURV9ET05FLAorCQkJ
CQkgICAgICAgU01CSFNUU1RTKHByaXYpKTsKIAkJCQlvdXRiX3AoU01CSFNUU1RTX0lOVFIsIFNN
QkhTVFNUUyhwcml2KSk7CiAJCQkJcmV0dXJuIC1FUFJPVE87CiAJCQl9CkBAIC0zNTQsNyArMzgy
LDkgQEAgc3RhdGljIGludCBpODAxX3NldF9ibG9ja19idWZmZXJfbW9kZShzdHJ1Y3QgaTJjX2Rl
dmljZSAqcHJpdikKIH0KIAogLyogQmxvY2sgdHJhbnNhY3Rpb24gZnVuY3Rpb24gKi8KLXN0YXRp
YyBpbnQgaTgwMV9ibG9ja190cmFuc2FjdGlvbihzdHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwgdW5p
b24gaTJjX3NtYnVzX2RhdGEgKmRhdGEsIGNoYXIgcmVhZF93cml0ZSwgaW50IGNvbW1hbmQsIGlu
dCBod3BlYykKK3N0YXRpYyBpbnQgaTgwMV9ibG9ja190cmFuc2FjdGlvbihzdHJ1Y3QgaTJjX2Rl
dmljZSAqcHJpdiwKKwkJCQkgIHVuaW9uIGkyY19zbWJ1c19kYXRhICpkYXRhLCBjaGFyIHJlYWRf
d3JpdGUsCisJCQkJICBpbnQgY29tbWFuZCwgaW50IGh3cGVjKQogewogCWludCByZXN1bHQgPSAw
OwogCS8vdW5zaWduZWQgY2hhciBob3N0YzsKQEAgLTM2MywxNSArMzkzLDE5IEBAIHN0YXRpYyBp
bnQgaTgwMV9ibG9ja190cmFuc2FjdGlvbihzdHJ1Y3QgaTJjX2RldmljZSAqcHJpdiwgdW5pb24g
aTJjX3NtYnVzX2RhdGEKIAkJaWYgKHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1dSSVRFKSB7CiAJ
CQkvKiBzZXQgSTJDX0VOIGJpdCBpbiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyICovCiAJCQkvL1RP
RE86IEZpZ3VyZSBvdXQgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGhlcmUuLi4KLQkJCS8vcGNpX3Jl
YWRfY29uZmlnX2J5dGUocHJpdi0+cGNpX2RldiwgU01CSFNUQ0ZHLCAmaG9zdGMpOwotCQkJLy9w
Y2lfd3JpdGVfY29uZmlnX2J5dGUocHJpdi0+cGNpX2RldiwgU01CSFNUQ0ZHLCBob3N0YyB8IFNN
QkhTVENGR19JMkNfRU4pOworCQkJLy9wY2lfcmVhZF9jb25maWdfYnl0ZShwcml2LT5wY2lfZGV2
LAorCQkJLy8gICAgICAgICAgICAgICAgICAgICBTTUJIU1RDRkcsICZob3N0Yyk7CisJCQkvLyAg
ICBwY2lfd3JpdGVfY29uZmlnX2J5dGUocHJpdi0+cGNpX2RldiwgU01CSFNUQ0ZHLAorCQkJLy8g
ICAgaG9zdGMgfCBTTUJIU1RDRkdfSTJDX0VOKTsKIAkJfSBlbHNlIGlmICghKHByaXYtPmZlYXR1
cmVzICYgRkVBVFVSRV9JMkNfQkxPQ0tfUkVBRCkpIHsKLQkJCWRldl9lcnIoJnByaXYtPmFkYXB0
ZXIuZGV2LCAiSTJDIGJsb2NrIHJlYWQgaXMgdW5zdXBwb3J0ZWQhXG4iKTsKKwkJCWRldl9lcnIo
JnByaXYtPmFkYXB0ZXIuZGV2LAorCQkJCSJJMkMgYmxvY2sgcmVhZCBpcyB1bnN1cHBvcnRlZCFc
biIpOwogCQkJcmV0dXJuIC1FT1BOT1RTVVBQOwogCQl9CiAJfQogCi0JaWYgKHJlYWRfd3JpdGUg
PT0gSTJDX1NNQlVTX1dSSVRFIHx8IGNvbW1hbmQgPT0gSTJDX1NNQlVTX0kyQ19CTE9DS19EQVRB
KSB7CisJaWYgKHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1dSSVRFCisJICAgIHx8IGNvbW1hbmQg
PT0gSTJDX1NNQlVTX0kyQ19CTE9DS19EQVRBKSB7CiAJCWlmIChkYXRhLT5ibG9ja1swXSA8IDEp
CiAJCQlkYXRhLT5ibG9ja1swXSA9IDE7CiAJCWlmIChkYXRhLT5ibG9ja1swXSA+IEkyQ19TTUJV
U19CTE9DS19NQVgpCkBAIC0zODQsMTMgKzQxOCwyMCBAQCBzdGF0aWMgaW50IGk4MDFfYmxvY2tf
dHJhbnNhY3Rpb24oc3RydWN0IGkyY19kZXZpY2UgKnByaXYsIHVuaW9uIGkyY19zbWJ1c19kYXRh
CiAJICogU01CdXMgKG5vdCBJMkMpIGJsb2NrIHRyYW5zYWN0aW9ucywgZXZlbiB0aG91Z2ggdGhl
IGRhdGFzaGVldAogCSAqIGRvZXNuJ3QgbWVudGlvbiB0aGlzIGxpbWl0YXRpb24uCiAJICovCi0J
aWYgKChwcml2LT5mZWF0dXJlcyAmIEZFQVRVUkVfQkxPQ0tfQlVGRkVSKSAmJiBjb21tYW5kICE9
IEkyQ19TTUJVU19JMkNfQkxPQ0tfREFUQSAmJiBpODAxX3NldF9ibG9ja19idWZmZXJfbW9kZShw
cml2KSA9PSAwKQotCQlyZXN1bHQgPSBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uX2J5X2Jsb2NrKHBy
aXYsIGRhdGEsIHJlYWRfd3JpdGUsIGh3cGVjKTsKKwlpZiAoKHByaXYtPmZlYXR1cmVzICYgRkVB
VFVSRV9CTE9DS19CVUZGRVIpCisJICAgICYmIGNvbW1hbmQgIT0gSTJDX1NNQlVTX0kyQ19CTE9D
S19EQVRBCisJICAgICYmIGk4MDFfc2V0X2Jsb2NrX2J1ZmZlcl9tb2RlKHByaXYpID09IDApCisJ
CXJlc3VsdCA9CisJCSAgICBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uX2J5X2Jsb2NrKHByaXYsIGRh
dGEsIHJlYWRfd3JpdGUsCisJCQkJCQkgICAgaHdwZWMpOwogCWVsc2UKLQkJcmVzdWx0ID0gaTgw
MV9ibG9ja190cmFuc2FjdGlvbl9ieXRlX2J5X2J5dGUocHJpdiwgZGF0YSwgcmVhZF93cml0ZSwg
Y29tbWFuZCwgaHdwZWMpOworCQlyZXN1bHQgPQorCQkgICAgaTgwMV9ibG9ja190cmFuc2FjdGlv
bl9ieXRlX2J5X2J5dGUocHJpdiwgZGF0YSwgcmVhZF93cml0ZSwKKwkJCQkJCQljb21tYW5kLCBo
d3BlYyk7CiAJaWYgKHJlc3VsdCA9PSAwICYmIGh3cGVjKQogCQlpODAxX3dhaXRfaHdwZWMocHJp
dik7Ci0JaWYgKGNvbW1hbmQgPT0gSTJDX1NNQlVTX0kyQ19CTE9DS19EQVRBICYmIHJlYWRfd3Jp
dGUgPT0gSTJDX1NNQlVTX1dSSVRFKSB7CisJaWYgKGNvbW1hbmQgPT0gSTJDX1NNQlVTX0kyQ19C
TE9DS19EQVRBCisJICAgICYmIHJlYWRfd3JpdGUgPT0gSTJDX1NNQlVTX1dSSVRFKSB7CiAJCS8q
IHJlc3RvcmUgc2F2ZWQgY29uZmlndXJhdGlvbiByZWdpc3RlciB2YWx1ZSAqLwogCQkvL1RPRE86
IEZpZ3VyZSBvdXQgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGhlcmUuLi4KIAkJLy9wY2lfd3JpdGVf
Y29uZmlnX2J5dGUocHJpdi0+cGNpX2RldiwgU01CSFNUQ0ZHLCBob3N0Yyk7CkBAIC0zOTksMzIg
KzQ0MCwzOCBAQCBzdGF0aWMgaW50IGk4MDFfYmxvY2tfdHJhbnNhY3Rpb24oc3RydWN0IGkyY19k
ZXZpY2UgKnByaXYsIHVuaW9uIGkyY19zbWJ1c19kYXRhCiB9CiAKIC8qIFJldHVybiBuZWdhdGl2
ZSBlcnJubyBvbiBlcnJvci4gKi8KLXN0YXRpYyBzMzIgaTgwMV9hY2Nlc3Moc3RydWN0IGkyY19h
ZGFwdGVyICphZGFwLCB1MTYgYWRkciwgdW5zaWduZWQgc2hvcnQgZmxhZ3MsIGNoYXIgcmVhZF93
cml0ZSwgdTggY29tbWFuZCwgaW50IHNpemUsIHVuaW9uIGkyY19zbWJ1c19kYXRhICpkYXRhKQor
c3RhdGljIHMzMiBpODAxX2FjY2VzcyhzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFkYXAsIHUxNiBhZGRy
LCB1bnNpZ25lZCBzaG9ydCBmbGFncywKKwkJICAgICAgIGNoYXIgcmVhZF93cml0ZSwgdTggY29t
bWFuZCwgaW50IHNpemUsCisJCSAgICAgICB1bmlvbiBpMmNfc21idXNfZGF0YSAqZGF0YSkKIHsK
IAlpbnQgaHdwZWM7CiAJaW50IGJsb2NrID0gMDsKIAlpbnQgcmV0LCB4YWN0ID0gMDsKIAlzdHJ1
Y3QgaTJjX2RldmljZSAqcHJpdiA9IGkyY19nZXRfYWRhcGRhdGEoYWRhcCk7CiAKLQlod3BlYyA9
IChwcml2LT5mZWF0dXJlcyAmIEZFQVRVUkVfU01CVVNfUEVDKSAmJiAoZmxhZ3MgJiBJMkNfQ0xJ
RU5UX1BFQykgJiYgc2l6ZSAhPSBJMkNfU01CVVNfUVVJQ0sgJiYgc2l6ZSAhPSBJMkNfU01CVVNf
STJDX0JMT0NLX0RBVEE7CisJaHdwZWMgPSAocHJpdi0+ZmVhdHVyZXMgJiBGRUFUVVJFX1NNQlVT
X1BFQykgJiYgKGZsYWdzICYgSTJDX0NMSUVOVF9QRUMpCisJICAgICYmIHNpemUgIT0gSTJDX1NN
QlVTX1FVSUNLICYmIHNpemUgIT0gSTJDX1NNQlVTX0kyQ19CTE9DS19EQVRBOwogCiAJc3dpdGNo
IChzaXplKSB7CiAJY2FzZSBJMkNfU01CVVNfUVVJQ0s6CiAJCWRldl9kYmcoJnByaXYtPmFkYXB0
ZXIuZGV2LCAiICBbYWNjXSBTTUJVU19RVUlDS1xuIik7Ci0JCW91dGJfcCgoKGFkZHIgJiAweDdm
KSA8PCAxKSB8IChyZWFkX3dyaXRlICYgMHgwMSksIFNNQkhTVEFERChwcml2KSk7CisJCW91dGJf
cCgoKGFkZHIgJiAweDdmKSA8PCAxKSB8IChyZWFkX3dyaXRlICYgMHgwMSksCisJCSAgICAgICBT
TUJIU1RBREQocHJpdikpOwogCQl4YWN0ID0gSTgwMV9RVUlDSzsKIAkJYnJlYWs7CiAJY2FzZSBJ
MkNfU01CVVNfQllURToKIAkJZGV2X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsICIgIFthY2NdIFNN
QlVTX0JZVEVcbiIpOwogCi0JCW91dGJfcCgoKGFkZHIgJiAweDdmKSA8PCAxKSB8IChyZWFkX3dy
aXRlICYgMHgwMSksIFNNQkhTVEFERChwcml2KSk7CisJCW91dGJfcCgoKGFkZHIgJiAweDdmKSA8
PCAxKSB8IChyZWFkX3dyaXRlICYgMHgwMSksCisJCSAgICAgICBTTUJIU1RBREQocHJpdikpOwog
CQlpZiAocmVhZF93cml0ZSA9PSBJMkNfU01CVVNfV1JJVEUpCiAJCQlvdXRiX3AoY29tbWFuZCwg
U01CSFNUQ01EKHByaXYpKTsKIAkJeGFjdCA9IEk4MDFfQllURTsKIAkJYnJlYWs7CiAJY2FzZSBJ
MkNfU01CVVNfQllURV9EQVRBOgogCQlkZXZfZGJnKCZwcml2LT5hZGFwdGVyLmRldiwgIiAgW2Fj
Y10gU01CVVNfQllURV9EQVRBXG4iKTsKLQkJb3V0Yl9wKCgoYWRkciAmIDB4N2YpIDw8IDEpIHwg
KHJlYWRfd3JpdGUgJiAweDAxKSwgU01CSFNUQUREKHByaXYpKTsKKwkJb3V0Yl9wKCgoYWRkciAm
IDB4N2YpIDw8IDEpIHwgKHJlYWRfd3JpdGUgJiAweDAxKSwKKwkJICAgICAgIFNNQkhTVEFERChw
cml2KSk7CiAJCW91dGJfcChjb21tYW5kLCBTTUJIU1RDTUQocHJpdikpOwogCQlpZiAocmVhZF93
cml0ZSA9PSBJMkNfU01CVVNfV1JJVEUpCiAJCQlvdXRiX3AoZGF0YS0+Ynl0ZSwgU01CSFNUREFU
MChwcml2KSk7CkBAIC00MzIsNyArNDc5LDggQEAgc3RhdGljIHMzMiBpODAxX2FjY2VzcyhzdHJ1
Y3QgaTJjX2FkYXB0ZXIgKmFkYXAsIHUxNiBhZGRyLCB1bnNpZ25lZCBzaG9ydCBmbGFncywKIAkJ
YnJlYWs7CiAJY2FzZSBJMkNfU01CVVNfV09SRF9EQVRBOgogCQlkZXZfZGJnKCZwcml2LT5hZGFw
dGVyLmRldiwgIiAgW2FjY10gU01CVVNfV09SRF9EQVRBXG4iKTsKLQkJb3V0Yl9wKCgoYWRkciAm
IDB4N2YpIDw8IDEpIHwgKHJlYWRfd3JpdGUgJiAweDAxKSwgU01CSFNUQUREKHByaXYpKTsKKwkJ
b3V0Yl9wKCgoYWRkciAmIDB4N2YpIDw8IDEpIHwgKHJlYWRfd3JpdGUgJiAweDAxKSwKKwkJICAg
ICAgIFNNQkhTVEFERChwcml2KSk7CiAJCW91dGJfcChjb21tYW5kLCBTTUJIU1RDTUQocHJpdikp
OwogCQlpZiAocmVhZF93cml0ZSA9PSBJMkNfU01CVVNfV1JJVEUpIHsKIAkJCW91dGJfcChkYXRh
LT53b3JkICYgMHhmZiwgU01CSFNUREFUMChwcml2KSk7CkBAIC00NDIsNyArNDkwLDggQEAgc3Rh
dGljIHMzMiBpODAxX2FjY2VzcyhzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFkYXAsIHUxNiBhZGRyLCB1
bnNpZ25lZCBzaG9ydCBmbGFncywKIAkJYnJlYWs7CiAJY2FzZSBJMkNfU01CVVNfQkxPQ0tfREFU
QToKIAkJZGV2X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsICIgIFthY2NdIFNNQlVTX0JMT0NLX0RB
VEFcbiIpOwotCQlvdXRiX3AoKChhZGRyICYgMHg3ZikgPDwgMSkgfCAocmVhZF93cml0ZSAmIDB4
MDEpLCBTTUJIU1RBREQocHJpdikpOworCQlvdXRiX3AoKChhZGRyICYgMHg3ZikgPDwgMSkgfCAo
cmVhZF93cml0ZSAmIDB4MDEpLAorCQkgICAgICAgU01CSFNUQUREKHByaXYpKTsKIAkJb3V0Yl9w
KGNvbW1hbmQsIFNNQkhTVENNRChwcml2KSk7CiAJCWJsb2NrID0gMTsKIAkJYnJlYWs7CkBAIC00
NjMsMjIgKzUxMiwyNSBAQCBzdGF0aWMgczMyIGk4MDFfYWNjZXNzKHN0cnVjdCBpMmNfYWRhcHRl
ciAqYWRhcCwgdTE2IGFkZHIsIHVuc2lnbmVkIHNob3J0IGZsYWdzLAogCQlibG9jayA9IDE7CiAJ
CWJyZWFrOwogCWRlZmF1bHQ6Ci0JCWRldl9kYmcoJnByaXYtPmFkYXB0ZXIuZGV2LCAiICBbYWNj
XSBVbnN1cHBvcnRlZCB0cmFuc2FjdGlvbiAlZFxuIiwgc2l6ZSk7CisJCWRldl9kYmcoJnByaXYt
PmFkYXB0ZXIuZGV2LAorCQkJIiAgW2FjY10gVW5zdXBwb3J0ZWQgdHJhbnNhY3Rpb24gJWRcbiIs
IHNpemUpOwogCQlyZXR1cm4gLUVPUE5PVFNVUFA7CiAJfQogCi0JaWYgKGh3cGVjKSB7IC8qIGVu
YWJsZS9kaXNhYmxlIGhhcmR3YXJlIFBFQyAqLworCWlmIChod3BlYykgewkJLyogZW5hYmxlL2Rp
c2FibGUgaGFyZHdhcmUgUEVDICovCiAJCWRldl9kYmcoJnByaXYtPmFkYXB0ZXIuZGV2LCAiICBb
YWNjXSBod3BlYzogeWVzXG4iKTsKIAkJb3V0Yl9wKGluYl9wKFNNQkFVWENUTChwcml2KSkgfCBT
TUJBVVhDVExfQ1JDLCBTTUJBVVhDVEwocHJpdikpOwogCX0gZWxzZSB7CiAJCWRldl9kYmcoJnBy
aXYtPmFkYXB0ZXIuZGV2LCAiICBbYWNjXSBod3BlYzogbm9cbiIpOwotCQlvdXRiX3AoaW5iX3Ao
U01CQVVYQ1RMKHByaXYpKSAmICh+U01CQVVYQ1RMX0NSQyksIFNNQkFVWENUTChwcml2KSk7CisJ
CW91dGJfcChpbmJfcChTTUJBVVhDVEwocHJpdikpICYgKH5TTUJBVVhDVExfQ1JDKSwKKwkJICAg
ICAgIFNNQkFVWENUTChwcml2KSk7CiAJfQogCiAJaWYgKGJsb2NrKSB7CiAJCS8vcmV0ID0gMDsK
IAkJZGV2X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsICIgIFthY2NdIGJsb2NrOiB5ZXNcbiIpOwot
CQlyZXQgPSBpODAxX2Jsb2NrX3RyYW5zYWN0aW9uKHByaXYsIGRhdGEsIHJlYWRfd3JpdGUsIHNp
emUsIGh3cGVjKTsKKwkJcmV0ID0KKwkJICAgIGk4MDFfYmxvY2tfdHJhbnNhY3Rpb24ocHJpdiwg
ZGF0YSwgcmVhZF93cml0ZSwgc2l6ZSwgaHdwZWMpOwogCX0gZWxzZSB7CiAJCWRldl9kYmcoJnBy
aXYtPmFkYXB0ZXIuZGV2LCAiICBbYWNjXSBibG9jazogbm9cbiIpOwogCQlyZXQgPSBpODAxX3Ry
YW5zYWN0aW9uKHByaXYsIHhhY3QgfCBFTkFCTEVfSU5UOSk7CkBAIC00OTAsNyArNTQyLDggQEAg
c3RhdGljIHMzMiBpODAxX2FjY2VzcyhzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFkYXAsIHUxNiBhZGRy
LCB1bnNpZ25lZCBzaG9ydCBmbGFncywKIAkgKi8KIAlpZiAoaHdwZWMgfHwgYmxvY2spIHsKIAkJ
ZGV2X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsICIgIFthY2NdIGh3cGVjIHx8IGJsb2NrXG4iKTsK
LQkJb3V0Yl9wKGluYl9wKFNNQkFVWENUTChwcml2KSkgJiB+KFNNQkFVWENUTF9DUkMgfCBTTUJB
VVhDVExfRTMyQiksIFNNQkFVWENUTChwcml2KSk7CisJCW91dGJfcChpbmJfcChTTUJBVVhDVEwo
cHJpdikpICYKKwkJICAgICAgIH4oU01CQVVYQ1RMX0NSQyB8IFNNQkFVWENUTF9FMzJCKSwgU01C
QVVYQ1RMKHByaXYpKTsKIAl9CiAJaWYgKGJsb2NrKSB7CiAJCWRldl9kYmcoJnByaXYtPmFkYXB0
ZXIuZGV2LCAiICBbYWNjXSBibG9ja1xuIik7CkBAIC01MDEsMTkgKzU1NCwyMiBAQCBzdGF0aWMg
czMyIGk4MDFfYWNjZXNzKHN0cnVjdCBpMmNfYWRhcHRlciAqYWRhcCwgdTE2IGFkZHIsIHVuc2ln
bmVkIHNob3J0IGZsYWdzLAogCQlyZXR1cm4gcmV0OwogCX0KIAlpZiAoKHJlYWRfd3JpdGUgPT0g
STJDX1NNQlVTX1dSSVRFKSB8fCAoeGFjdCA9PSBJODAxX1FVSUNLKSkgewotCQlkZXZfZGJnKCZw
cml2LT5hZGFwdGVyLmRldiwgIiAgW2FjY10gSTJDX1NNQlVTX1dSSVRFIHx8IEk4MDFfUVVJQ0sg
IC0+IHJldCAwXG4iKTsKKwkJZGV2X2RiZygmcHJpdi0+YWRhcHRlci5kZXYsCisJCQkiICBbYWNj
XSBJMkNfU01CVVNfV1JJVEUgfHwgSTgwMV9RVUlDSyAgLT4gcmV0IDBcbiIpOwogCQlyZXR1cm4g
MDsKIAl9CiAKIAlzd2l0Y2ggKHhhY3QgJiAweDdmKSB7Ci0JY2FzZSBJODAxX0JZVEU6ICAvKiBS
ZXN1bHQgcHV0IGluIFNNQkhTVERBVDAgKi8KKwljYXNlIEk4MDFfQllURToJLyogUmVzdWx0IHB1
dCBpbiBTTUJIU1REQVQwICovCiAJY2FzZSBJODAxX0JZVEVfREFUQToKLQkJZGV2X2RiZygmcHJp
di0+YWRhcHRlci5kZXYsICIgIFthY2NdIEk4MDFfQllURSBvciBJODAxX0JZVEVfREFUQVxuIik7
CisJCWRldl9kYmcoJnByaXYtPmFkYXB0ZXIuZGV2LAorCQkJIiAgW2FjY10gSTgwMV9CWVRFIG9y
IEk4MDFfQllURV9EQVRBXG4iKTsKIAkJZGF0YS0+Ynl0ZSA9IGluYl9wKFNNQkhTVERBVDAocHJp
dikpOwogCQlicmVhazsKIAljYXNlIEk4MDFfV09SRF9EQVRBOgogCQlkZXZfZGJnKCZwcml2LT5h
ZGFwdGVyLmRldiwgIiAgW2FjY10gSTgwMV9XT1JEX0RBVEFcbiIpOwotCQlkYXRhLT53b3JkID0g
aW5iX3AoU01CSFNUREFUMChwcml2KSkgKyAoaW5iX3AoU01CSFNUREFUMShwcml2KSkgPDwgOCk7
CisJCWRhdGEtPndvcmQgPQorCQkgICAgaW5iX3AoU01CSFNUREFUMChwcml2KSkgKyAoaW5iX3Ao
U01CSFNUREFUMShwcml2KSkgPDwgOCk7CiAJCWJyZWFrOwogCX0KIAlyZXR1cm4gMDsKQEAgLTU1
OCwxMyArNjE0LDE0IEBAIHN0YXRpYyB1MzIgaTgwMV9mdW5jKHN0cnVjdCBpMmNfYWRhcHRlciAq
YWRhcHRlcikKIAkJSTJDX0ZVTkNfU01CVVNfV09SRF9EQVRBICAgICAgICAgfCAvKiBfUkVBRF9X
T1JEX0RBVEEgIF9XUklURV9XT1JEX0RBVEEgKi8KIAkJSTJDX0ZVTkNfU01CVVNfQkxPQ0tfREFU
QSAgICAgICAgfCAvKiBfUkVBRF9CTE9DS19EQVRBICBfV1JJVEVfQkxPQ0tfREFUQSAqLwogCQkh
STJDX0ZVTkNfU01CVVNfSTJDX0JMT0NLICAgICAgICB8IC8qIF9SRUFEX0kyQ19CTE9DSyAgX1dS
SVRFX0kyQ19CTE9DSyAqLwotCQkhSTJDX0ZVTkNfU01CVVNfRU1VTDsgICAgICAgICAgICAgIC8q
IF9RVUlDSyAgX0JZVEUgIF9CWVRFX0RBVEEgIF9XT1JEX0RBVEEgIF9QUk9DX0NBTEwgIF9XUklU
RV9CTE9DS19EQVRBICBfSTJDX0JMT0NLIF9QRUMgKi8KKwkJLyogX1FVSUNLICBfQllURSAgX0JZ
VEVfREFUQSAgX1dPUkRfREFUQSAgX1BST0NfQ0FMTCAgX1dSSVRFX0JMT0NLX0RBVEEgIF9JMkNf
QkxPQ0sgX1BFQyA6ICovCisJCSFJMkNfRlVOQ19TTUJVU19FTVVMOwogCXJldHVybiBmOwogfQog
CiBzdGF0aWMgY29uc3Qgc3RydWN0IGkyY19hbGdvcml0aG0gc21idXNfYWxnb3JpdGhtID0gewot
CS5zbWJ1c194ZmVyICAgICA9IGk4MDFfYWNjZXNzLAotCS5mdW5jdGlvbmFsaXR5ICA9IGk4MDFf
ZnVuYywKKwkuc21idXNfeGZlciA9IGk4MDFfYWNjZXNzLAorCS5mdW5jdGlvbmFsaXR5ID0gaTgw
MV9mdW5jLAogfTsKIAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCkBAIC02MTAs
OCArNjY3LDEwIEBAIHN0YXRpYyBpbnQgcGkyY19wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwbGRldikKIAkvKiBSZXRyeSB1cCB0byAzIHRpbWVzIG9uIGxvc3QgYXJiaXRyYXRpb24gKi8K
IAlwcml2LT5hZGFwdGVyLnJldHJpZXMgPSAzOwogCi0JLy9zbnByaW50Zihwcml2LT5hZGFwdGVy
Lm5hbWUsIHNpemVvZihwcml2LT5hZGFwdGVyLm5hbWUpLCAiRmFrZSBTTUJ1cyBJODAxIGFkYXB0
ZXIgYXQgJTA0bHgiLCBwcml2LT5zbWJhKTsKLQlzbnByaW50Zihwcml2LT5hZGFwdGVyLm5hbWUs
IHNpemVvZihwcml2LT5hZGFwdGVyLm5hbWUpLCAiRmFrZSBTTUJ1cyBJODAxIGFkYXB0ZXIiKTsK
KwkvL3NucHJpbnRmKHByaXYtPmFkYXB0ZXIubmFtZSwgc2l6ZW9mKHByaXYtPmFkYXB0ZXIubmFt
ZSksCisJLy8gICAgICAgICJGYWtlIFNNQnVzIEk4MDEgYWRhcHRlciBhdCAlMDRseCIsIHByaXYt
PnNtYmEpOworCXNucHJpbnRmKHByaXYtPmFkYXB0ZXIubmFtZSwgc2l6ZW9mKHByaXYtPmFkYXB0
ZXIubmFtZSksCisJCSAiRmFrZSBTTUJ1cyBJODAxIGFkYXB0ZXIiKTsKIAogCWVyciA9IGkyY19h
ZGRfYWRhcHRlcigmcHJpdi0+YWRhcHRlcik7CiAJaWYgKGVycikgewpAQCAtNjQxLDEwICs3MDAs
MTAgQEAgc3RhdGljIGludCBwaTJjX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRl
dikKIH0KIAogc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgaTJjX3BsYXRfZHJpdmVyX2kg
PSB7Ci0JLnByb2JlICAgICAgPSBwaTJjX3Byb2JlLAotCS5yZW1vdmUgICAgID0gcGkyY19yZW1v
dmUsCi0JLmRyaXZlciAgICAgPSB7Ci0JCS5uYW1lICAgPSBLUF9EUklWRVJfTkFNRV9JMkMsCisJ
LnByb2JlID0gcGkyY19wcm9iZSwKKwkucmVtb3ZlID0gcGkyY19yZW1vdmUsCisJLmRyaXZlciA9
IHsKKwkJLm5hbWUgPSBLUF9EUklWRVJfTkFNRV9JMkMsCiAJfSwKIH07CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvc3RhZ2luZy9rcGMyMDAwL2twYzIwMDBfc3BpLmMgYi9kcml2ZXJzL3N0YWdpbmcv
a3BjMjAwMC9rcGMyMDAwX3NwaS5jCmluZGV4IDM1YWMxZDcwNzBiMy4uNTQzYTMyZThiN2VmIDEw
MDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGMyMDAwX3NwaS5jCisrKyBiL2Ry
aXZlcnMvc3RhZ2luZy9rcGMyMDAwL2twYzIwMDBfc3BpLmMKQEAgLTMwLDE5ICszMCwxOSBAQAog
I2luY2x1ZGUgImtwYy5oIgogCiBzdGF0aWMgc3RydWN0IG10ZF9wYXJ0aXRpb24gcDJrcjBfc3Bp
MF9wYXJ0c1tdID0gewotCXsgLm5hbWUgPSAiU0xPVF8wIiwJLnNpemUgPSA3Nzk4Nzg0LAkJLm9m
ZnNldCA9IDAsICAgICAgICAgICAgICAgIH0sCi0JeyAubmFtZSA9ICJTTE9UXzEiLAkuc2l6ZSA9
IDc3OTg3ODQsCQkub2Zmc2V0ID0gTVREUEFSVF9PRlNfTlhUQkxLfSwKLQl7IC5uYW1lID0gIlNM
T1RfMiIsCS5zaXplID0gNzc5ODc4NCwJCS5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRCTEt9LAot
CXsgLm5hbWUgPSAiU0xPVF8zIiwJLnNpemUgPSA3Nzk4Nzg0LAkJLm9mZnNldCA9IE1URFBBUlRf
T0ZTX05YVEJMS30sCi0JeyAubmFtZSA9ICJDUzBfRVhUUkEiLAkuc2l6ZSA9IE1URFBBUlRfU0la
X0ZVTEwsCS5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRCTEt9LAorCXsgLm5hbWUgPSAiU0xPVF8w
IiwJLnNpemUgPSA3Nzk4Nzg0LCAgICAgICAgICAub2Zmc2V0ID0gMCwgICAgICAgICAgICAgICAg
fSwKKwl7IC5uYW1lID0gIlNMT1RfMSIsCS5zaXplID0gNzc5ODc4NCwgICAgICAgICAgLm9mZnNl
dCA9IE1URFBBUlRfT0ZTX05YVEJMS30sCisJeyAubmFtZSA9ICJTTE9UXzIiLAkuc2l6ZSA9IDc3
OTg3ODQsICAgICAgICAgIC5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRCTEt9LAorCXsgLm5hbWUg
PSAiU0xPVF8zIiwJLnNpemUgPSA3Nzk4Nzg0LCAgICAgICAgICAub2Zmc2V0ID0gTVREUEFSVF9P
RlNfTlhUQkxLfSwKKwl7IC5uYW1lID0gIkNTMF9FWFRSQSIsCS5zaXplID0gTVREUEFSVF9TSVpf
RlVMTCwgLm9mZnNldCA9IE1URFBBUlRfT0ZTX05YVEJMS30sCiB9OwogCiBzdGF0aWMgc3RydWN0
IG10ZF9wYXJ0aXRpb24gcDJrcjBfc3BpMV9wYXJ0c1tdID0gewotCXsgLm5hbWUgPSAiU0xPVF80
IiwJLnNpemUgPSA3Nzk4Nzg0LAkJLm9mZnNldCA9IDAsICAgICAgICAgICAgICAgIH0sCi0JeyAu
bmFtZSA9ICJTTE9UXzUiLAkuc2l6ZSA9IDc3OTg3ODQsCQkub2Zmc2V0ID0gTVREUEFSVF9PRlNf
TlhUQkxLfSwKLQl7IC5uYW1lID0gIlNMT1RfNiIsCS5zaXplID0gNzc5ODc4NCwJCS5vZmZzZXQg
PSBNVERQQVJUX09GU19OWFRCTEt9LAotCXsgLm5hbWUgPSAiU0xPVF83IiwJLnNpemUgPSA3Nzk4
Nzg0LAkJLm9mZnNldCA9IE1URFBBUlRfT0ZTX05YVEJMS30sCi0JeyAubmFtZSA9ICJDUzFfRVhU
UkEiLAkuc2l6ZSA9IE1URFBBUlRfU0laX0ZVTEwsCS5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRC
TEt9LAorCXsgLm5hbWUgPSAiU0xPVF80IiwJLnNpemUgPSA3Nzk4Nzg0LAkgIC5vZmZzZXQgPSAw
LCAgICAgICAgICAgICAgICB9LAorCXsgLm5hbWUgPSAiU0xPVF81IiwJLnNpemUgPSA3Nzk4Nzg0
LAkgIC5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRCTEt9LAorCXsgLm5hbWUgPSAiU0xPVF82IiwJ
LnNpemUgPSA3Nzk4Nzg0LAkgIC5vZmZzZXQgPSBNVERQQVJUX09GU19OWFRCTEt9LAorCXsgLm5h
bWUgPSAiU0xPVF83IiwJLnNpemUgPSA3Nzk4Nzg0LAkgIC5vZmZzZXQgPSBNVERQQVJUX09GU19O
WFRCTEt9LAorCXsgLm5hbWUgPSAiQ1MxX0VYVFJBIiwJLnNpemUgPSBNVERQQVJUX1NJWl9GVUxM
LCAub2Zmc2V0ID0gTVREUEFSVF9PRlNfTlhUQkxLfSwKIH07CiAKIHN0YXRpYyBzdHJ1Y3QgZmxh
c2hfcGxhdGZvcm1fZGF0YSBwMmtyMF9zcGkwX3BkYXRhID0gewpAQCAtNTAsNiArNTAsNyBAQCBz
dGF0aWMgc3RydWN0IGZsYXNoX3BsYXRmb3JtX2RhdGEgcDJrcjBfc3BpMF9wZGF0YSA9IHsKIAku
bnJfcGFydHMgPQlBUlJBWV9TSVpFKHAya3IwX3NwaTBfcGFydHMpLAogCS5wYXJ0cyA9CXAya3Iw
X3NwaTBfcGFydHMsCiB9OworCiBzdGF0aWMgc3RydWN0IGZsYXNoX3BsYXRmb3JtX2RhdGEgcDJr
cjBfc3BpMV9wZGF0YSA9IHsKIAkubmFtZSA9CQkiU1BJMSIsCiAJLm5yX3BhcnRzID0JQVJSQVlf
U0laRShwMmtyMF9zcGkxX3BhcnRzKSwKQEAgLTc2LDExICs3NywxMSBAQCBzdGF0aWMgc3RydWN0
IHNwaV9ib2FyZF9pbmZvIHAya3IwX2JvYXJkX2luZm9bXSA9IHsKIC8qKioqKioqKioqKioqKioK
ICAqIFNQSSBEZWZpbmVzICoKICAqKioqKioqKioqKioqKiovCi0jZGVmaW5lIEtQX1NQSV9SRUdf
Q09ORklHIDB4MCAvKiAweDAwICovCi0jZGVmaW5lIEtQX1NQSV9SRUdfU1RBVFVTIDB4MSAvKiAw
eDA4ICovCi0jZGVmaW5lIEtQX1NQSV9SRUdfRkZDVFJMIDB4MiAvKiAweDEwICovCi0jZGVmaW5l
IEtQX1NQSV9SRUdfVFhEQVRBIDB4MyAvKiAweDE4ICovCi0jZGVmaW5lIEtQX1NQSV9SRUdfUlhE
QVRBIDB4NCAvKiAweDIwICovCisjZGVmaW5lIEtQX1NQSV9SRUdfQ09ORklHIDB4MAkvKiAweDAw
ICovCisjZGVmaW5lIEtQX1NQSV9SRUdfU1RBVFVTIDB4MQkvKiAweDA4ICovCisjZGVmaW5lIEtQ
X1NQSV9SRUdfRkZDVFJMIDB4MgkvKiAweDEwICovCisjZGVmaW5lIEtQX1NQSV9SRUdfVFhEQVRB
IDB4MwkvKiAweDE4ICovCisjZGVmaW5lIEtQX1NQSV9SRUdfUlhEQVRBIDB4NAkvKiAweDIwICov
CiAKICNkZWZpbmUgS1BfU1BJX0NMSyAgICAgICAgICAgNDgwMDAwMDAKICNkZWZpbmUgS1BfU1BJ
X01BWF9GSUZPREVQVEggNjQKQEAgLTEwMiwxNCArMTAzLDE0IEBAIHN0YXRpYyBzdHJ1Y3Qgc3Bp
X2JvYXJkX2luZm8gcDJrcjBfYm9hcmRfaW5mb1tdID0gewogICogU1BJIFN0cnVjdHVyZXMgKgog
ICoqKioqKioqKioqKioqKioqKi8KIHN0cnVjdCBrcF9zcGkgewotCXN0cnVjdCBzcGlfbWFzdGVy
ICAqbWFzdGVyOwotCXU2NCBfX2lvbWVtICAgICAgICAqYmFzZTsKLQlzdHJ1Y3QgZGV2aWNlICAg
ICAgKmRldjsKKwlzdHJ1Y3Qgc3BpX21hc3RlciAqbWFzdGVyOworCXU2NCBfX2lvbWVtICpiYXNl
OworCXN0cnVjdCBkZXZpY2UgKmRldjsKIH07CiAKIHN0cnVjdCBrcF9zcGlfY29udHJvbGxlcl9z
dGF0ZSB7Ci0Jdm9pZCBfX2lvbWVtICAgKmJhc2U7Ci0JczY0ICAgICAgICAgICAgIGNvbmZfY2Fj
aGU7CisJdm9pZCBfX2lvbWVtICpiYXNlOworCXM2NCBjb25mX2NhY2hlOwogfTsKIAogdW5pb24g
a3Bfc3BpX2NvbmZpZyB7CkBAIC0xNTgsOCArMTU5LDcgQEAgdW5pb24ga3Bfc3BpX2ZmY3RybCB7
CiAvKioqKioqKioqKioqKioqCiAgKiBTUEkgSGVscGVycyAqCiAgKioqKioqKioqKioqKioqLwot
CXN0YXRpYyBpbmxpbmUgdTY0Ci1rcF9zcGlfcmVhZF9yZWcoc3RydWN0IGtwX3NwaV9jb250cm9s
bGVyX3N0YXRlICpjcywgaW50IGlkeCkKK3N0YXRpYyBpbmxpbmUgdTY0IGtwX3NwaV9yZWFkX3Jl
ZyhzdHJ1Y3Qga3Bfc3BpX2NvbnRyb2xsZXJfc3RhdGUgKmNzLCBpbnQgaWR4KQogewogCXU2NCBf
X2lvbWVtICphZGRyID0gY3MtPmJhc2U7CiAJdTY0IHZhbDsKQEAgLTE3Miw3ICsxNzIsNyBAQCBr
cF9zcGlfcmVhZF9yZWcoc3RydWN0IGtwX3NwaV9jb250cm9sbGVyX3N0YXRlICpjcywgaW50IGlk
eCkKIAlyZXR1cm4gdmFsOwogfQogCi0Jc3RhdGljIGlubGluZSB2b2lkCitzdGF0aWMgaW5saW5l
IHZvaWQKIGtwX3NwaV93cml0ZV9yZWcoc3RydWN0IGtwX3NwaV9jb250cm9sbGVyX3N0YXRlICpj
cywgaW50IGlkeCwgdTY0IHZhbCkKIHsKIAl1NjQgX19pb21lbSAqYWRkciA9IGNzLT5iYXNlOwpA
QCAtMTgzLDcgKzE4Myw3IEBAIGtwX3NwaV93cml0ZV9yZWcoc3RydWN0IGtwX3NwaV9jb250cm9s
bGVyX3N0YXRlICpjcywgaW50IGlkeCwgdTY0IHZhbCkKIAkJY3MtPmNvbmZfY2FjaGUgPSB2YWw7
CiB9CiAKLQlzdGF0aWMgaW50CitzdGF0aWMgaW50CiBrcF9zcGlfd2FpdF9mb3JfcmVnX2JpdChz
dHJ1Y3Qga3Bfc3BpX2NvbnRyb2xsZXJfc3RhdGUgKmNzLCBpbnQgaWR4LAogCQkJdW5zaWduZWQg
bG9uZyBiaXQpCiB7CkBAIC0yMDIsNyArMjAyLDcgQEAga3Bfc3BpX3dhaXRfZm9yX3JlZ19iaXQo
c3RydWN0IGtwX3NwaV9jb250cm9sbGVyX3N0YXRlICpjcywgaW50IGlkeCwKIAlyZXR1cm4gMDsK
IH0KIAotCXN0YXRpYyB1bnNpZ25lZAorc3RhdGljIHVuc2lnbmVkCiBrcF9zcGlfdHhyeF9waW8o
c3RydWN0IHNwaV9kZXZpY2UgKnNwaWRldiwgc3RydWN0IHNwaV90cmFuc2ZlciAqdHJhbnNmZXIp
CiB7CiAJc3RydWN0IGtwX3NwaV9jb250cm9sbGVyX3N0YXRlICpjcyA9IHNwaWRldi0+Y29udHJv
bGxlcl9zdGF0ZTsKQEAgLTIxMSwxMiArMjExLDEyIEBAIGtwX3NwaV90eHJ4X3BpbyhzdHJ1Y3Qg
c3BpX2RldmljZSAqc3BpZGV2LCBzdHJ1Y3Qgc3BpX3RyYW5zZmVyICp0cmFuc2ZlcikKIAogCWlu
dCBpOwogCWludCByZXM7Ci0JdTggKnJ4ICAgICAgID0gdHJhbnNmZXItPnJ4X2J1ZjsKKwl1OCAq
cnggPSB0cmFuc2Zlci0+cnhfYnVmOwogCWNvbnN0IHU4ICp0eCA9IHRyYW5zZmVyLT50eF9idWY7
CiAJaW50IHByb2Nlc3NlZCA9IDA7CiAKIAlpZiAodHgpIHsKLQkJZm9yIChpID0gMCA7IGkgPCBj
IDsgaSsrKSB7CisJCWZvciAoaSA9IDA7IGkgPCBjOyBpKyspIHsKIAkJCWNoYXIgdmFsID0gKnR4
Kys7CiAKIAkJCXJlcyA9IGtwX3NwaV93YWl0X2Zvcl9yZWdfYml0KGNzLCBLUF9TUElfUkVHX1NU
QVRVUywKQEAgLTIyNyw5ICsyMjcsOCBAQCBrcF9zcGlfdHhyeF9waW8oc3RydWN0IHNwaV9kZXZp
Y2UgKnNwaWRldiwgc3RydWN0IHNwaV90cmFuc2ZlciAqdHJhbnNmZXIpCiAJCQlrcF9zcGlfd3Jp
dGVfcmVnKGNzLCBLUF9TUElfUkVHX1RYREFUQSwgdmFsKTsKIAkJCXByb2Nlc3NlZCsrOwogCQl9
Ci0JfQotCWVsc2UgaWYgKHJ4KSB7Ci0JCWZvciAoaSA9IDAgOyBpIDwgYyA7IGkrKykgeworCX0g
ZWxzZSBpZiAocngpIHsKKwkJZm9yIChpID0gMDsgaSA8IGM7IGkrKykgewogCQkJY2hhciB0ZXN0
ID0gMDsKIAogCQkJa3Bfc3BpX3dyaXRlX3JlZyhjcywgS1BfU1BJX1JFR19UWERBVEEsIDB4MDAp
OwpAQCAtMjUwLDE1ICsyNDksMTQgQEAga3Bfc3BpX3R4cnhfcGlvKHN0cnVjdCBzcGlfZGV2aWNl
ICpzcGlkZXYsIHN0cnVjdCBzcGlfdHJhbnNmZXIgKnRyYW5zZmVyKQogCQkvL1RocyBoYXMgbmV2
ZXIgaGFwcGVuZWQgaW4gcHJhY3RpY2UgdGhvdWdoLi4uCiAJfQogCi1vdXQ6Cisgb3V0OgogCXJl
dHVybiBwcm9jZXNzZWQ7CiB9CiAKIC8qKioqKioqKioqKioqKioqKgogICogU1BJIEZ1bmN0aW9u
cyAqCiAgKioqKioqKioqKioqKioqKiovCi0Jc3RhdGljIGludAota3Bfc3BpX3NldHVwKHN0cnVj
dCBzcGlfZGV2aWNlICpzcGlkZXYpCitzdGF0aWMgaW50IGtwX3NwaV9zZXR1cChzdHJ1Y3Qgc3Bp
X2RldmljZSAqc3BpZGV2KQogewogCXVuaW9uIGtwX3NwaV9jb25maWcgc2M7CiAJc3RydWN0IGtw
X3NwaSAqa3BzcGkgPSBzcGlfbWFzdGVyX2dldF9kZXZkYXRhKHNwaWRldi0+bWFzdGVyKTsKQEAg
LTI4NSwxMiArMjgzLDEyIEBAIGtwX3NwaV9zZXR1cChzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpZGV2
KQogCXJldHVybiAwOwogfQogCi0Jc3RhdGljIGludAorc3RhdGljIGludAoga3Bfc3BpX3RyYW5z
ZmVyX29uZV9tZXNzYWdlKHN0cnVjdCBzcGlfbWFzdGVyICptYXN0ZXIsIHN0cnVjdCBzcGlfbWVz
c2FnZSAqbSkKIHsKIAlzdHJ1Y3Qga3Bfc3BpX2NvbnRyb2xsZXJfc3RhdGUgKmNzOwotCXN0cnVj
dCBzcGlfZGV2aWNlICAgKnNwaWRldjsKLQlzdHJ1Y3Qga3Bfc3BpICAgICAgICprcHNwaTsKKwlz
dHJ1Y3Qgc3BpX2RldmljZSAqc3BpZGV2OworCXN0cnVjdCBrcF9zcGkgKmtwc3BpOwogCXN0cnVj
dCBzcGlfdHJhbnNmZXIgKnRyYW5zZmVyOwogCXVuaW9uIGtwX3NwaV9jb25maWcgc2M7CiAJaW50
IHN0YXR1cyA9IDA7CkBAIC0zMDksMzEgKzMwNywyOCBAQCBrcF9zcGlfdHJhbnNmZXJfb25lX21l
c3NhZ2Uoc3RydWN0IHNwaV9tYXN0ZXIgKm1hc3Rlciwgc3RydWN0IHNwaV9tZXNzYWdlICptKQog
CS8qIHZhbGlkYXRlIGlucHV0ICovCiAJbGlzdF9mb3JfZWFjaF9lbnRyeSh0cmFuc2ZlciwgJm0t
PnRyYW5zZmVycywgdHJhbnNmZXJfbGlzdCkgewogCQljb25zdCB2b2lkICp0eF9idWYgPSB0cmFu
c2Zlci0+dHhfYnVmOwotCQl2b2lkICAgICAgICpyeF9idWYgPSB0cmFuc2Zlci0+cnhfYnVmOwor
CQl2b2lkICpyeF9idWYgPSB0cmFuc2Zlci0+cnhfYnVmOwogCQl1bnNpZ25lZCBpbnQgbGVuID0g
dHJhbnNmZXItPmxlbjsKIAogCQlpZiAodHJhbnNmZXItPnNwZWVkX2h6ID4gS1BfU1BJX0NMSyB8
fAogCQkgICAgKGxlbiAmJiAhKHJ4X2J1ZiB8fCB0eF9idWYpKSkgewotCQkJZGV2X2RiZyhrcHNw
aS0+ZGV2LCAiICB0cmFuc2ZlcjogJWQgSHosICVkICVzJXMsICVkIGJwd1xuIiwKLQkJCQkJdHJh
bnNmZXItPnNwZWVkX2h6LAotCQkJCQlsZW4sCi0JCQkJCXR4X2J1ZiA/ICJ0eCIgOiAiIiwKLQkJ
CQkJcnhfYnVmID8gInJ4IiA6ICIiLAotCQkJCQl0cmFuc2Zlci0+Yml0c19wZXJfd29yZCk7CisJ
CQlkZXZfZGJnKGtwc3BpLT5kZXYsCisJCQkJIiAgdHJhbnNmZXI6ICVkIEh6LCAlZCAlcyVzLCAl
ZCBicHdcbiIsCisJCQkJdHJhbnNmZXItPnNwZWVkX2h6LCBsZW4sIHR4X2J1ZiA/ICJ0eCIgOiAi
IiwKKwkJCQlyeF9idWYgPyAicngiIDogIiIsIHRyYW5zZmVyLT5iaXRzX3Blcl93b3JkKTsKIAkJ
CWRldl9kYmcoa3BzcGktPmRldiwgIiAgdHJhbnNmZXIgLUVJTlZBTFxuIik7CiAJCQlyZXR1cm4g
LUVJTlZBTDsKIAkJfQogCQlpZiAodHJhbnNmZXItPnNwZWVkX2h6ICYmCiAJCSAgICB0cmFuc2Zl
ci0+c3BlZWRfaHogPCAoS1BfU1BJX0NMSyA+PiAxNSkpIHsKIAkJCWRldl9kYmcoa3BzcGktPmRl
diwgInNwZWVkX2h6ICVkIGJlbG93IG1pbmltdW0gJWQgSHpcbiIsCi0JCQkJCXRyYW5zZmVyLT5z
cGVlZF9oeiwKLQkJCQkJS1BfU1BJX0NMSyA+PiAxNSk7CisJCQkJdHJhbnNmZXItPnNwZWVkX2h6
LCBLUF9TUElfQ0xLID4+IDE1KTsKIAkJCWRldl9kYmcoa3BzcGktPmRldiwgIiAgc3BlZWRfaHog
LUVJTlZBTFxuIik7CiAJCQlyZXR1cm4gLUVJTlZBTDsKIAkJfQogCX0KIAotCS8qIGFzc2VydCBj
aGlwIHNlbGVjdCB0byBzdGFydCB0aGUgc2VxdWVuY2UqLworCS8qIGFzc2VydCBjaGlwIHNlbGVj
dCB0byBzdGFydCB0aGUgc2VxdWVuY2UgKi8KIAlzYy5yZWcgPSBrcF9zcGlfcmVhZF9yZWcoY3Ms
IEtQX1NQSV9SRUdfQ09ORklHKTsKIAlzYy5iaXRmaWVsZC5zcGlfZW4gPSAxOwogCWtwX3NwaV93
cml0ZV9yZWcoY3MsIEtQX1NQSV9SRUdfQ09ORklHLCBzYy5yZWcpOwpAQCAtMzQ3LDggKzM0Miw3
IEBAIGtwX3NwaV90cmFuc2Zlcl9vbmVfbWVzc2FnZShzdHJ1Y3Qgc3BpX21hc3RlciAqbWFzdGVy
LCBzdHJ1Y3Qgc3BpX21lc3NhZ2UgKm0pCiAKIAkvKiBkbyB0aGUgdHJhbnNmZXJzIGZvciB0aGlz
IG1lc3NhZ2UgKi8KIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KHRyYW5zZmVyLCAmbS0+dHJhbnNmZXJz
LCB0cmFuc2Zlcl9saXN0KSB7Ci0JCWlmICghdHJhbnNmZXItPnR4X2J1ZiAmJiAhdHJhbnNmZXIt
PnJ4X2J1ZiAmJgotCQkgICAgdHJhbnNmZXItPmxlbikgeworCQlpZiAoIXRyYW5zZmVyLT50eF9i
dWYgJiYgIXRyYW5zZmVyLT5yeF9idWYgJiYgdHJhbnNmZXItPmxlbikgewogCQkJc3RhdHVzID0g
LUVJTlZBTDsKIAkJCWdvdG8gZXJyb3I7CiAJCX0KQEAgLTM5NywxOCArMzkxLDE3IEBAIGtwX3Nw
aV90cmFuc2Zlcl9vbmVfbWVzc2FnZShzdHJ1Y3Qgc3BpX21hc3RlciAqbWFzdGVyLCBzdHJ1Y3Qg
c3BpX21lc3NhZ2UgKm0pCiAJc2MuYml0ZmllbGQuc3BpX2VuID0gMDsKIAlrcF9zcGlfd3JpdGVf
cmVnKGNzLCBLUF9TUElfUkVHX0NPTkZJRywgc2MucmVnKTsKIAotb3V0OgorIG91dDoKIAkvKiBk
b25lIHdvcmsgKi8KIAlzcGlfZmluYWxpemVfY3VycmVudF9tZXNzYWdlKG1hc3Rlcik7CiAJcmV0
dXJuIDA7CiAKLWVycm9yOgorIGVycm9yOgogCW0tPnN0YXR1cyA9IHN0YXR1czsKIAlyZXR1cm4g
c3RhdHVzOwogfQogCi0Jc3RhdGljIHZvaWQKLWtwX3NwaV9jbGVhbnVwKHN0cnVjdCBzcGlfZGV2
aWNlICpzcGlkZXYpCitzdGF0aWMgdm9pZCBrcF9zcGlfY2xlYW51cChzdHJ1Y3Qgc3BpX2Rldmlj
ZSAqc3BpZGV2KQogewogCXN0cnVjdCBrcF9zcGlfY29udHJvbGxlcl9zdGF0ZSAqY3MgPSBzcGlk
ZXYtPmNvbnRyb2xsZXJfc3RhdGU7CiAKQEAgLTQxOSw4ICs0MTIsNyBAQCBrcF9zcGlfY2xlYW51
cChzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpZGV2KQogLyoqKioqKioqKioqKioqKioqKgogICogUHJv
YmUgLyBSZW1vdmUgKgogICoqKioqKioqKioqKioqKioqKi8KLQlzdGF0aWMgaW50Ci1rcF9zcGlf
cHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGxkZXYpCitzdGF0aWMgaW50IGtwX3NwaV9w
cm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikKIHsKIAlzdHJ1Y3Qga3BjX2NvcmVf
ZGV2aWNlX3BsYXRkYXRhICpkcnZkYXRhOwogCXN0cnVjdCBzcGlfbWFzdGVyICptYXN0ZXI7CkBA
IC00ODcsMTkgKzQ3OSwxOSBAQCBrcF9zcGlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGxkZXYpCiAJCU5FV19TUElfREVWSUNFX0ZST01fQk9BUkRfSU5GT19UQUJMRShwMmtyMF9ib2Fy
ZF9pbmZvKTsKIAkJYnJlYWs7CiAJZGVmYXVsdDoKLQkJZGV2X2VycigmcGxkZXYtPmRldiwgIlVu
a25vd24gaGFyZHdhcmUsIGNhbnQga25vdyB3aGF0IHBhcnRpdGlvbiB0YWJsZSB0byB1c2UhXG4i
KTsKKwkJZGV2X2VycigmcGxkZXYtPmRldiwKKwkJCSJVbmtub3duIGhhcmR3YXJlLCBjYW50IGtu
b3cgd2hhdCBwYXJ0aXRpb24gdGFibGUgdG8gdXNlIVxuIik7CiAJCWdvdG8gZnJlZV9tYXN0ZXI7
CiAJfQogCiAJcmV0dXJuIHN0YXR1czsKIAotZnJlZV9tYXN0ZXI6CisgZnJlZV9tYXN0ZXI6CiAJ
c3BpX21hc3Rlcl9wdXQobWFzdGVyKTsKIAlyZXR1cm4gc3RhdHVzOwogfQogCi0Jc3RhdGljIGlu
dAota3Bfc3BpX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikKK3N0YXRpYyBp
bnQga3Bfc3BpX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikKIHsKIAlzdHJ1
Y3Qgc3BpX21hc3RlciAqbWFzdGVyID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGxkZXYpOwogCkBA
IC01MDksMTAgKzUwMSwxMCBAQCBrcF9zcGlfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBsZGV2KQogCiBzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciBrcF9zcGlfZHJpdmVyID0g
ewogCS5kcml2ZXIgPSB7Ci0JCS5uYW1lID0gICAgIEtQX0RSSVZFUl9OQU1FX1NQSSwKLQl9LAot
CS5wcm9iZSA9ICAgIGtwX3NwaV9wcm9iZSwKLQkucmVtb3ZlID0gICBrcF9zcGlfcmVtb3ZlLAor
CQkgICAubmFtZSA9IEtQX0RSSVZFUl9OQU1FX1NQSSwKKwkJICAgfSwKKwkucHJvYmUgPSBrcF9z
cGlfcHJvYmUsCisJLnJlbW92ZSA9IGtwX3NwaV9yZW1vdmUsCiB9OwogCiBtb2R1bGVfcGxhdGZv
cm1fZHJpdmVyKGtwX3NwaV9kcml2ZXIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2tw
YzIwMDAva3BjX2RtYS9kbWEuYyBiL2RyaXZlcnMvc3RhZ2luZy9rcGMyMDAwL2twY19kbWEvZG1h
LmMKaW5kZXggNTFhNGRkNTM0YTBkLi5iY2IzMDk3ZTQxYTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
c3RhZ2luZy9rcGMyMDAwL2twY19kbWEvZG1hLmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2twYzIw
MDAva3BjX2RtYS9kbWEuYwpAQCAtMTIsMjEgKzEyLDIzIEBACiAKIC8qKioqKioqKioqICBJUlEg
SGFuZGxlcnMgICoqKioqKioqKiovCiBzdGF0aWMKLWlycXJldHVybl90ICBuZGRfaXJxX2hhbmRs
ZXIoaW50IGlycSwgdm9pZCAqZGV2X2lkKQoraXJxcmV0dXJuX3QgbmRkX2lycV9oYW5kbGVyKGlu
dCBpcnEsIHZvaWQgKmRldl9pZCkKIHsKIAlzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmxkZXYgPSAo
c3RydWN0IGtwY19kbWFfZGV2aWNlICopZGV2X2lkOwogCi0JaWYgKChHZXRFbmdpbmVDb250cm9s
KGxkZXYpICYgRU5HX0NUTF9JUlFfQUNUSVZFKSB8fCAobGRldi0+ZGVzY19jb21wbGV0ZWQtPk15
RE1BQWRkciAhPSBHZXRFbmdpbmVDb21wbGV0ZVB0cihsZGV2KSkpCisJaWYgKChHZXRFbmdpbmVD
b250cm9sKGxkZXYpICYgRU5HX0NUTF9JUlFfQUNUSVZFKQorCSAgICB8fCAobGRldi0+ZGVzY19j
b21wbGV0ZWQtPk15RE1BQWRkciAhPSBHZXRFbmdpbmVDb21wbGV0ZVB0cihsZGV2KSkpCiAJCXNj
aGVkdWxlX3dvcmsoJmxkZXYtPmlycV93b3JrKTsKIAogCXJldHVybiBJUlFfSEFORExFRDsKIH0K
IAogc3RhdGljCi12b2lkICBuZGRfaXJxX3dvcmtlcihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndzKQor
dm9pZCBuZGRfaXJxX3dvcmtlcihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndzKQogewogCXN0cnVjdCBr
cGNfZG1hX2Rlc2NyaXB0b3IgKmN1cjsKLQlzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZyA9IGNv
bnRhaW5lcl9vZih3cywgc3RydWN0IGtwY19kbWFfZGV2aWNlLCBpcnFfd29yayk7CisJc3RydWN0
IGtwY19kbWFfZGV2aWNlICplbmcgPQorCSAgICBjb250YWluZXJfb2Yod3MsIHN0cnVjdCBrcGNf
ZG1hX2RldmljZSwgaXJxX3dvcmspOwogCiAJbG9ja19lbmdpbmUoZW5nKTsKIApAQCAtMzksOCAr
NDEsMTAgQEAgdm9pZCAgbmRkX2lycV93b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3cykKIAlj
dXIgPSBlbmctPmRlc2NfY29tcGxldGVkOwogCWRvIHsKIAkJY3VyID0gY3VyLT5OZXh0OwotCQlk
ZXZfZGJnKCZlbmctPnBsZGV2LT5kZXYsICJIYW5kbGluZyBjb21wbGV0ZWQgZGVzY3JpcHRvciAl
cCAoYWNkID0gJXApXG4iLCBjdXIsIGN1ci0+YWNkKTsKLQkJQlVHX09OKGN1ciA9PSBlbmctPmRl
c2NfbmV4dCk7IC8vIE9yZGVyaW5nIGZhaWx1cmUuCisJCWRldl9kYmcoJmVuZy0+cGxkZXYtPmRl
diwKKwkJCSJIYW5kbGluZyBjb21wbGV0ZWQgZGVzY3JpcHRvciAlcCAoYWNkID0gJXApXG4iLCBj
dXIsCisJCQljdXItPmFjZCk7CisJCUJVR19PTihjdXIgPT0gZW5nLT5kZXNjX25leHQpOwkvLyBP
cmRlcmluZyBmYWlsdXJlLgogCiAJCWlmIChjdXItPkRlc2NDb250cm9sRmxhZ3MgJiBETUFfREVT
Q19DVExfU09QKSB7CiAJCQllbmctPmFjY3VtdWxhdGVkX2J5dGVzID0gMDsKQEAgLTU2LDcgKzYw
LDExIEBAIHZvaWQgIG5kZF9pcnFfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd3MpCiAKIAkJ
aWYgKGN1ci0+RGVzY0NvbnRyb2xGbGFncyAmIERNQV9ERVNDX0NUTF9FT1ApIHsKIAkJCWlmIChj
dXItPmFjZCkKLQkJCQl0cmFuc2Zlcl9jb21wbGV0ZV9jYihjdXItPmFjZCwgZW5nLT5hY2N1bXVs
YXRlZF9ieXRlcywgZW5nLT5hY2N1bXVsYXRlZF9mbGFncyB8IEFDRF9GTEFHX0RPTkUpOworCQkJ
CXRyYW5zZmVyX2NvbXBsZXRlX2NiKGN1ci0+YWNkLAorCQkJCQkJICAgICBlbmctPmFjY3VtdWxh
dGVkX2J5dGVzLAorCQkJCQkJICAgICBlbmctPgorCQkJCQkJICAgICBhY2N1bXVsYXRlZF9mbGFn
cyB8CisJCQkJCQkgICAgIEFDRF9GTEFHX0RPTkUpOwogCQl9CiAKIAkJZW5nLT5kZXNjX2NvbXBs
ZXRlZCA9IGN1cjsKQEAgLTY5LDEwICs3NywxMCBAQCB2b2lkICBuZGRfaXJxX3dvcmtlcihzdHJ1
Y3Qgd29ya19zdHJ1Y3QgKndzKQogfQogCiAvKioqKioqKioqKiAgRE1BIEVuZ2luZSBJbml0L1Rl
YXJkb3duICAqKioqKioqKioqLwotdm9pZCAgc3RhcnRfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2Rt
YV9kZXZpY2UgKmVuZykKK3ZvaWQgc3RhcnRfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZp
Y2UgKmVuZykKIHsKLQllbmctPmRlc2NfbmV4dCAgICAgICA9IGVuZy0+ZGVzY19wb29sX2ZpcnN0
OwotCWVuZy0+ZGVzY19jb21wbGV0ZWQgID0gZW5nLT5kZXNjX3Bvb2xfbGFzdDsKKwllbmctPmRl
c2NfbmV4dCA9IGVuZy0+ZGVzY19wb29sX2ZpcnN0OworCWVuZy0+ZGVzY19jb21wbGV0ZWQgPSBl
bmctPmRlc2NfcG9vbF9sYXN0OwogCiAJLy8gU2V0dXAgdGhlIGVuZ2luZSBwb2ludGVyIHJlZ2lz
dGVycwogCVNldEVuZ2luZU5leHRQdHIoZW5nLCBlbmctPmRlc2NfcG9vbF9maXJzdCk7CkBAIC04
Miw3ICs5MCw3IEBAIHZvaWQgIHN0YXJ0X2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNl
ICplbmcpCiAJV3JpdGVFbmdpbmVDb250cm9sKGVuZywgRU5HX0NUTF9ETUFfRU5BQkxFIHwgRU5H
X0NUTF9JUlFfRU5BQkxFKTsKIH0KIAotaW50ICBzZXR1cF9kbWFfZW5naW5lKHN0cnVjdCBrcGNf
ZG1hX2RldmljZSAqZW5nLCB1MzIgZGVzY19jbnQpCitpbnQgc2V0dXBfZG1hX2VuZ2luZShzdHJ1
Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZywgdTMyIGRlc2NfY250KQogewogCXUzMiBjYXBzOwogCXN0
cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IgKmN1cjsKQEAgLTk0LDcgKzEwMiwxMCBAQCBpbnQgIHNl
dHVwX2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcsIHUzMiBkZXNjX2NudCkK
IAogCWNhcHMgPSBHZXRFbmdpbmVDYXBhYmlsaXRpZXMoZW5nKTsKIAotCWlmIChXQVJOKCEoY2Fw
cyAmIEVOR19DQVBfUFJFU0VOVCksICIlcygpIGNhbGxlZCBmb3IgRE1BIEVuZ2luZSBhdCAlcCB3
aGljaCBpc24ndCBwcmVzZW50IGluIGhhcmR3YXJlIVxuIiwgX19mdW5jX18sIGVuZykpCisJaWYg
KFdBUk4KKwkgICAgKCEoY2FwcyAmIEVOR19DQVBfUFJFU0VOVCksCisJICAgICAiJXMoKSBjYWxs
ZWQgZm9yIERNQSBFbmdpbmUgYXQgJXAgd2hpY2ggaXNuJ3QgcHJlc2VudCBpbiBoYXJkd2FyZSFc
biIsCisJICAgICBfX2Z1bmNfXywgZW5nKSkKIAkJcmV0dXJuIC1FTlhJTzsKIAogCWlmIChjYXBz
ICYgRU5HX0NBUF9ESVJFQ1RJT04pIHsKQEAgLTEwNCwxMSArMTE1LDE2IEBAIGludCAgc2V0dXBf
ZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZywgdTMyIGRlc2NfY250KQogCX0K
IAogCWVuZy0+ZGVzY19wb29sX2NudCA9IGRlc2NfY250OwotCWVuZy0+ZGVzY19wb29sID0gZG1h
X3Bvb2xfY3JlYXRlKCJLUEMgRE1BIERlc2NyaXB0b3JzIiwgJmVuZy0+cGxkZXYtPmRldiwgc2l6
ZW9mKHN0cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IpLCBETUFfREVTQ19BTElHTk1FTlQsIDQwOTYp
OworCWVuZy0+ZGVzY19wb29sID0KKwkgICAgZG1hX3Bvb2xfY3JlYXRlKCJLUEMgRE1BIERlc2Ny
aXB0b3JzIiwgJmVuZy0+cGxkZXYtPmRldiwKKwkJCSAgICBzaXplb2Yoc3RydWN0IGtwY19kbWFf
ZGVzY3JpcHRvciksCisJCQkgICAgRE1BX0RFU0NfQUxJR05NRU5ULCA0MDk2KTsKIAotCWVuZy0+
ZGVzY19wb29sX2ZpcnN0ID0gZG1hX3Bvb2xfYWxsb2MoZW5nLT5kZXNjX3Bvb2wsIEdGUF9LRVJO
RUwgfCBHRlBfRE1BLCAmaGVhZF9oYW5kbGUpOworCWVuZy0+ZGVzY19wb29sX2ZpcnN0ID0KKwkg
ICAgZG1hX3Bvb2xfYWxsb2MoZW5nLT5kZXNjX3Bvb2wsIEdGUF9LRVJORUwgfCBHRlBfRE1BLCAm
aGVhZF9oYW5kbGUpOwogCWlmICghZW5nLT5kZXNjX3Bvb2xfZmlyc3QpIHsKLQkJZGV2X2Vycigm
ZW5nLT5wbGRldi0+ZGV2LCAiJXM6IGNvdWxkbid0IGFsbG9jYXRlIGRlc2NfcG9vbF9maXJzdCFc
biIsIF9fZnVuY19fKTsKKwkJZGV2X2VycigmZW5nLT5wbGRldi0+ZGV2LAorCQkJIiVzOiBjb3Vs
ZG4ndCBhbGxvY2F0ZSBkZXNjX3Bvb2xfZmlyc3QhXG4iLCBfX2Z1bmNfXyk7CiAJCWRtYV9wb29s
X2Rlc3Ryb3koZW5nLT5kZXNjX3Bvb2wpOwogCQlyZXR1cm4gLUVOT01FTTsKIAl9CkBAIC0xMTcs
OCArMTMzLDEwIEBAIGludCAgc2V0dXBfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2Ug
KmVuZywgdTMyIGRlc2NfY250KQogCWNsZWFyX2Rlc2MoZW5nLT5kZXNjX3Bvb2xfZmlyc3QpOwog
CiAJY3VyID0gZW5nLT5kZXNjX3Bvb2xfZmlyc3Q7Ci0JZm9yIChpID0gMSA7IGkgPCBlbmctPmRl
c2NfcG9vbF9jbnQgOyBpKyspIHsKLQkJbmV4dCA9IGRtYV9wb29sX2FsbG9jKGVuZy0+ZGVzY19w
b29sLCBHRlBfS0VSTkVMIHwgR0ZQX0RNQSwgJm5leHRfaGFuZGxlKTsKKwlmb3IgKGkgPSAxOyBp
IDwgZW5nLT5kZXNjX3Bvb2xfY250OyBpKyspIHsKKwkJbmV4dCA9CisJCSAgICBkbWFfcG9vbF9h
bGxvYyhlbmctPmRlc2NfcG9vbCwgR0ZQX0tFUk5FTCB8IEdGUF9ETUEsCisJCQkJICAgJm5leHRf
aGFuZGxlKTsKIAkJaWYgKCFuZXh0KQogCQkJZ290byBkb25lX2FsbG9jOwogCkBAIC0xNDIsMTIg
KzE2MCwxMyBAQCBpbnQgIHNldHVwX2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNlICpl
bmcsIHUzMiBkZXNjX2NudCkKIAlJTklUX1dPUksoJmVuZy0+aXJxX3dvcmssIG5kZF9pcnFfd29y
a2VyKTsKIAogCS8vIEdyYWIgSVJRIGxpbmUKLQlydiA9IHJlcXVlc3RfaXJxKGVuZy0+aXJxLCBu
ZGRfaXJxX2hhbmRsZXIsIElSUUZfU0hBUkVELCBLUF9EUklWRVJfTkFNRV9ETUFfQ09OVFJPTExF
UiwgZW5nKTsKKwlydiA9IHJlcXVlc3RfaXJxKGVuZy0+aXJxLCBuZGRfaXJxX2hhbmRsZXIsIElS
UUZfU0hBUkVELAorCQkJIEtQX0RSSVZFUl9OQU1FX0RNQV9DT05UUk9MTEVSLCBlbmcpOwogCWlm
IChydikgewotCQlkZXZfZXJyKCZlbmctPnBsZGV2LT5kZXYsICIlczogZmFpbGVkIHRvIHJlcXVl
c3RfaXJxOiAlZFxuIiwgX19mdW5jX18sIHJ2KTsKKwkJZGV2X2VycigmZW5nLT5wbGRldi0+ZGV2
LCAiJXM6IGZhaWxlZCB0byByZXF1ZXN0X2lycTogJWRcbiIsCisJCQlfX2Z1bmNfXywgcnYpOwog
CQlyZXR1cm4gcnY7CiAJfQotCiAJLy8gVHVybiBvbiB0aGUgZW5naW5lIQogCXN0YXJ0X2RtYV9l
bmdpbmUoZW5nKTsKIAl1bmxvY2tfZW5naW5lKGVuZyk7CkBAIC0xNTUsNyArMTc0LDcgQEAgaW50
ICBzZXR1cF9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nLCB1MzIgZGVzY19j
bnQpCiAJcmV0dXJuIDA7CiB9CiAKLXZvaWQgIHN0b3BfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2Rt
YV9kZXZpY2UgKmVuZykKK3ZvaWQgc3RvcF9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2Rldmlj
ZSAqZW5nKQogewogCXVuc2lnbmVkIGxvbmcgdGltZW91dDsKIApAQCAtMTY2LDcgKzE4NSw4IEBA
IHZvaWQgIHN0b3BfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKIAl0aW1l
b3V0ID0gamlmZmllcyArIChIWiAvIDIpOwogCXdoaWxlIChHZXRFbmdpbmVDb250cm9sKGVuZykg
JiBFTkdfQ1RMX0RNQV9SVU5OSU5HKSB7CiAJCWlmICh0aW1lX2FmdGVyKGppZmZpZXMsIHRpbWVv
dXQpKSB7Ci0JCQlkZXZfY3JpdCgmZW5nLT5wbGRldi0+ZGV2LCAiRE1BX1JVTk5JTkcgc3RpbGwg
YXNzZXJ0ZWQhXG4iKTsKKwkJCWRldl9jcml0KCZlbmctPnBsZGV2LT5kZXYsCisJCQkJICJETUFf
UlVOTklORyBzdGlsbCBhc3NlcnRlZCFcbiIpOwogCQkJYnJlYWs7CiAJCX0KIAl9CkBAIC0xNzYs
OSArMTk2LDExIEBAIHZvaWQgIHN0b3BfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2Ug
KmVuZykKIAogCS8vIFdhaXQgZm9yIHJlc2V0IHJlcXVlc3QgdG8gYmUgcHJvY2Vzc2VkCiAJdGlt
ZW91dCA9IGppZmZpZXMgKyAoSFogLyAyKTsKLQl3aGlsZSAoR2V0RW5naW5lQ29udHJvbChlbmcp
ICYgKEVOR19DVExfRE1BX1JVTk5JTkcgfCBFTkdfQ1RMX0RNQV9SRVNFVF9SRVFVRVNUKSkgewor
CXdoaWxlIChHZXRFbmdpbmVDb250cm9sKGVuZykgJgorCSAgICAgICAoRU5HX0NUTF9ETUFfUlVO
TklORyB8IEVOR19DVExfRE1BX1JFU0VUX1JFUVVFU1QpKSB7CiAJCWlmICh0aW1lX2FmdGVyKGpp
ZmZpZXMsIHRpbWVvdXQpKSB7Ci0JCQlkZXZfY3JpdCgmZW5nLT5wbGRldi0+ZGV2LCAiRU5HX0NU
TF9ETUFfUkVTRVRfUkVRVUVTVCBzdGlsbCBhc3NlcnRlZCFcbiIpOworCQkJZGV2X2NyaXQoJmVu
Zy0+cGxkZXYtPmRldiwKKwkJCQkgIkVOR19DVExfRE1BX1JFU0VUX1JFUVVFU1Qgc3RpbGwgYXNz
ZXJ0ZWQhXG4iKTsKIAkJCWJyZWFrOwogCQl9CiAJfQpAQCAtMTkwLDEzICsyMTIsMTggQEAgdm9p
ZCAgc3RvcF9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQogCXRpbWVvdXQg
PSBqaWZmaWVzICsgKEhaIC8gMik7CiAJd2hpbGUgKEdldEVuZ2luZUNvbnRyb2woZW5nKSAmIEVO
R19DVExfRE1BX1JFU0VUKSB7CiAJCWlmICh0aW1lX2FmdGVyKGppZmZpZXMsIHRpbWVvdXQpKSB7
Ci0JCQlkZXZfY3JpdCgmZW5nLT5wbGRldi0+ZGV2LCAiRE1BX1JFU0VUIHN0aWxsIGFzc2VydGVk
IVxuIik7CisJCQlkZXZfY3JpdCgmZW5nLT5wbGRldi0+ZGV2LAorCQkJCSAiRE1BX1JFU0VUIHN0
aWxsIGFzc2VydGVkIVxuIik7CiAJCQlicmVhazsKIAkJfQogCX0KIAogCS8vIENsZWFyIGFueSBw
ZXJzaXN0ZW50IGJpdHMganVzdCB0byBtYWtlIHN1cmUgdGhlcmUgaXMgbm8gcmVzaWR1ZSBmcm9t
IHRoZSByZXNldAotCVNldENsZWFyRW5naW5lQ29udHJvbChlbmcsIChFTkdfQ1RMX0lSUV9BQ1RJ
VkUgfCBFTkdfQ1RMX0RFU0NfQ09NUExFVEUgfCBFTkdfQ1RMX0RFU0NfQUxJR05fRVJSIHwgRU5H
X0NUTF9ERVNDX0ZFVENIX0VSUiB8IEVOR19DVExfU1dfQUJPUlRfRVJSIHwgRU5HX0NUTF9ERVND
X0NIQUlOX0VORCB8IEVOR19DVExfRE1BX1dBSVRJTkdfUEVSU0lTVCksIDApOworCVNldENsZWFy
RW5naW5lQ29udHJvbChlbmcsCisJCQkgICAgICAoRU5HX0NUTF9JUlFfQUNUSVZFIHwgRU5HX0NU
TF9ERVNDX0NPTVBMRVRFIHwKKwkJCSAgICAgICBFTkdfQ1RMX0RFU0NfQUxJR05fRVJSIHwgRU5H
X0NUTF9ERVNDX0ZFVENIX0VSUiB8CisJCQkgICAgICAgRU5HX0NUTF9TV19BQk9SVF9FUlIgfCBF
TkdfQ1RMX0RFU0NfQ0hBSU5fRU5EIHwKKwkJCSAgICAgICBFTkdfQ1RMX0RNQV9XQUlUSU5HX1BF
UlNJU1QpLCAwKTsKIAogCS8vIFJlc2V0IHBlcmZvcm1hbmNlIGNvdW50ZXJzCiAKQEAgLTIwNCw3
ICsyMzEsNyBAQCB2b2lkICBzdG9wX2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNlICpl
bmcpCiAJV3JpdGVFbmdpbmVDb250cm9sKGVuZywgMCk7CiB9CiAKLXZvaWQgIGRlc3Ryb3lfZG1h
X2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKK3ZvaWQgZGVzdHJveV9kbWFfZW5n
aW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQogewogCXN0cnVjdCBrcGNfZG1hX2Rlc2Ny
aXB0b3IgKmN1cjsKIAlkbWFfYWRkcl90IGN1cl9oYW5kbGU7CkBAIC0yMTUsNyArMjQyLDcgQEAg
dm9pZCAgZGVzdHJveV9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQogCWN1
ciA9IGVuZy0+ZGVzY19wb29sX2ZpcnN0OwogCWN1cl9oYW5kbGUgPSBlbmctPmRlc2NfcG9vbF9m
aXJzdC0+TXlETUFBZGRyOwogCi0JZm9yIChpID0gMCA7IGkgPCBlbmctPmRlc2NfcG9vbF9jbnQg
OyBpKyspIHsKKwlmb3IgKGkgPSAwOyBpIDwgZW5nLT5kZXNjX3Bvb2xfY250OyBpKyspIHsKIAkJ
c3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAqbmV4dCA9IGN1ci0+TmV4dDsKIAkJZG1hX2FkZHJf
dCBuZXh0X2hhbmRsZSA9IGN1ci0+RGVzY05leHREZXNjUHRyOwogCkBAIC0yMzAsNyArMjU3LDcg
QEAgdm9pZCAgZGVzdHJveV9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQog
fQogCiAvKioqKioqKioqKiAgSGVscGVyIEZ1bmN0aW9ucyAgKioqKioqKioqKi8KLWludCAgY291
bnRfZGVzY3JpcHRvcnNfYXZhaWxhYmxlKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQoraW50
IGNvdW50X2Rlc2NyaXB0b3JzX2F2YWlsYWJsZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykK
IHsKIAl1MzIgY291bnQgPSAwOwogCXN0cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IgKmN1ciA9IGVu
Zy0+ZGVzY19uZXh0OwpAQCAtMjQzLDIwICsyNzAsMjAgQEAgaW50ICBjb3VudF9kZXNjcmlwdG9y
c19hdmFpbGFibGUoc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcpCiAJcmV0dXJuIGNvdW50Owog
fQogCi12b2lkICBjbGVhcl9kZXNjKHN0cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IgKmRlc2MpCit2
b2lkIGNsZWFyX2Rlc2Moc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAqZGVzYykKIHsKIAlpZiAo
IWRlc2MpCiAJCXJldHVybjsKLQlkZXNjLT5EZXNjQnl0ZUNvdW50ICAgICAgICAgPSAwOwotCWRl
c2MtPkRlc2NTdGF0dXNFcnJvckZsYWdzICA9IDA7Ci0JZGVzYy0+RGVzY1N0YXR1c0ZsYWdzICAg
ICAgID0gMDsKLQlkZXNjLT5EZXNjVXNlckNvbnRyb2xMUyAgICAgPSAwOwotCWRlc2MtPkRlc2NV
c2VyQ29udHJvbE1TICAgICA9IDA7Ci0JZGVzYy0+RGVzY0NhcmRBZGRyTFMgICAgICAgID0gMDsK
LQlkZXNjLT5EZXNjQnVmZmVyQnl0ZUNvdW50ICAgPSAwOwotCWRlc2MtPkRlc2NDYXJkQWRkck1T
ICAgICAgICA9IDA7Ci0JZGVzYy0+RGVzY0NvbnRyb2xGbGFncyAgICAgID0gMDsKLQlkZXNjLT5E
ZXNjU3lzdGVtQWRkckxTICAgICAgPSAwOwotCWRlc2MtPkRlc2NTeXN0ZW1BZGRyTVMgICAgICA9
IDA7CisJZGVzYy0+RGVzY0J5dGVDb3VudCA9IDA7CisJZGVzYy0+RGVzY1N0YXR1c0Vycm9yRmxh
Z3MgPSAwOworCWRlc2MtPkRlc2NTdGF0dXNGbGFncyA9IDA7CisJZGVzYy0+RGVzY1VzZXJDb250
cm9sTFMgPSAwOworCWRlc2MtPkRlc2NVc2VyQ29udHJvbE1TID0gMDsKKwlkZXNjLT5EZXNjQ2Fy
ZEFkZHJMUyA9IDA7CisJZGVzYy0+RGVzY0J1ZmZlckJ5dGVDb3VudCA9IDA7CisJZGVzYy0+RGVz
Y0NhcmRBZGRyTVMgPSAwOworCWRlc2MtPkRlc2NDb250cm9sRmxhZ3MgPSAwOworCWRlc2MtPkRl
c2NTeXN0ZW1BZGRyTFMgPSAwOworCWRlc2MtPkRlc2NTeXN0ZW1BZGRyTVMgPSAwOwogCWRlc2Mt
PmFjZCA9IE5VTEw7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGNf
ZG1hL2ZpbGVvcHMuYyBiL2RyaXZlcnMvc3RhZ2luZy9rcGMyMDAwL2twY19kbWEvZmlsZW9wcy5j
CmluZGV4IDQ4Y2E4OGJjNmIwYi4uYjVmMzc0NDBjYmJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0
YWdpbmcva3BjMjAwMC9rcGNfZG1hL2ZpbGVvcHMuYworKysgYi9kcml2ZXJzL3N0YWdpbmcva3Bj
MjAwMC9rcGNfZG1hL2ZpbGVvcHMuYwpAQCAtMiwzMCArMiwyOSBAQAogI2luY2x1ZGUgPGxpbnV4
L21vZHVsZS5oPgogI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KICNpbmNsdWRlIDxsaW51eC9tbS5o
PgotI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPiAgIC8qIHByaW50aygpICovCi0jaW5jbHVkZSA8
bGludXgvc2xhYi5oPiAgICAgLyoga21hbGxvYygpICovCi0jaW5jbHVkZSA8bGludXgvZnMuaD4g
ICAgICAgLyogZXZlcnl0aGluZy4uLiAqLwotI2luY2x1ZGUgPGxpbnV4L2Vycm5vLmg+ICAgIC8q
IGVycm9yIGNvZGVzICovCi0jaW5jbHVkZSA8bGludXgvdHlwZXMuaD4gICAgLyogc2l6ZV90ICov
CisjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CS8qIHByaW50aygpICovCisjaW5jbHVkZSA8bGlu
dXgvc2xhYi5oPgkJLyoga21hbGxvYygpICovCisjaW5jbHVkZSA8bGludXgvZnMuaD4JCS8qIGV2
ZXJ5dGhpbmcuLi4gKi8KKyNpbmNsdWRlIDxsaW51eC9lcnJuby5oPgkvKiBlcnJvciBjb2RlcyAq
LworI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CS8qIHNpemVfdCAqLwogI2luY2x1ZGUgPGxpbnV4
L2NkZXYuaD4KLSNpbmNsdWRlIDxsaW51eC91YWNjZXNzLmg+ICAvKiBjb3B5XypfdXNlciAqLwor
I2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4JLyogY29weV8qX3VzZXIgKi8KICNpbmNsdWRlIDxs
aW51eC9oaWdobWVtLmg+CiAjaW5jbHVkZSA8bGludXgvcGFnZW1hcC5oPgogI2luY2x1ZGUgImtw
Y19kbWFfZHJpdmVyLmgiCiAjaW5jbHVkZSAidWFwaS5oIgogCiAvKioqKioqKioqKiAgSGVscGVy
IEZ1bmN0aW9ucyAgKioqKioqKioqKi8KLXN0YXRpYyBpbmxpbmUKLXVuc2lnbmVkIGludCAgY291
bnRfcGFnZXModW5zaWduZWQgbG9uZyBpb3ZfYmFzZSwgc2l6ZV90IGlvdl9sZW4pCitzdGF0aWMg
aW5saW5lIHVuc2lnbmVkIGludCBjb3VudF9wYWdlcyh1bnNpZ25lZCBsb25nIGlvdl9iYXNlLCBz
aXplX3QgaW92X2xlbikKIHsKLQl1bnNpZ25lZCBsb25nIGZpcnN0ID0gKGlvdl9iYXNlICAgICAg
ICAgICAgICYgUEFHRV9NQVNLKSA+PiBQQUdFX1NISUZUOwotCXVuc2lnbmVkIGxvbmcgbGFzdCAg
PSAoKGlvdl9iYXNlK2lvdl9sZW4tMSkgJiBQQUdFX01BU0spID4+IFBBR0VfU0hJRlQ7CisJdW5z
aWduZWQgbG9uZyBmaXJzdCA9IChpb3ZfYmFzZSAmIFBBR0VfTUFTSykgPj4gUEFHRV9TSElGVDsK
Kwl1bnNpZ25lZCBsb25nIGxhc3QgPQorCSAgICAoKGlvdl9iYXNlICsgaW92X2xlbiAtIDEpICYg
UEFHRV9NQVNLKSA+PiBQQUdFX1NISUZUOwogCiAJcmV0dXJuIGxhc3QgLSBmaXJzdCArIDE7CiB9
CiAKLXN0YXRpYyBpbmxpbmUKLXVuc2lnbmVkIGludCAgY291bnRfcGFydHNfZm9yX3NnZShzdHJ1
Y3Qgc2NhdHRlcmxpc3QgKnNnKQorc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQgY291bnRfcGFy
dHNfZm9yX3NnZShzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnKQogewogCXJldHVybiBESVZfUk9VTkRf
VVAoc2dfZG1hX2xlbihzZyksIDB4ODAwMDApOwogfQpAQCAtNTUsNyArNTQsOCBAQCBzdGF0aWMg
aW50IGtwY19kbWFfdHJhbnNmZXIoc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKnByaXYsCiAKIAlh
Y2QgPSBremFsbG9jKHNpemVvZigqYWNkKSwgR0ZQX0tFUk5FTCk7CiAJaWYgKCFhY2QpIHsKLQkJ
ZGV2X2VycigmcHJpdi0+bGRldi0+cGxkZXYtPmRldiwgIkNvdWxkbid0IGttYWxsb2Mgc3BhY2Ug
Zm9yIGZvciB0aGUgYWlvIGRhdGFcbiIpOworCQlkZXZfZXJyKCZwcml2LT5sZGV2LT5wbGRldi0+
ZGV2LAorCQkJIkNvdWxkbid0IGttYWxsb2Mgc3BhY2UgZm9yIGZvciB0aGUgYWlvIGRhdGFcbiIp
OwogCQlyZXR1cm4gLUVOT01FTTsKIAl9CiAJbWVtc2V0KGFjZCwgMHg2Niwgc2l6ZW9mKHN0cnVj
dCBhaW9fY2JfZGF0YSkpOwpAQCAtNjgsMzYgKzY4LDQ1IEBAIHN0YXRpYyBpbnQga3BjX2RtYV90
cmFuc2ZlcihzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqcHJpdiwKIAlhY2QtPnBhZ2VfY291bnQg
PSBjb3VudF9wYWdlcyhpb3ZfYmFzZSwgaW92X2xlbik7CiAKIAkvLyBBbGxvY2F0ZSBhbiBhcnJh
eSBvZiBwYWdlIHBvaW50ZXJzCi0JYWNkLT51c2VyX3BhZ2VzID0ga3phbGxvYyhzaXplb2Yoc3Ry
dWN0IHBhZ2UgKikgKiBhY2QtPnBhZ2VfY291bnQsIEdGUF9LRVJORUwpOworCWFjZC0+dXNlcl9w
YWdlcyA9CisJICAgIGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBwYWdlICopICogYWNkLT5wYWdlX2Nv
dW50LCBHRlBfS0VSTkVMKTsKIAlpZiAoIWFjZC0+dXNlcl9wYWdlcykgewotCQlkZXZfZXJyKCZw
cml2LT5sZGV2LT5wbGRldi0+ZGV2LCAiQ291bGRuJ3Qga21hbGxvYyBzcGFjZSBmb3IgZm9yIHRo
ZSBwYWdlIHBvaW50ZXJzXG4iKTsKKwkJZGV2X2VycigmcHJpdi0+bGRldi0+cGxkZXYtPmRldiwK
KwkJCSJDb3VsZG4ndCBrbWFsbG9jIHNwYWNlIGZvciBmb3IgdGhlIHBhZ2UgcG9pbnRlcnNcbiIp
OwogCQlydiA9IC1FTk9NRU07CiAJCWdvdG8gZXJyX2FsbG9jX3VzZXJwYWdlczsKIAl9Ci0KLQkv
LyBMb2NrIHRoZSB1c2VyIGJ1ZmZlciBwYWdlcyBpbiBtZW1vcnksIGFuZCBob2xkIG9uIHRvIHRo
ZSBwYWdlIHBvaW50ZXJzIChmb3IgdGhlIHNnbGlzdCkKLQlkb3duX3JlYWQoJmN1cnJlbnQtPm1t
LT5tbWFwX3NlbSk7ICAgICAgLyogIGdldCBtZW1vcnkgbWFwIHNlbWFwaG9yZSAqLwotCXJ2ID0g
Z2V0X3VzZXJfcGFnZXMoaW92X2Jhc2UsIGFjZC0+cGFnZV9jb3VudCwgRk9MTF9UT1VDSCB8IEZP
TExfV1JJVEUgfCBGT0xMX0dFVCwgYWNkLT51c2VyX3BhZ2VzLCBOVUxMKTsKLQl1cF9yZWFkKCZj
dXJyZW50LT5tbS0+bW1hcF9zZW0pOyAgICAgICAgLyogIHJlbGVhc2UgdGhlIHNlbWFwaG9yZSAq
LworCS8vIExvY2sgdGhlIHVzZXIgYnVmZmVyIHBhZ2VzIGluIG1lbW9yeSwgYW5kIGhvbGQgb24g
dG8gdGhlIHBhZ2UKKwkvLyBwb2ludGVycyAoZm9yIHRoZSBzZ2xpc3QpCisJZG93bl9yZWFkKCZj
dXJyZW50LT5tbS0+bW1hcF9zZW0pOworCXJ2ID0gZ2V0X3VzZXJfcGFnZXMoaW92X2Jhc2UsIGFj
ZC0+cGFnZV9jb3VudCwKKwkJCSAgICBGT0xMX1RPVUNIIHwgRk9MTF9XUklURSB8IEZPTExfR0VU
LCBhY2QtPnVzZXJfcGFnZXMsCisJCQkgICAgTlVMTCk7CisJdXBfcmVhZCgmY3VycmVudC0+bW0t
Pm1tYXBfc2VtKTsKIAlpZiAocnYgIT0gYWNkLT5wYWdlX2NvdW50KSB7Ci0JCWRldl9lcnIoJnBy
aXYtPmxkZXYtPnBsZGV2LT5kZXYsICJDb3VsZG4ndCBnZXRfdXNlcl9wYWdlcyAoJWxkKVxuIiwg
cnYpOworCQlkZXZfZXJyKCZwcml2LT5sZGV2LT5wbGRldi0+ZGV2LAorCQkJIkNvdWxkbid0IGdl
dF91c2VyX3BhZ2VzICglbGQpXG4iLCBydik7CiAJCWdvdG8gZXJyX2dldF91c2VyX3BhZ2VzOwog
CX0KLQogCS8vIEFsbG9jYXRlIGFuZCBzZXR1cCB0aGUgc2dfdGFibGUgKHNjYXR0ZXJsaXN0IGVu
dHJpZXMpCi0JcnYgPSBzZ19hbGxvY190YWJsZV9mcm9tX3BhZ2VzKCZhY2QtPnNndCwgYWNkLT51
c2VyX3BhZ2VzLCBhY2QtPnBhZ2VfY291bnQsIGlvdl9iYXNlICYgKFBBR0VfU0laRS0xKSwgaW92
X2xlbiwgR0ZQX0tFUk5FTCk7CisJcnYgPSBzZ19hbGxvY190YWJsZV9mcm9tX3BhZ2VzKCZhY2Qt
PnNndCwgYWNkLT51c2VyX3BhZ2VzLAorCQkJCSAgICAgICBhY2QtPnBhZ2VfY291bnQsCisJCQkJ
ICAgICAgIGlvdl9iYXNlICYgKFBBR0VfU0laRSAtIDEpLCBpb3ZfbGVuLAorCQkJCSAgICAgICBH
RlBfS0VSTkVMKTsKIAlpZiAocnYpIHsKLQkJZGV2X2VycigmcHJpdi0+bGRldi0+cGxkZXYtPmRl
diwgIkNvdWxkbid0IGFsbG9jIHNnX3RhYmxlICglbGQpXG4iLCBydik7CisJCWRldl9lcnIoJnBy
aXYtPmxkZXYtPnBsZGV2LT5kZXYsCisJCQkiQ291bGRuJ3QgYWxsb2Mgc2dfdGFibGUgKCVsZClc
biIsIHJ2KTsKIAkJZ290byBlcnJfYWxsb2Nfc2dfdGFibGU7CiAJfQotCiAJLy8gU2V0dXAgdGhl
IERNQSBtYXBwaW5nIGZvciBhbGwgdGhlIHNnIGVudHJpZXMKLQlhY2QtPm1hcHBlZF9lbnRyeV9j
b3VudCA9IGRtYV9tYXBfc2coJmxkZXYtPnBsZGV2LT5kZXYsIGFjZC0+c2d0LnNnbCwgYWNkLT5z
Z3QubmVudHMsIGxkZXYtPmRpcik7CisJYWNkLT5tYXBwZWRfZW50cnlfY291bnQgPQorCSAgICBk
bWFfbWFwX3NnKCZsZGV2LT5wbGRldi0+ZGV2LCBhY2QtPnNndC5zZ2wsIGFjZC0+c2d0Lm5lbnRz
LAorCQkgICAgICAgbGRldi0+ZGlyKTsKIAlpZiAoYWNkLT5tYXBwZWRfZW50cnlfY291bnQgPD0g
MCkgewotCQlkZXZfZXJyKCZwcml2LT5sZGV2LT5wbGRldi0+ZGV2LCAiQ291bGRuJ3QgZG1hX21h
cF9zZyAoJWQpXG4iLCBhY2QtPm1hcHBlZF9lbnRyeV9jb3VudCk7CisJCWRldl9lcnIoJnByaXYt
PmxkZXYtPnBsZGV2LT5kZXYsICJDb3VsZG4ndCBkbWFfbWFwX3NnICglZClcbiIsCisJCQlhY2Qt
Pm1hcHBlZF9lbnRyeV9jb3VudCk7CiAJCWdvdG8gZXJyX2RtYV9tYXBfc2c7CiAJfQotCiAJLy8g
Q2FsY3VsYXRlIGhvdyBtYW55IGRlc2NyaXB0b3JzIGFyZSBhY3R1YWxseSBuZWVkZWQgZm9yIHRo
aXMgdHJhbnNmZXIuCiAJZm9yX2VhY2hfc2coYWNkLT5zZ3Quc2dsLCBzZywgYWNkLT5tYXBwZWRf
ZW50cnlfY291bnQsIGkpIHsKIAkJZGVzY19uZWVkZWQgKz0gY291bnRfcGFydHNfZm9yX3NnZShz
Zyk7CkBAIC0xMDUsNjEgKzExNCw4MyBAQCBzdGF0aWMgaW50IGtwY19kbWFfdHJhbnNmZXIoc3Ry
dWN0IGRldl9wcml2YXRlX2RhdGEgKnByaXYsCiAKIAlsb2NrX2VuZ2luZShsZGV2KTsKIAotCS8v
IEZpZ291cmUgb3V0IGhvdyBtYW55IGRlc2NyaXB0b3JzIGFyZSBhdmFpbGFibGUgYW5kIHJldHVy
biBhbiBlcnJvciBpZiB0aGVyZSBhcmVuJ3QgZW5vdWdoCisJLy8gRmlndXJlIG91dCBob3cgbWFu
eSBkZXNjcmlwdG9ycyBhcmUgYXZhaWxhYmxlIGFuZCByZXR1cm4gYW4gZXJyb3IgaWYKKwkvLyB0
aGVyZSBhcmVuJ3QgZW5vdWdoCiAJbnVtX2Rlc2Nyc19hdmFpbCA9IGNvdW50X2Rlc2NyaXB0b3Jz
X2F2YWlsYWJsZShsZGV2KTsKLQlkZXZfZGJnKCZwcml2LT5sZGV2LT5wbGRldi0+ZGV2LCAiICAg
IG1hcHBlZF9lbnRyeV9jb3VudCA9ICVkICAgIG51bV9kZXNjcnNfbmVlZGVkID0gJWQgICAgbnVt
X2Rlc2Nyc19hdmFpbCA9ICVkXG4iLCBhY2QtPm1hcHBlZF9lbnRyeV9jb3VudCwgZGVzY19uZWVk
ZWQsIG51bV9kZXNjcnNfYXZhaWwpOworCWRldl9kYmcoJnByaXYtPmxkZXYtPnBsZGV2LT5kZXYs
CisJCSIgICAgbWFwcGVkX2VudHJ5X2NvdW50ID0gJWQgICAgbnVtX2Rlc2Nyc19uZWVkZWQgPSAl
ZCIKKwkJIiAgICBudW1fZGVzY3JzX2F2YWlsID0gJWRcbiIsCisJCWFjZC0+bWFwcGVkX2VudHJ5
X2NvdW50LCBkZXNjX25lZWRlZCwgbnVtX2Rlc2Nyc19hdmFpbCk7CiAJaWYgKGRlc2NfbmVlZGVk
ID49IGxkZXYtPmRlc2NfcG9vbF9jbnQpIHsKLQkJZGV2X3dhcm4oJnByaXYtPmxkZXYtPnBsZGV2
LT5kZXYsICIgICAgbWFwcGVkX2VudHJ5X2NvdW50ID0gJWQgICAgbnVtX2Rlc2Nyc19uZWVkZWQg
PSAlZCAgICBudW1fZGVzY3JzX2F2YWlsID0gJWQgICAgVE9PIE1BTlkgdG8gZXZlciBjb21wbGV0
ZSFcbiIsIGFjZC0+bWFwcGVkX2VudHJ5X2NvdW50LCBkZXNjX25lZWRlZCwgbnVtX2Rlc2Nyc19h
dmFpbCk7CisJCWRldl93YXJuKCZwcml2LT5sZGV2LT5wbGRldi0+ZGV2LAorCQkJICIgICAgbWFw
cGVkX2VudHJ5X2NvdW50ID0gJWQgICAgbnVtX2Rlc2Nyc19uZWVkZWQgPSAlZCIKKwkJCSAiICAg
IG51bV9kZXNjcnNfYXZhaWwgPSAlZCIKKwkJCSAiICAgIFRPTyBNQU5ZIHRvIGV2ZXIgY29tcGxl
dGUhXG4iLAorCQkJIGFjZC0+bWFwcGVkX2VudHJ5X2NvdW50LCBkZXNjX25lZWRlZCwKKwkJCSBu
dW1fZGVzY3JzX2F2YWlsKTsKIAkJcnYgPSAtRUFHQUlOOwogCQlnb3RvIGVycl9kZXNjcl90b29f
bWFueTsKIAl9CiAJaWYgKGRlc2NfbmVlZGVkID4gbnVtX2Rlc2Nyc19hdmFpbCkgewotCQlkZXZf
d2FybigmcHJpdi0+bGRldi0+cGxkZXYtPmRldiwgIiAgICBtYXBwZWRfZW50cnlfY291bnQgPSAl
ZCAgICBudW1fZGVzY3JzX25lZWRlZCA9ICVkICAgIG51bV9kZXNjcnNfYXZhaWwgPSAlZCAgICBU
b28gbWFueSB0byBjb21wbGV0ZSByaWdodCBub3cuXG4iLCBhY2QtPm1hcHBlZF9lbnRyeV9jb3Vu
dCwgZGVzY19uZWVkZWQsIG51bV9kZXNjcnNfYXZhaWwpOworCQlkZXZfd2FybigmcHJpdi0+bGRl
di0+cGxkZXYtPmRldiwKKwkJCSAiICAgIG1hcHBlZF9lbnRyeV9jb3VudCA9ICVkICAgIG51bV9k
ZXNjcnNfbmVlZGVkID0gJWQiCisJCQkgIiAgICBudW1fZGVzY3JzX2F2YWlsID0gJWQiCisJCQkg
IiAgICBUb28gbWFueSB0byBjb21wbGV0ZSByaWdodCBub3cuXG4iLAorCQkJIGFjZC0+bWFwcGVk
X2VudHJ5X2NvdW50LCBkZXNjX25lZWRlZCwKKwkJCSBudW1fZGVzY3JzX2F2YWlsKTsKIAkJcnYg
PSAtRU1TR1NJWkU7CiAJCWdvdG8gZXJyX2Rlc2NyX3Rvb19tYW55OwogCX0KLQotCS8vIExvb3Ag
dGhyb3VnaCBhbGwgdGhlIHNnIHRhYmxlIGVudHJpZXMgYW5kIGZpbGwgb3V0IGEgZGVzY3JpcHRv
ciBmb3IgZWFjaCBvbmUuCisJLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2cgdGFibGUgZW50cmll
cyBhbmQgZmlsbCBvdXQgYSBkZXNjcmlwdG9yIGZvcgorCS8vIGVhY2ggb25lLgogCWRlc2MgPSBs
ZGV2LT5kZXNjX25leHQ7CiAJY2FyZF9hZGRyID0gYWNkLT5wcml2LT5jYXJkX2FkZHI7CiAJZm9y
X2VhY2hfc2coYWNkLT5zZ3Quc2dsLCBzZywgYWNkLT5tYXBwZWRfZW50cnlfY291bnQsIGkpIHsK
IAkJcGNudCA9IGNvdW50X3BhcnRzX2Zvcl9zZ2Uoc2cpOwotCQlmb3IgKHAgPSAwIDsgcCA8IHBj
bnQgOyBwKyspIHsKKwkJZm9yIChwID0gMDsgcCA8IHBjbnQ7IHArKykgewogCQkJLy8gRmlsbCBv
dXQgdGhlIGRlc2NyaXB0b3IKIAkJCUJVR19PTihkZXNjID09IE5VTEwpOwogCQkJY2xlYXJfZGVz
YyhkZXNjKTsKLQkJCWlmIChwICE9IHBjbnQtMSkgeworCQkJaWYgKHAgIT0gcGNudCAtIDEpIHsK
IAkJCQlkZXNjLT5EZXNjQnl0ZUNvdW50ID0gMHg4MDAwMDsKIAkJCX0gZWxzZSB7Ci0JCQkJZGVz
Yy0+RGVzY0J5dGVDb3VudCA9IHNnX2RtYV9sZW4oc2cpIC0gKHAgKiAweDgwMDAwKTsKKwkJCQlk
ZXNjLT5EZXNjQnl0ZUNvdW50ID0KKwkJCQkgICAgc2dfZG1hX2xlbihzZykgLSAocCAqIDB4ODAw
MDApOwogCQkJfQogCQkJZGVzYy0+RGVzY0J1ZmZlckJ5dGVDb3VudCA9IGRlc2MtPkRlc2NCeXRl
Q291bnQ7CiAKIAkJCWRlc2MtPkRlc2NDb250cm9sRmxhZ3MgfD0gRE1BX0RFU0NfQ1RMX0lSUU9O
RVJSOwogCQkJaWYgKGkgPT0gMCAmJiBwID09IDApCiAJCQkJZGVzYy0+RGVzY0NvbnRyb2xGbGFn
cyB8PSBETUFfREVTQ19DVExfU09QOwotCQkJaWYgKGkgPT0gYWNkLT5tYXBwZWRfZW50cnlfY291
bnQtMSAmJiBwID09IHBjbnQtMSkKLQkJCQlkZXNjLT5EZXNjQ29udHJvbEZsYWdzIHw9IERNQV9E
RVNDX0NUTF9FT1AgfCBETUFfREVTQ19DVExfSVJRT05ET05FOworCQkJaWYgKGkgPT0gYWNkLT5t
YXBwZWRfZW50cnlfY291bnQgLSAxICYmIHAgPT0gcGNudCAtIDEpCisJCQkJZGVzYy0+RGVzY0Nv
bnRyb2xGbGFncyB8PQorCQkJCSAgICBETUFfREVTQ19DVExfRU9QIHwgRE1BX0RFU0NfQ1RMX0lS
UU9ORE9ORTsKIAogCQkJZGVzYy0+RGVzY0NhcmRBZGRyTFMgPSAoY2FyZF9hZGRyICYgMHhGRkZG
RkZGRik7CiAJCQlkZXNjLT5EZXNjQ2FyZEFkZHJNUyA9IChjYXJkX2FkZHIgPj4gMzIpICYgMHhG
OwogCQkJY2FyZF9hZGRyICs9IGRlc2MtPkRlc2NCeXRlQ291bnQ7CiAKLQkJCWRtYV9hZGRyICA9
IHNnX2RtYV9hZGRyZXNzKHNnKSArIChwICogMHg4MDAwMCk7Ci0JCQlkZXNjLT5EZXNjU3lzdGVt
QWRkckxTID0gKGRtYV9hZGRyICYgMHgwMDAwMDAwMEZGRkZGRkZGKSA+PiAgMDsKLQkJCWRlc2Mt
PkRlc2NTeXN0ZW1BZGRyTVMgPSAoZG1hX2FkZHIgJiAweEZGRkZGRkZGMDAwMDAwMDApID4+IDMy
OworCQkJZG1hX2FkZHIgPSBzZ19kbWFfYWRkcmVzcyhzZykgKyAocCAqIDB4ODAwMDApOworCQkJ
ZGVzYy0+RGVzY1N5c3RlbUFkZHJMUyA9CisJCQkgICAgKGRtYV9hZGRyICYgMHgwMDAwMDAwMEZG
RkZGRkZGKSA+PiAwOworCQkJZGVzYy0+RGVzY1N5c3RlbUFkZHJNUyA9CisJCQkgICAgKGRtYV9h
ZGRyICYgMHhGRkZGRkZGRjAwMDAwMDAwKSA+PiAzMjsKIAogCQkJdXNlcl9jdGwgPSBhY2QtPnBy
aXYtPnVzZXJfY3RsOwotCQkJaWYgKGkgPT0gYWNkLT5tYXBwZWRfZW50cnlfY291bnQtMSAmJiBw
ID09IHBjbnQtMSkgeworCQkJaWYgKGkgPT0gYWNkLT5tYXBwZWRfZW50cnlfY291bnQgLSAxICYm
IHAgPT0gcGNudCAtIDEpIHsKIAkJCQl1c2VyX2N0bCA9IGFjZC0+cHJpdi0+dXNlcl9jdGxfbGFz
dDsKIAkJCX0KLQkJCWRlc2MtPkRlc2NVc2VyQ29udHJvbExTID0gKHVzZXJfY3RsICYgMHgwMDAw
MDAwMEZGRkZGRkZGKSA+PiAgMDsKLQkJCWRlc2MtPkRlc2NVc2VyQ29udHJvbE1TID0gKHVzZXJf
Y3RsICYgMHhGRkZGRkZGRjAwMDAwMDAwKSA+PiAzMjsKKwkJCWRlc2MtPkRlc2NVc2VyQ29udHJv
bExTID0KKwkJCSAgICAodXNlcl9jdGwgJiAweDAwMDAwMDAwRkZGRkZGRkYpID4+IDA7CisJCQlk
ZXNjLT5EZXNjVXNlckNvbnRyb2xNUyA9CisJCQkgICAgKHVzZXJfY3RsICYgMHhGRkZGRkZGRjAw
MDAwMDAwKSA+PiAzMjsKIAotCQkJaWYgKGkgPT0gYWNkLT5tYXBwZWRfZW50cnlfY291bnQtMSAm
JiBwID09IHBjbnQtMSkKKwkJCWlmIChpID09IGFjZC0+bWFwcGVkX2VudHJ5X2NvdW50IC0gMSAm
JiBwID09IHBjbnQgLSAxKQogCQkJCWRlc2MtPmFjZCA9IGFjZDsKIAotCQkJZGV2X2RiZygmcHJp
di0+bGRldi0+cGxkZXYtPmRldiwgIiAgRmlsbGVkIGRlc2NyaXB0b3IgJXAgKGFjZCA9ICVwKVxu
IiwgZGVzYywgZGVzYy0+YWNkKTsKKwkJCWRldl9kYmcoJnByaXYtPmxkZXYtPnBsZGV2LT5kZXYs
CisJCQkJIiAgRmlsbGVkIGRlc2NyaXB0b3IgJXAgKGFjZCA9ICVwKVxuIiwgZGVzYywKKwkJCQlk
ZXNjLT5hY2QpOwogCiAJCQlsZGV2LT5kZXNjX25leHQgPSBkZXNjLT5OZXh0OwogCQkJZGVzYyA9
IGRlc2MtPk5leHQ7CkBAIC0xODYsMjIgKzIxNywyNCBAQCBzdGF0aWMgaW50IGtwY19kbWFfdHJh
bnNmZXIoc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKnByaXYsCiAKICBlcnJfZGVzY3JfdG9vX21h
bnk6CiAJdW5sb2NrX2VuZ2luZShsZGV2KTsKLQlkbWFfdW5tYXBfc2coJmxkZXYtPnBsZGV2LT5k
ZXYsIGFjZC0+c2d0LnNnbCwgYWNkLT5zZ3QubmVudHMsIGxkZXYtPmRpcik7CisJZG1hX3VubWFw
X3NnKCZsZGV2LT5wbGRldi0+ZGV2LCBhY2QtPnNndC5zZ2wsIGFjZC0+c2d0Lm5lbnRzLAorCQkg
ICAgIGxkZXYtPmRpcik7CiAJc2dfZnJlZV90YWJsZSgmYWNkLT5zZ3QpOwogIGVycl9kbWFfbWFw
X3NnOgogIGVycl9hbGxvY19zZ190YWJsZToKLQlmb3IgKGkgPSAwIDsgaSA8IGFjZC0+cGFnZV9j
b3VudCA7IGkrKykgeworCWZvciAoaSA9IDA7IGkgPCBhY2QtPnBhZ2VfY291bnQ7IGkrKykgewog
CQlwdXRfcGFnZShhY2QtPnVzZXJfcGFnZXNbaV0pOwogCX0KICBlcnJfZ2V0X3VzZXJfcGFnZXM6
CiAJa2ZyZWUoYWNkLT51c2VyX3BhZ2VzKTsKICBlcnJfYWxsb2NfdXNlcnBhZ2VzOgogCWtmcmVl
KGFjZCk7Ci0JZGV2X2RiZygmcHJpdi0+bGRldi0+cGxkZXYtPmRldiwgIiVzIHJldHVybmluZyB3
aXRoIGVycm9yICVsZFxuIiwgX19mdW5jX18sIHJ2KTsKKwlkZXZfZGJnKCZwcml2LT5sZGV2LT5w
bGRldi0+ZGV2LCAiJXMgcmV0dXJuaW5nIHdpdGggZXJyb3IgJWxkXG4iLAorCQlfX2Z1bmNfXywg
cnYpOwogCXJldHVybiBydjsKIH0KIAotdm9pZCAgdHJhbnNmZXJfY29tcGxldGVfY2Ioc3RydWN0
IGFpb19jYl9kYXRhICphY2QsIHNpemVfdCB4ZnJfY291bnQsIHUzMiBmbGFncykKK3ZvaWQgdHJh
bnNmZXJfY29tcGxldGVfY2Ioc3RydWN0IGFpb19jYl9kYXRhICphY2QsIHNpemVfdCB4ZnJfY291
bnQsIHUzMiBmbGFncykKIHsKIAl1bnNpZ25lZCBpbnQgaTsKIApAQCAtMjExLDE1ICsyNDQsMTYg
QEAgdm9pZCAgdHJhbnNmZXJfY29tcGxldGVfY2Ioc3RydWN0IGFpb19jYl9kYXRhICphY2QsIHNp
emVfdCB4ZnJfY291bnQsIHUzMiBmbGFncykKIAlCVUdfT04oYWNkLT5sZGV2ID09IE5VTEwpOwog
CUJVR19PTihhY2QtPmxkZXYtPnBsZGV2ID09IE5VTEwpOwogCi0JZm9yIChpID0gMCA7IGkgPCBh
Y2QtPnBhZ2VfY291bnQgOyBpKyspIHsKKwlmb3IgKGkgPSAwOyBpIDwgYWNkLT5wYWdlX2NvdW50
OyBpKyspIHsKIAkJaWYgKCFQYWdlUmVzZXJ2ZWQoYWNkLT51c2VyX3BhZ2VzW2ldKSkgewogCQkJ
c2V0X3BhZ2VfZGlydHkoYWNkLT51c2VyX3BhZ2VzW2ldKTsKIAkJfQogCX0KIAotCWRtYV91bm1h
cF9zZygmYWNkLT5sZGV2LT5wbGRldi0+ZGV2LCBhY2QtPnNndC5zZ2wsIGFjZC0+c2d0Lm5lbnRz
LCBhY2QtPmxkZXYtPmRpcik7CisJZG1hX3VubWFwX3NnKCZhY2QtPmxkZXYtPnBsZGV2LT5kZXYs
IGFjZC0+c2d0LnNnbCwgYWNkLT5zZ3QubmVudHMsCisJCSAgICAgYWNkLT5sZGV2LT5kaXIpOwog
Ci0JZm9yIChpID0gMCA7IGkgPCBhY2QtPnBhZ2VfY291bnQgOyBpKyspIHsKKwlmb3IgKGkgPSAw
OyBpIDwgYWNkLT5wYWdlX2NvdW50OyBpKyspIHsKIAkJcHV0X3BhZ2UoYWNkLT51c2VyX3BhZ2Vz
W2ldKTsKIAl9CiAKQEAgLTI0Miw3ICsyNzYsNyBAQCB2b2lkICB0cmFuc2Zlcl9jb21wbGV0ZV9j
YihzdHJ1Y3QgYWlvX2NiX2RhdGEgKmFjZCwgc2l6ZV90IHhmcl9jb3VudCwgdTMyIGZsYWdzKQog
CiAvKioqKioqKioqKiAgRmlsZW9wcyAgKioqKioqKioqKi8KIHN0YXRpYwotaW50ICBrcGNfZG1h
X29wZW4oc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbHApCitpbnQga3BjX2Rt
YV9vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmaWxwKQogewogCXN0cnVj
dCBkZXZfcHJpdmF0ZV9kYXRhICpwcml2OwogCXN0cnVjdCBrcGNfZG1hX2RldmljZSAqbGRldiA9
IGtwY19kbWFfbG9va3VwX2RldmljZShpbWlub3IoaW5vZGUpKTsKQEAgLTI1Miw3ICsyODYsNyBA
QCBpbnQgIGtwY19kbWFfb3BlbihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmls
cCkKIAogCWlmICghYXRvbWljX2RlY19hbmRfdGVzdCgmbGRldi0+b3Blbl9jb3VudCkpIHsKIAkJ
YXRvbWljX2luYygmbGRldi0+b3Blbl9jb3VudCk7Ci0JCXJldHVybiAtRUJVU1k7IC8qIGFscmVh
ZHkgb3BlbiAqLworCQlyZXR1cm4gLUVCVVNZOwkvKiBhbHJlYWR5IG9wZW4gKi8KIAl9CiAKIAlw
cml2ID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGRldl9wcml2YXRlX2RhdGEpLCBHRlBfS0VSTkVM
KTsKQEAgLTI2NiwxMCArMzAwLDExIEBAIGludCAga3BjX2RtYV9vcGVuKHN0cnVjdCBpbm9kZSAq
aW5vZGUsIHN0cnVjdCBmaWxlICpmaWxwKQogfQogCiBzdGF0aWMKLWludCAga3BjX2RtYV9jbG9z
ZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlscCkKK2ludCBrcGNfZG1hX2Ns
b3NlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmaWxwKQogewogCXN0cnVjdCBr
cGNfZG1hX2Rlc2NyaXB0b3IgKmN1cjsKLQlzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqcHJpdiA9
IChzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqKWZpbHAtPnByaXZhdGVfZGF0YTsKKwlzdHJ1Y3Qg
ZGV2X3ByaXZhdGVfZGF0YSAqcHJpdiA9CisJICAgIChzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAq
KWZpbHAtPnByaXZhdGVfZGF0YTsKIAlzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZyA9IHByaXYt
PmxkZXY7CiAKIAlsb2NrX2VuZ2luZShlbmcpOwpAQCAtMjc4LDEwICszMTMsMTIgQEAgaW50ICBr
cGNfZG1hX2Nsb3NlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmaWxwKQogCiAJ
Y3VyID0gZW5nLT5kZXNjX2NvbXBsZXRlZC0+TmV4dDsKIAl3aGlsZSAoY3VyICE9IGVuZy0+ZGVz
Y19uZXh0KSB7Ci0JCWRldl9kYmcoJmVuZy0+cGxkZXYtPmRldiwgIkFib3J0aW5nIGRlc2NyaXB0
b3IgJXAgKGFjZCA9ICVwKVxuIiwgY3VyLCBjdXItPmFjZCk7CisJCWRldl9kYmcoJmVuZy0+cGxk
ZXYtPmRldiwgIkFib3J0aW5nIGRlc2NyaXB0b3IgJXAgKGFjZCA9ICVwKVxuIiwKKwkJCWN1ciwg
Y3VyLT5hY2QpOwogCQlpZiAoY3VyLT5EZXNjQ29udHJvbEZsYWdzICYgRE1BX0RFU0NfQ1RMX0VP
UCkgewogCQkJaWYgKGN1ci0+YWNkKQotCQkJCXRyYW5zZmVyX2NvbXBsZXRlX2NiKGN1ci0+YWNk
LCAwLCBBQ0RfRkxBR19BQk9SVCk7CisJCQkJdHJhbnNmZXJfY29tcGxldGVfY2IoY3VyLT5hY2Qs
IDAsCisJCQkJCQkgICAgIEFDRF9GTEFHX0FCT1JUKTsKIAkJfQogCiAJCWNsZWFyX2Rlc2MoY3Vy
KTsKQEAgLTI5NCwxNSArMzMxLDE3IEBAIGludCAga3BjX2RtYV9jbG9zZShzdHJ1Y3QgaW5vZGUg
Kmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlscCkKIAogCXVubG9ja19lbmdpbmUoZW5nKTsKIAotCWF0
b21pY19pbmMoJnByaXYtPmxkZXYtPm9wZW5fY291bnQpOyAvKiByZWxlYXNlIHRoZSBkZXZpY2Ug
Ki8KKwlhdG9taWNfaW5jKCZwcml2LT5sZGV2LT5vcGVuX2NvdW50KTsJLyogcmVsZWFzZSB0aGUg
ZGV2aWNlICovCiAJa2ZyZWUocHJpdik7CiAJcmV0dXJuIDA7CiB9CiAKIHN0YXRpYwotc3NpemVf
dCAga3BjX2RtYV9yZWFkKHN0cnVjdCBmaWxlICpmaWxwLCAgICAgICBjaGFyIF9fdXNlciAqdXNl
cl9idWYsIHNpemVfdCBjb3VudCwgbG9mZl90ICpwcG9zKQorc3NpemVfdCBrcGNfZG1hX3JlYWQo
c3RydWN0IGZpbGUgKmZpbHAsIGNoYXIgX191c2VyICp1c2VyX2J1ZiwKKwkJICAgICBzaXplX3Qg
Y291bnQsIGxvZmZfdCAqcHBvcykKIHsKLQlzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqcHJpdiA9
IChzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqKWZpbHAtPnByaXZhdGVfZGF0YTsKKwlzdHJ1Y3Qg
ZGV2X3ByaXZhdGVfZGF0YSAqcHJpdiA9CisJICAgIChzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAq
KWZpbHAtPnByaXZhdGVfZGF0YTsKIAogCWlmIChwcml2LT5sZGV2LT5kaXIgIT0gRE1BX0ZST01f
REVWSUNFKQogCQlyZXR1cm4gLUVNRURJVU1UWVBFOwpAQCAtMzExLDkgKzM1MCwxMSBAQCBzc2l6
ZV90ICBrcGNfZG1hX3JlYWQoc3RydWN0IGZpbGUgKmZpbHAsICAgICAgIGNoYXIgX191c2VyICp1
c2VyX2J1Ziwgc2l6ZV90IGNvdQogfQogCiBzdGF0aWMKLXNzaXplX3QgIGtwY19kbWFfd3JpdGUo
c3RydWN0IGZpbGUgKmZpbHAsIGNvbnN0IGNoYXIgX191c2VyICp1c2VyX2J1Ziwgc2l6ZV90IGNv
dW50LCBsb2ZmX3QgKnBwb3MpCitzc2l6ZV90IGtwY19kbWFfd3JpdGUoc3RydWN0IGZpbGUgKmZp
bHAsIGNvbnN0IGNoYXIgX191c2VyICp1c2VyX2J1ZiwKKwkJICAgICAgc2l6ZV90IGNvdW50LCBs
b2ZmX3QgKnBwb3MpCiB7Ci0Jc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKnByaXYgPSAoc3RydWN0
IGRldl9wcml2YXRlX2RhdGEgKilmaWxwLT5wcml2YXRlX2RhdGE7CisJc3RydWN0IGRldl9wcml2
YXRlX2RhdGEgKnByaXYgPQorCSAgICAoc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKilmaWxwLT5w
cml2YXRlX2RhdGE7CiAKIAlpZiAocHJpdi0+bGRldi0+ZGlyICE9IERNQV9UT19ERVZJQ0UpCiAJ
CXJldHVybiAtRU1FRElVTVRZUEU7CkBAIC0zMjIsMTcgKzM2MywyMiBAQCBzc2l6ZV90ICBrcGNf
ZG1hX3dyaXRlKHN0cnVjdCBmaWxlICpmaWxwLCBjb25zdCBjaGFyIF9fdXNlciAqdXNlcl9idWYs
IHNpemVfdCBjbwogfQogCiBzdGF0aWMKLWxvbmcgIGtwY19kbWFfaW9jdGwoc3RydWN0IGZpbGUg
KmZpbHAsIHVuc2lnbmVkIGludCBpb2N0bF9udW0sIHVuc2lnbmVkIGxvbmcgaW9jdGxfcGFyYW0p
Citsb25nIGtwY19kbWFfaW9jdGwoc3RydWN0IGZpbGUgKmZpbHAsIHVuc2lnbmVkIGludCBpb2N0
bF9udW0sCisJCSAgIHVuc2lnbmVkIGxvbmcgaW9jdGxfcGFyYW0pCiB7Ci0Jc3RydWN0IGRldl9w
cml2YXRlX2RhdGEgKnByaXYgPSAoc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKilmaWxwLT5wcml2
YXRlX2RhdGE7CisJc3RydWN0IGRldl9wcml2YXRlX2RhdGEgKnByaXYgPQorCSAgICAoc3RydWN0
IGRldl9wcml2YXRlX2RhdGEgKilmaWxwLT5wcml2YXRlX2RhdGE7CiAKIAlzd2l0Y2ggKGlvY3Rs
X251bSkgewogCWNhc2UgS05EX0lPQ1RMX1NFVF9DQVJEX0FERFI6Ci0JCXByaXYtPmNhcmRfYWRk
ciAgPSBpb2N0bF9wYXJhbTsgcmV0dXJuIHByaXYtPmNhcmRfYWRkcjsKKwkJcHJpdi0+Y2FyZF9h
ZGRyID0gaW9jdGxfcGFyYW07CisJCXJldHVybiBwcml2LT5jYXJkX2FkZHI7CiAJY2FzZSBLTkRf
SU9DVExfU0VUX1VTRVJfQ1RMOgotCQlwcml2LT51c2VyX2N0bCAgID0gaW9jdGxfcGFyYW07IHJl
dHVybiBwcml2LT51c2VyX2N0bDsKKwkJcHJpdi0+dXNlcl9jdGwgPSBpb2N0bF9wYXJhbTsKKwkJ
cmV0dXJuIHByaXYtPnVzZXJfY3RsOwogCWNhc2UgS05EX0lPQ1RMX1NFVF9VU0VSX0NUTF9MQVNU
OgotCQlwcml2LT51c2VyX2N0bF9sYXN0ID0gaW9jdGxfcGFyYW07IHJldHVybiBwcml2LT51c2Vy
X2N0bF9sYXN0OworCQlwcml2LT51c2VyX2N0bF9sYXN0ID0gaW9jdGxfcGFyYW07CisJCXJldHVy
biBwcml2LT51c2VyX2N0bF9sYXN0OwogCWNhc2UgS05EX0lPQ1RMX0dFVF9VU0VSX1NUUzoKIAkJ
cmV0dXJuIHByaXYtPnVzZXJfc3RzOwogCX0KQEAgLTM0MSwxMSArMzg3LDEwIEBAIGxvbmcgIGtw
Y19kbWFfaW9jdGwoc3RydWN0IGZpbGUgKmZpbHAsIHVuc2lnbmVkIGludCBpb2N0bF9udW0sIHVu
c2lnbmVkIGxvbmcgaW9jCiB9CiAKIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgIGtwY19k
bWFfZm9wcyA9IHsKLQkub3duZXIgICAgICA9IFRISVNfTU9EVUxFLAotCS5vcGVuICAgICAgICAg
ICA9IGtwY19kbWFfb3BlbiwKLQkucmVsZWFzZSAgICAgICAgPSBrcGNfZG1hX2Nsb3NlLAotCS5y
ZWFkICAgICAgICAgICA9IGtwY19kbWFfcmVhZCwKLQkud3JpdGUgICAgICAgICAgPSBrcGNfZG1h
X3dyaXRlLAotCS51bmxvY2tlZF9pb2N0bCA9IGtwY19kbWFfaW9jdGwsCisJLm93bmVyCQk9IFRI
SVNfTU9EVUxFLAorCS5vcGVuCQk9IGtwY19kbWFfb3BlbiwKKwkucmVsZWFzZQk9IGtwY19kbWFf
Y2xvc2UsCisJLnJlYWQJCT0ga3BjX2RtYV9yZWFkLAorCS53cml0ZQkJPSBrcGNfZG1hX3dyaXRl
LAorCS51bmxvY2tlZF9pb2N0bAk9IGtwY19kbWFfaW9jdGwsCiB9OwotCmRpZmYgLS1naXQgYS9k
cml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGNfZG1hL2twY19kbWFfZHJpdmVyLmMgYi9kcml2ZXJz
L3N0YWdpbmcva3BjMjAwMC9rcGNfZG1hL2twY19kbWFfZHJpdmVyLmMKaW5kZXggYTA1YWU2ZDQw
ZGI5Li4yOWE4NGZhMGZkMzYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9rcGMyMDAwL2tw
Y19kbWEva3BjX2RtYV9kcml2ZXIuYworKysgYi9kcml2ZXJzL3N0YWdpbmcva3BjMjAwMC9rcGNf
ZG1hL2twY19kbWFfZHJpdmVyLmMKQEAgLTMwLDggKzMwLDggQEAgc3RydWN0IGtwY19kbWFfZGV2
aWNlICprcGNfZG1hX2xvb2t1cF9kZXZpY2UoaW50IG1pbm9yKQogCQkJZ290byBvdXQ7CiAJCX0K
IAl9Ci0JYyA9IE5VTEw7IC8vIG5vdC1mb3VuZCBjYXNlCi1vdXQ6CisJYyA9IE5VTEw7CQkvLyBu
b3QtZm91bmQgY2FzZQorIG91dDoKIAltdXRleF91bmxvY2soJmtwY19kbWFfbXR4KTsKIAlyZXR1
cm4gYzsKIH0KQEAgLTUxLDcgKzUxLDggQEAgc3RhdGljIHZvaWQga3BjX2RtYV9kZWxfZGV2aWNl
KHN0cnVjdCBrcGNfZG1hX2RldmljZSAqbGRldikKIH0KIAogLyoqKioqKioqKiogIFN5c0ZTIEF0
dHJpYnV0ZXMgKioqKioqKioqKi8KLXN0YXRpYyBzc2l6ZV90ICBzaG93X2VuZ2luZV9yZWdzKHN0
cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1
ZikKK3N0YXRpYyBzc2l6ZV90IHNob3dfZW5naW5lX3JlZ3Moc3RydWN0IGRldmljZSAqZGV2LAor
CQkJCSBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQogewogCXN0cnVj
dCBrcGNfZG1hX2RldmljZSAqbGRldjsKIAlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldiA9
IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwpAQCAtNjMsMjQgKzY0LDI0IEBAIHN0YXRpYyBzc2l6
ZV90ICBzaG93X2VuZ2luZV9yZWdzKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9h
dHRyaWJ1dGUgKmF0CiAJCXJldHVybiAwOwogCiAJcmV0dXJuIHNjbnByaW50ZihidWYsIFBBR0Vf
U0laRSwKLQkJIkVuZ2luZUNvbnRyb2xTdGF0dXMgICAgICA9IDB4JTA4eFxuIgotCQkiUmVnTmV4
dERlc2NQdHIgICAgICAgICAgID0gMHglMDh4XG4iCi0JCSJSZWdTV0Rlc2NQdHIgICAgICAgICAg
ICAgPSAweCUwOHhcbiIKLQkJIlJlZ0NvbXBsZXRlZERlc2NQdHIgICAgICA9IDB4JTA4eFxuIgot
CQkiZGVzY19wb29sX2ZpcnN0ICAgICAgICAgID0gJXBcbiIKLQkJImRlc2NfcG9vbF9sYXN0ICAg
ICAgICAgICA9ICVwXG4iCi0JCSJkZXNjX25leHQgICAgICAgICAgICAgICAgPSAlcFxuIgotCQki
ZGVzY19jb21wbGV0ZWQgICAgICAgICAgID0gJXBcbiIsCi0JCXJlYWRsKGxkZXYtPmVuZ19yZWdz
ICsgMSksCi0JCXJlYWRsKGxkZXYtPmVuZ19yZWdzICsgMiksCi0JCXJlYWRsKGxkZXYtPmVuZ19y
ZWdzICsgMyksCi0JCXJlYWRsKGxkZXYtPmVuZ19yZWdzICsgNCksCi0JCWxkZXYtPmRlc2NfcG9v
bF9maXJzdCwKLQkJbGRldi0+ZGVzY19wb29sX2xhc3QsCi0JCWxkZXYtPmRlc2NfbmV4dCwKLQkJ
bGRldi0+ZGVzY19jb21wbGV0ZWQKLQkpOworCQkJICJFbmdpbmVDb250cm9sU3RhdHVzICAgICAg
PSAweCUwOHhcbiIKKwkJCSAiUmVnTmV4dERlc2NQdHIgICAgICAgICAgID0gMHglMDh4XG4iCisJ
CQkgIlJlZ1NXRGVzY1B0ciAgICAgICAgICAgICA9IDB4JTA4eFxuIgorCQkJICJSZWdDb21wbGV0
ZWREZXNjUHRyICAgICAgPSAweCUwOHhcbiIKKwkJCSAiZGVzY19wb29sX2ZpcnN0ICAgICAgICAg
ID0gJXBcbiIKKwkJCSAiZGVzY19wb29sX2xhc3QgICAgICAgICAgID0gJXBcbiIKKwkJCSAiZGVz
Y19uZXh0ICAgICAgICAgICAgICAgID0gJXBcbiIKKwkJCSAiZGVzY19jb21wbGV0ZWQgICAgICAg
ICAgID0gJXBcbiIsCisJCQkgcmVhZGwobGRldi0+ZW5nX3JlZ3MgKyAxKSwKKwkJCSByZWFkbChs
ZGV2LT5lbmdfcmVncyArIDIpLAorCQkJIHJlYWRsKGxkZXYtPmVuZ19yZWdzICsgMyksCisJCQkg
cmVhZGwobGRldi0+ZW5nX3JlZ3MgKyA0KSwKKwkJCSBsZGV2LT5kZXNjX3Bvb2xfZmlyc3QsCisJ
CQkgbGRldi0+ZGVzY19wb29sX2xhc3QsCisJCQkgbGRldi0+ZGVzY19uZXh0LAorCQkJIGxkZXYt
PmRlc2NfY29tcGxldGVkKTsKIH0KKwogc3RhdGljIERFVklDRV9BVFRSKGVuZ2luZV9yZWdzLCAw
NDQ0LCBzaG93X2VuZ2luZV9yZWdzLCBOVUxMKTsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBhdHRy
aWJ1dGUgKm5kZF9hdHRyX2xpc3RbXSA9IHsKQEAgLTkxLDE3ICs5MiwxOSBAQCBzdGF0aWMgY29u
c3Qgc3RydWN0IGF0dHJpYnV0ZSAqbmRkX2F0dHJfbGlzdFtdID0gewogc3RhdGljIHN0cnVjdCBj
bGFzcyAqa3BjX2RtYV9jbGFzczsKIAogLyoqKioqKioqKiogIFBsYXRmb3JtIERyaXZlciBGdW5j
dGlvbnMgICoqKioqKioqKiovCi1zdGF0aWMKLWludCAga3BjX2RtYV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwbGRldikKK3N0YXRpYyBpbnQga3BjX2RtYV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwbGRldikKIHsKIAlzdHJ1Y3QgcmVzb3VyY2UgKnIgPSBOVUxMOwogCWlu
dCBydiA9IDA7CiAJZGV2X3QgZGV2OwogCi0Jc3RydWN0IGtwY19kbWFfZGV2aWNlICpsZGV2ID0g
a3phbGxvYyhzaXplb2Yoc3RydWN0IGtwY19kbWFfZGV2aWNlKSwgR0ZQX0tFUk5FTCk7CisJc3Ry
dWN0IGtwY19kbWFfZGV2aWNlICpsZGV2ID0KKwkgICAga3phbGxvYyhzaXplb2Yoc3RydWN0IGtw
Y19kbWFfZGV2aWNlKSwgR0ZQX0tFUk5FTCk7CiAKIAlpZiAoIWxkZXYpIHsKLQkJZGV2X2Vycigm
cGxkZXYtPmRldiwgIiVzOiB1bmFibGUgdG8ga3phbGxvYyBzcGFjZSBmb3Iga3BjX2RtYV9kZXZp
Y2VcbiIsIF9fZnVuY19fKTsKKwkJZGV2X2VycigmcGxkZXYtPmRldiwKKwkJCSIlczogdW5hYmxl
IHRvIGt6YWxsb2Mgc3BhY2UgZm9yIGtwY19kbWFfZGV2aWNlXG4iLAorCQkJX19mdW5jX18pOwog
CQlydiA9IC1FTk9NRU07CiAJCWdvdG8gZXJyX3J2OwogCX0KQEAgLTExOCwyMCArMTIxLDIzIEBA
IGludCAga3BjX2RtYV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikKIAkvLyBH
ZXQgRW5naW5lIHJlZ3MgcmVzb3VyY2UKIAlyID0gcGxhdGZvcm1fZ2V0X3Jlc291cmNlKHBsZGV2
LCBJT1JFU09VUkNFX01FTSwgMCk7CiAJaWYgKCFyKSB7Ci0JCWRldl9lcnIoJmxkZXYtPnBsZGV2
LT5kZXYsICIlczogZGlkbid0IGdldCB0aGUgZW5naW5lIHJlZ3MgcmVzb3VyY2UhXG4iLCBfX2Z1
bmNfXyk7CisJCWRldl9lcnIoJmxkZXYtPnBsZGV2LT5kZXYsCisJCQkiJXM6IGRpZG4ndCBnZXQg
dGhlIGVuZ2luZSByZWdzIHJlc291cmNlIVxuIiwgX19mdW5jX18pOwogCQlydiA9IC1FTlhJTzsK
IAkJZ290byBlcnJfa2ZyZWU7CiAJfQogCWxkZXYtPmVuZ19yZWdzID0gaW9yZW1hcF9ub2NhY2hl
KHItPnN0YXJ0LCByZXNvdXJjZV9zaXplKHIpKTsKIAlpZiAoIWxkZXYtPmVuZ19yZWdzKSB7Ci0J
CWRldl9lcnIoJmxkZXYtPnBsZGV2LT5kZXYsICIlczogZmFpbGVkIHRvIGlvcmVtYXAgZW5naW5l
IHJlZ3MhXG4iLCBfX2Z1bmNfXyk7CisJCWRldl9lcnIoJmxkZXYtPnBsZGV2LT5kZXYsCisJCQki
JXM6IGZhaWxlZCB0byBpb3JlbWFwIGVuZ2luZSByZWdzIVxuIiwgX19mdW5jX18pOwogCQlydiA9
IC1FTlhJTzsKIAkJZ290byBlcnJfa2ZyZWU7CiAJfQogCiAJciA9IHBsYXRmb3JtX2dldF9yZXNv
dXJjZShwbGRldiwgSU9SRVNPVVJDRV9JUlEsIDApOwogCWlmICghcikgewotCQlkZXZfZXJyKCZs
ZGV2LT5wbGRldi0+ZGV2LCAiJXM6IGRpZG4ndCBnZXQgdGhlIElSUSByZXNvdXJjZSFcbiIsIF9f
ZnVuY19fKTsKKwkJZGV2X2VycigmbGRldi0+cGxkZXYtPmRldiwgIiVzOiBkaWRuJ3QgZ2V0IHRo
ZSBJUlEgcmVzb3VyY2UhXG4iLAorCQkJX19mdW5jX18pOwogCQlydiA9IC1FTlhJTzsKIAkJZ290
byBlcnJfa2ZyZWU7CiAJfQpAQCAtMTM5LDIzICsxNDUsMjYgQEAgaW50ICBrcGNfZG1hX3Byb2Jl
KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBsZGV2KQogCiAJLy8gU2V0dXAgbWlzY2RldiBzdHJ1
Y3QKIAlkZXYgPSBNS0RFVihhc3NpZ25lZF9tYWpvcl9udW0sIHBsZGV2LT5pZCk7Ci0JbGRldi0+
a3BjX2RtYV9kZXYgPSBkZXZpY2VfY3JlYXRlKGtwY19kbWFfY2xhc3MsICZwbGRldi0+ZGV2LCBk
ZXYsIGxkZXYsICJrcGNfZG1hJWQiLCBwbGRldi0+aWQpOworCWxkZXYtPmtwY19kbWFfZGV2ID0K
KwkgICAgZGV2aWNlX2NyZWF0ZShrcGNfZG1hX2NsYXNzLCAmcGxkZXYtPmRldiwgZGV2LCBsZGV2
LCAia3BjX2RtYSVkIiwKKwkJCSAgcGxkZXYtPmlkKTsKIAlpZiAoSVNfRVJSKGxkZXYtPmtwY19k
bWFfZGV2KSkgewotCQlkZXZfZXJyKCZsZGV2LT5wbGRldi0+ZGV2LCAiJXM6IGRldmljZV9jcmVh
dGUgZmFpbGVkOiAlZFxuIiwgX19mdW5jX18sIHJ2KTsKKwkJZGV2X2VycigmbGRldi0+cGxkZXYt
PmRldiwgIiVzOiBkZXZpY2VfY3JlYXRlIGZhaWxlZDogJWRcbiIsCisJCQlfX2Z1bmNfXywgcnYp
OwogCQlnb3RvIGVycl9rZnJlZTsKIAl9Ci0KIAkvLyBTZXR1cCB0aGUgRE1BIGVuZ2luZQogCXJ2
ID0gc2V0dXBfZG1hX2VuZ2luZShsZGV2LCAzMCk7CiAJaWYgKHJ2KSB7Ci0JCWRldl9lcnIoJmxk
ZXYtPnBsZGV2LT5kZXYsICIlczogZmFpbGVkIHRvIHNldHVwX2RtYV9lbmdpbmU6ICVkXG4iLCBf
X2Z1bmNfXywgcnYpOworCQlkZXZfZXJyKCZsZGV2LT5wbGRldi0+ZGV2LAorCQkJIiVzOiBmYWls
ZWQgdG8gc2V0dXBfZG1hX2VuZ2luZTogJWRcbiIsIF9fZnVuY19fLCBydik7CiAJCWdvdG8gZXJy
X21pc2NfZGVyZWc7CiAJfQotCiAJLy8gU2V0dXAgdGhlIHN5c2ZzIGZpbGVzCiAJcnYgPSBzeXNm
c19jcmVhdGVfZmlsZXMoJihsZGV2LT5wbGRldi0+ZGV2LmtvYmopLCBuZGRfYXR0cl9saXN0KTsK
IAlpZiAocnYpIHsKLQkJZGV2X2VycigmbGRldi0+cGxkZXYtPmRldiwgIiVzOiBGYWlsZWQgdG8g
YWRkIHN5c2ZzIGZpbGVzOiAlZFxuIiwgX19mdW5jX18sIHJ2KTsKKwkJZGV2X2VycigmbGRldi0+
cGxkZXYtPmRldiwKKwkJCSIlczogRmFpbGVkIHRvIGFkZCBzeXNmcyBmaWxlczogJWRcbiIsIF9f
ZnVuY19fLCBydik7CiAJCWdvdG8gZXJyX2Rlc3Ryb3lfZW5nOwogCX0KIApAQCAtMTczLDggKzE4
Miw3IEBAIGludCAga3BjX2RtYV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikK
IAlyZXR1cm4gcnY7CiB9CiAKLXN0YXRpYwotaW50ICBrcGNfZG1hX3JlbW92ZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwbGRldikKK3N0YXRpYyBpbnQga3BjX2RtYV9yZW1vdmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGxkZXYpCiB7CiAJc3RydWN0IGtwY19kbWFfZGV2aWNlICpsZGV2ID0g
cGxhdGZvcm1fZ2V0X2RydmRhdGEocGxkZXYpOwogCkBAIC0xODUsNyArMTkzLDggQEAgaW50ICBr
cGNfZG1hX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwbGRldikKIAlzeXNmc19yZW1v
dmVfZmlsZXMoJihsZGV2LT5wbGRldi0+ZGV2LmtvYmopLCBuZGRfYXR0cl9saXN0KTsKIAlkZXN0
cm95X2RtYV9lbmdpbmUobGRldik7CiAJa3BjX2RtYV9kZWxfZGV2aWNlKGxkZXYpOwotCWRldmlj
ZV9kZXN0cm95KGtwY19kbWFfY2xhc3MsIE1LREVWKGFzc2lnbmVkX21ham9yX251bSwgbGRldi0+
cGxkZXYtPmlkKSk7CisJZGV2aWNlX2Rlc3Ryb3koa3BjX2RtYV9jbGFzcywKKwkJICAgICAgIE1L
REVWKGFzc2lnbmVkX21ham9yX251bSwgbGRldi0+cGxkZXYtPmlkKSk7CiAJa2ZyZWUobGRldik7
CiAKIAlyZXR1cm4gMDsKQEAgLTE5MywxMCArMjAyLDEwIEBAIGludCAga3BjX2RtYV9yZW1vdmUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGxkZXYpCiAKIC8qKioqKioqKioqICBEcml2ZXIgRnVu
Y3Rpb25zICAqKioqKioqKioqLwogc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIga3BjX2Rt
YV9wbGF0X2RyaXZlcl9pID0gewotCS5wcm9iZSAgICAgICAgPSBrcGNfZG1hX3Byb2JlLAotCS5y
ZW1vdmUgICAgICAgPSBrcGNfZG1hX3JlbW92ZSwKKwkucHJvYmUgPSBrcGNfZG1hX3Byb2JlLAor
CS5yZW1vdmUgPSBrcGNfZG1hX3JlbW92ZSwKIAkuZHJpdmVyID0gewotCQkubmFtZSAgID0gS1Bf
RFJJVkVSX05BTUVfRE1BX0NPTlRST0xMRVIsCisJCS5uYW1lID0gS1BfRFJJVkVSX05BTUVfRE1B
X0NPTlRST0xMRVIsCiAJfSwKIH07CiAKQEAgLTIwNSw5ICsyMTQsMTMgQEAgaW50IF9faW5pdCBr
cGNfZG1hX2RyaXZlcl9pbml0KHZvaWQpCiB7CiAJaW50IGVycjsKIAotCWVyciA9IF9fcmVnaXN0
ZXJfY2hyZGV2KEtQQ19ETUFfQ0hBUl9NQUpPUiwgMCwgS1BDX0RNQV9OVU1fTUlOT1JTLCAia3Bj
X2RtYSIsICZrcGNfZG1hX2ZvcHMpOworCWVyciA9CisJICAgIF9fcmVnaXN0ZXJfY2hyZGV2KEtQ
Q19ETUFfQ0hBUl9NQUpPUiwgMCwgS1BDX0RNQV9OVU1fTUlOT1JTLAorCQkJICAgICAgImtwY19k
bWEiLCAma3BjX2RtYV9mb3BzKTsKIAlpZiAoZXJyIDwgMCkgewotCQlwcl9lcnIoIkNhbid0IGFs
bG9jYXRlIGEgbWFqb3IgbnVtYmVyICglZCkgZm9yIGtwY19kbWEgKGVyciA9ICVkKVxuIiwgS1BD
X0RNQV9DSEFSX01BSk9SLCBlcnIpOworCQlwcl9lcnIKKwkJICAgICgiQ2FuJ3QgYWxsb2NhdGUg
YSBtYWpvciBudW1iZXIgKCVkKSBmb3Iga3BjX2RtYSAoZXJyID0gJWQpXG4iLAorCQkgICAgIEtQ
Q19ETUFfQ0hBUl9NQUpPUiwgZXJyKTsKIAkJZ290byBmYWlsX2NocmRldl9yZWdpc3RlcjsKIAl9
CiAJYXNzaWduZWRfbWFqb3JfbnVtID0gZXJyOwpAQCAtMjIxLDE5ICsyMzQsMjMgQEAgaW50IF9f
aW5pdCBrcGNfZG1hX2RyaXZlcl9pbml0KHZvaWQpCiAKIAllcnIgPSBwbGF0Zm9ybV9kcml2ZXJf
cmVnaXN0ZXIoJmtwY19kbWFfcGxhdF9kcml2ZXJfaSk7CiAJaWYgKGVycikgewotCQlwcl9lcnIo
IkNhbid0IHJlZ2lzdGVyIHBsYXRmb3JtIGRyaXZlciBmb3Iga3BjX2RtYSAoZXJyID0gJWQpXG4i
LCBlcnIpOworCQlwcl9lcnIKKwkJICAgICgiQ2FuJ3QgcmVnaXN0ZXIgcGxhdGZvcm0gZHJpdmVy
IGZvciBrcGNfZG1hIChlcnIgPSAlZClcbiIsCisJCSAgICAgZXJyKTsKIAkJZ290byBmYWlsX3Bs
YXRkcml2ZXJfcmVnaXN0ZXI7CiAJfQogCiAJcmV0dXJuIGVycjsKIAotZmFpbF9wbGF0ZHJpdmVy
X3JlZ2lzdGVyOgorIGZhaWxfcGxhdGRyaXZlcl9yZWdpc3RlcjoKIAljbGFzc19kZXN0cm95KGtw
Y19kbWFfY2xhc3MpOwotZmFpbF9jbGFzc19jcmVhdGU6Ci0JX191bnJlZ2lzdGVyX2NocmRldihL
UENfRE1BX0NIQVJfTUFKT1IsIDAsIEtQQ19ETUFfTlVNX01JTk9SUywgImtwY19kbWEiKTsKLWZh
aWxfY2hyZGV2X3JlZ2lzdGVyOgorIGZhaWxfY2xhc3NfY3JlYXRlOgorCV9fdW5yZWdpc3Rlcl9j
aHJkZXYoS1BDX0RNQV9DSEFSX01BSk9SLCAwLCBLUENfRE1BX05VTV9NSU5PUlMsCisJCQkgICAg
ImtwY19kbWEiKTsKKyBmYWlsX2NocmRldl9yZWdpc3RlcjoKIAlyZXR1cm4gZXJyOwogfQorCiBt
b2R1bGVfaW5pdChrcGNfZG1hX2RyaXZlcl9pbml0KTsKIAogc3RhdGljCkBAIC0yNDEsNiArMjU4
LDggQEAgdm9pZCBfX2V4aXQga3BjX2RtYV9kcml2ZXJfZXhpdCh2b2lkKQogewogCXBsYXRmb3Jt
X2RyaXZlcl91bnJlZ2lzdGVyKCZrcGNfZG1hX3BsYXRfZHJpdmVyX2kpOwogCWNsYXNzX2Rlc3Ry
b3koa3BjX2RtYV9jbGFzcyk7Ci0JX191bnJlZ2lzdGVyX2NocmRldihLUENfRE1BX0NIQVJfTUFK
T1IsIDAsIEtQQ19ETUFfTlVNX01JTk9SUywgImtwY19kbWEiKTsKKwlfX3VucmVnaXN0ZXJfY2hy
ZGV2KEtQQ19ETUFfQ0hBUl9NQUpPUiwgMCwgS1BDX0RNQV9OVU1fTUlOT1JTLAorCQkJICAgICJr
cGNfZG1hIik7CiB9CisKIG1vZHVsZV9leGl0KGtwY19kbWFfZHJpdmVyX2V4aXQpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9zdGFnaW5nL2twYzIwMDAva3BjX2RtYS9rcGNfZG1hX2RyaXZlci5oIGIv
ZHJpdmVycy9zdGFnaW5nL2twYzIwMDAva3BjX2RtYS9rcGNfZG1hX2RyaXZlci5oCmluZGV4IDRj
OGNjODY2YjgyNi4uMTM4ODc1ZTg1ZTU0IDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcva3Bj
MjAwMC9rcGNfZG1hL2twY19kbWFfZHJpdmVyLmgKKysrIGIvZHJpdmVycy9zdGFnaW5nL2twYzIw
MDAva3BjX2RtYS9rcGNfZG1hX2RyaXZlci5oCkBAIC0xOSw0NCArMTksNDQgQEAKIAogc3RydWN0
IGtwMjAwMF9kZXZpY2U7CiBzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgewotCXN0cnVjdCBsaXN0X2hl
YWQgICAgICAgICAgICBsaXN0OwotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgICAgICpwbGRldjsK
LQl1MzIgX19pb21lbSAgICAgICAgICAgICAgICAqZW5nX3JlZ3M7Ci0Jc3RydWN0IGRldmljZSAg
ICAgICAgICAgICAgKmtwY19kbWFfZGV2OwotCXN0cnVjdCBrb2JqZWN0ICAgICAgICAgICAgICBr
b2JqOwotCWNoYXIgICAgICAgICAgICAgICAgICAgICAgICBuYW1lWzE2XTsKKwlzdHJ1Y3QgbGlz
dF9oZWFkIGxpc3Q7CisJc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGxkZXY7CisJdTMyIF9faW9t
ZW0gKmVuZ19yZWdzOworCXN0cnVjdCBkZXZpY2UgKmtwY19kbWFfZGV2OworCXN0cnVjdCBrb2Jq
ZWN0IGtvYmo7CisJY2hhciBuYW1lWzE2XTsKIAotCWludCAgICAgICAgICAgICAgICAgICAgICAg
ICBkaXI7IC8vIERNQV9GUk9NX0RFVklDRSB8fCBETUFfVE9fREVWSUNFCi0Jc3RydWN0IG11dGV4
ICAgICAgICAgICAgICAgIHNlbTsKLQl1bnNpZ25lZCBpbnQgICAgICAgICAgICAgICAgaXJxOwot
CXN0cnVjdCB3b3JrX3N0cnVjdCAgICAgICAgICBpcnFfd29yazsKKwlpbnQgZGlyOwkJLy8gRE1B
X0ZST01fREVWSUNFIHx8IERNQV9UT19ERVZJQ0UKKwlzdHJ1Y3QgbXV0ZXggc2VtOworCXVuc2ln
bmVkIGludCBpcnE7CisJc3RydWN0IHdvcmtfc3RydWN0IGlycV93b3JrOwogCi0JYXRvbWljX3Qg
ICAgICAgICAgICAgICAgICAgIG9wZW5fY291bnQ7CisJYXRvbWljX3Qgb3Blbl9jb3VudDsKIAot
CXNpemVfdCAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZF9ieXRlczsKLQl1MzIgICAg
ICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRfZmxhZ3M7CisJc2l6ZV90IGFjY3VtdWxh
dGVkX2J5dGVzOworCXUzMiBhY2N1bXVsYXRlZF9mbGFnczsKIAogCS8vIERlc2NyaXB0b3IgIlBv
b2wiIGhvdXNla2VlcGluZwotCXUzMiAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjX3Bvb2xf
Y250OwotCXN0cnVjdCBkbWFfcG9vbCAgICAgICAgICAgICpkZXNjX3Bvb2w7Ci0Jc3RydWN0IGtw
Y19kbWFfZGVzY3JpcHRvciAgKmRlc2NfcG9vbF9maXJzdDsKLQlzdHJ1Y3Qga3BjX2RtYV9kZXNj
cmlwdG9yICAqZGVzY19wb29sX2xhc3Q7CisJdTMyIGRlc2NfcG9vbF9jbnQ7CisJc3RydWN0IGRt
YV9wb29sICpkZXNjX3Bvb2w7CisJc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAqZGVzY19wb29s
X2ZpcnN0OworCXN0cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IgKmRlc2NfcG9vbF9sYXN0OwogCi0J
c3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAgKmRlc2NfbmV4dDsKLQlzdHJ1Y3Qga3BjX2RtYV9k
ZXNjcmlwdG9yICAqZGVzY19jb21wbGV0ZWQ7CisJc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAq
ZGVzY19uZXh0OworCXN0cnVjdCBrcGNfZG1hX2Rlc2NyaXB0b3IgKmRlc2NfY29tcGxldGVkOwog
fTsKIAogc3RydWN0IGRldl9wcml2YXRlX2RhdGEgewotCXN0cnVjdCBrcGNfZG1hX2RldmljZSAg
ICAgICpsZGV2OwotCXU2NCAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2FkZHI7Ci0JdTY0
ICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfY3RsOwotCXU2NCAgICAgICAgICAgICAgICAg
ICAgICAgICB1c2VyX2N0bF9sYXN0OwotCXU2NCAgICAgICAgICAgICAgICAgICAgICAgICB1c2Vy
X3N0czsKKwlzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmxkZXY7CisJdTY0IGNhcmRfYWRkcjsKKwl1
NjQgdXNlcl9jdGw7CisJdTY0IHVzZXJfY3RsX2xhc3Q7CisJdTY0IHVzZXJfc3RzOwogfTsKIAog
c3RydWN0IGtwY19kbWFfZGV2aWNlICprcGNfZG1hX2xvb2t1cF9kZXZpY2UoaW50IG1pbm9yKTsK
IAotZXh0ZXJuIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgIGtwY19kbWFfZm9wczsKK2V4
dGVybiBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIGtwY19kbWFfZm9wczsKIAogI2RlZmlu
ZSBFTkdfQ0FQX1BSRVNFTlQgICAgICAgICAgICAgICAgIDB4MDAwMDAwMDEKICNkZWZpbmUgRU5H
X0NBUF9ESVJFQ1RJT04gICAgICAgICAgICAgICAweDAwMDAwMDAyCkBAIC04MiwxNiArODIsMTYg
QEAgZXh0ZXJuIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgIGtwY19kbWFfZm9wczsKICNk
ZWZpbmUgRU5HX0NUTF9ERVNDX0ZFVENIX0VSUl9DTEFTU19NQVNLICAgMHg3MDAwMDAKIAogc3Ry
dWN0IGFpb19jYl9kYXRhIHsKLQlzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAgICAqcHJpdjsKLQlz
dHJ1Y3Qga3BjX2RtYV9kZXZpY2UgICAgICAqbGRldjsKLQlzdHJ1Y3QgY29tcGxldGlvbiAgKmNw
bDsKLQl1bnNpZ25lZCBjaGFyICAgICAgIGZsYWdzOwotCXNpemVfdCAgICAgICAgICAgICAgbGVu
OwotCi0JdW5zaWduZWQgaW50ICAgICAgICBwYWdlX2NvdW50OwotCXN0cnVjdCBwYWdlICAgICAg
ICoqdXNlcl9wYWdlczsKLQlzdHJ1Y3Qgc2dfdGFibGUgICAgIHNndDsKLQlpbnQgICAgICAgICAg
ICAgICAgIG1hcHBlZF9lbnRyeV9jb3VudDsKKwlzdHJ1Y3QgZGV2X3ByaXZhdGVfZGF0YSAqcHJp
djsKKwlzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmxkZXY7CisJc3RydWN0IGNvbXBsZXRpb24gKmNw
bDsKKwl1bnNpZ25lZCBjaGFyIGZsYWdzOworCXNpemVfdCBsZW47CisKKwl1bnNpZ25lZCBpbnQg
cGFnZV9jb3VudDsKKwlzdHJ1Y3QgcGFnZSAqKnVzZXJfcGFnZXM7CisJc3RydWN0IHNnX3RhYmxl
IHNndDsKKwlpbnQgbWFwcGVkX2VudHJ5X2NvdW50OwogfTsKIAogI2RlZmluZSBBQ0RfRkxBR19E
T05FICAgICAgICAgICAgICAgMApAQCAtMTAxLDI3ICsxMDEsMjcgQEAgc3RydWN0IGFpb19jYl9k
YXRhIHsKIAogc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciB7CiAJc3RydWN0IHsKLQkJdm9sYXRp
bGUgdTMyICBEZXNjQnl0ZUNvdW50ICAgICAgICAgICAgICA6MjA7Ci0JCXZvbGF0aWxlIHUzMiAg
RGVzY1N0YXR1c0Vycm9yRmxhZ3MgICAgICAgOjQ7Ci0JCXZvbGF0aWxlIHUzMiAgRGVzY1N0YXR1
c0ZsYWdzICAgICAgICAgICAgOjg7CisJCXZvbGF0aWxlIHUzMiBEZXNjQnl0ZUNvdW50OjIwOwor
CQl2b2xhdGlsZSB1MzIgRGVzY1N0YXR1c0Vycm9yRmxhZ3M6NDsKKwkJdm9sYXRpbGUgdTMyIERl
c2NTdGF0dXNGbGFnczo4OwogCX07Ci0JCXZvbGF0aWxlIHUzMiAgRGVzY1VzZXJDb250cm9sTFM7
Ci0JCXZvbGF0aWxlIHUzMiAgRGVzY1VzZXJDb250cm9sTVM7Ci0JCXZvbGF0aWxlIHUzMiAgRGVz
Y0NhcmRBZGRyTFM7CisJdm9sYXRpbGUgdTMyIERlc2NVc2VyQ29udHJvbExTOworCXZvbGF0aWxl
IHUzMiBEZXNjVXNlckNvbnRyb2xNUzsKKwl2b2xhdGlsZSB1MzIgRGVzY0NhcmRBZGRyTFM7CiAJ
c3RydWN0IHsKLQkJdm9sYXRpbGUgdTMyICBEZXNjQnVmZmVyQnl0ZUNvdW50ICAgICAgICA6MjA7
Ci0JCXZvbGF0aWxlIHUzMiAgRGVzY0NhcmRBZGRyTVMgICAgICAgICAgICAgOjQ7Ci0JCXZvbGF0
aWxlIHUzMiAgRGVzY0NvbnRyb2xGbGFncyAgICAgICAgICAgOjg7CisJCXZvbGF0aWxlIHUzMiBE
ZXNjQnVmZmVyQnl0ZUNvdW50OjIwOworCQl2b2xhdGlsZSB1MzIgRGVzY0NhcmRBZGRyTVM6NDsK
KwkJdm9sYXRpbGUgdTMyIERlc2NDb250cm9sRmxhZ3M6ODsKIAl9OwotCQl2b2xhdGlsZSB1MzIg
IERlc2NTeXN0ZW1BZGRyTFM7Ci0JCXZvbGF0aWxlIHUzMiAgRGVzY1N5c3RlbUFkZHJNUzsKLQkJ
dm9sYXRpbGUgdTMyICBEZXNjTmV4dERlc2NQdHI7CisJdm9sYXRpbGUgdTMyIERlc2NTeXN0ZW1B
ZGRyTFM7CisJdm9sYXRpbGUgdTMyIERlc2NTeXN0ZW1BZGRyTVM7CisJdm9sYXRpbGUgdTMyIERl
c2NOZXh0RGVzY1B0cjsKIAotCQlkbWFfYWRkcl90ICAgIE15RE1BQWRkcjsKLQkJc3RydWN0IGtw
Y19kbWFfZGVzY3JpcHRvciAgICpOZXh0OworCWRtYV9hZGRyX3QgTXlETUFBZGRyOworCXN0cnVj
dCBrcGNfZG1hX2Rlc2NyaXB0b3IgKk5leHQ7CiAKLQkJc3RydWN0IGFpb19jYl9kYXRhICAqYWNk
OwotfSBfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKTsKKwlzdHJ1Y3QgYWlvX2NiX2RhdGEgKmFjZDsK
K30gX19hdHRyaWJ1dGVfXyAoKHBhY2tlZCkpOwogLy8gRGVzY0NvbnRyb2xGbGFnczoKICNkZWZp
bmUgRE1BX0RFU0NfQ1RMX1NPUCAgICAgICAgICAgIEJJVCg3KQogI2RlZmluZSBETUFfREVTQ19D
VExfRU9QICAgICAgICAgICAgQklUKDYpCkBAIC0xNDMsMjYgKzE0MywyNCBAQCBzdHJ1Y3Qga3Bj
X2RtYV9kZXNjcmlwdG9yIHsKIAogI2RlZmluZSBETUFfREVTQ19BTElHTk1FTlQgICAgICAgICAg
MHgyMAogCi1zdGF0aWMgaW5saW5lCi11MzIgIEdldEVuZ2luZUNhcGFiaWxpdGllcyhzdHJ1Y3Qg
a3BjX2RtYV9kZXZpY2UgKmVuZykKK3N0YXRpYyBpbmxpbmUgdTMyIEdldEVuZ2luZUNhcGFiaWxp
dGllcyhzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKIHsKIAlyZXR1cm4gcmVhZGwoZW5nLT5l
bmdfcmVncyArIDApOwogfQogCi1zdGF0aWMgaW5saW5lCi12b2lkICBXcml0ZUVuZ2luZUNvbnRy
b2woc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcsIHUzMiB2YWx1ZSkKK3N0YXRpYyBpbmxpbmUg
dm9pZCBXcml0ZUVuZ2luZUNvbnRyb2woc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcsCisJCQkJ
ICAgICAgdTMyIHZhbHVlKQogewogCXdyaXRlbCh2YWx1ZSwgZW5nLT5lbmdfcmVncyArIDEpOwog
fQogCi1zdGF0aWMgaW5saW5lCi11MzIgIEdldEVuZ2luZUNvbnRyb2woc3RydWN0IGtwY19kbWFf
ZGV2aWNlICplbmcpCitzdGF0aWMgaW5saW5lIHUzMiBHZXRFbmdpbmVDb250cm9sKHN0cnVjdCBr
cGNfZG1hX2RldmljZSAqZW5nKQogewogCXJldHVybiByZWFkbChlbmctPmVuZ19yZWdzICsgMSk7
CiB9CiAKLXN0YXRpYyBpbmxpbmUKLXZvaWQgIFNldENsZWFyRW5naW5lQ29udHJvbChzdHJ1Y3Qg
a3BjX2RtYV9kZXZpY2UgKmVuZywgdTMyIHNldF9iaXRzLCB1MzIgY2xlYXJfYml0cykKK3N0YXRp
YyBpbmxpbmUgdm9pZCBTZXRDbGVhckVuZ2luZUNvbnRyb2woc3RydWN0IGtwY19kbWFfZGV2aWNl
ICplbmcsCisJCQkJCSB1MzIgc2V0X2JpdHMsIHUzMiBjbGVhcl9iaXRzKQogewogCXUzMiB2YWwg
PSBHZXRFbmdpbmVDb250cm9sKGVuZyk7CiAKQEAgLTE3MSw1MiArMTY5LDQ4IEBAIHZvaWQgIFNl
dENsZWFyRW5naW5lQ29udHJvbChzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZywgdTMyIHNldF9i
aXRzLCB1MzIgY2xlYXJfCiAJV3JpdGVFbmdpbmVDb250cm9sKGVuZywgdmFsKTsKIH0KIAotc3Rh
dGljIGlubGluZQotdm9pZCAgU2V0RW5naW5lTmV4dFB0cihzdHJ1Y3Qga3BjX2RtYV9kZXZpY2Ug
KmVuZywgc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAqZGVzYykKK3N0YXRpYyBpbmxpbmUgdm9p
ZCBTZXRFbmdpbmVOZXh0UHRyKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nLAorCQkJCSAgICBz
dHJ1Y3Qga3BjX2RtYV9kZXNjcmlwdG9yICpkZXNjKQogewogCXdyaXRlbChkZXNjLT5NeURNQUFk
ZHIsIGVuZy0+ZW5nX3JlZ3MgKyAyKTsKIH0KIAotc3RhdGljIGlubGluZQotdm9pZCAgU2V0RW5n
aW5lU1dQdHIoc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcsIHN0cnVjdCBrcGNfZG1hX2Rlc2Ny
aXB0b3IgKmRlc2MpCitzdGF0aWMgaW5saW5lIHZvaWQgU2V0RW5naW5lU1dQdHIoc3RydWN0IGtw
Y19kbWFfZGV2aWNlICplbmcsCisJCQkJICBzdHJ1Y3Qga3BjX2RtYV9kZXNjcmlwdG9yICpkZXNj
KQogewogCXdyaXRlbChkZXNjLT5NeURNQUFkZHIsIGVuZy0+ZW5nX3JlZ3MgKyAzKTsKIH0KIAot
c3RhdGljIGlubGluZQotdm9pZCAgQ2xlYXJFbmdpbmVDb21wbGV0ZVB0cihzdHJ1Y3Qga3BjX2Rt
YV9kZXZpY2UgKmVuZykKK3N0YXRpYyBpbmxpbmUgdm9pZCBDbGVhckVuZ2luZUNvbXBsZXRlUHRy
KHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQogewogCXdyaXRlbCgwLCBlbmctPmVuZ19yZWdz
ICsgNCk7CiB9CiAKLXN0YXRpYyBpbmxpbmUKLXUzMiAgR2V0RW5naW5lQ29tcGxldGVQdHIoc3Ry
dWN0IGtwY19kbWFfZGV2aWNlICplbmcpCitzdGF0aWMgaW5saW5lIHUzMiBHZXRFbmdpbmVDb21w
bGV0ZVB0cihzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKIHsKIAlyZXR1cm4gcmVhZGwoZW5n
LT5lbmdfcmVncyArIDQpOwogfQogCi1zdGF0aWMgaW5saW5lCi12b2lkICBsb2NrX2VuZ2luZShz
dHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKK3N0YXRpYyBpbmxpbmUgdm9pZCBsb2NrX2VuZ2lu
ZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKIHsKIAlCVUdfT04oZW5nID09IE5VTEwpOwog
CW11dGV4X2xvY2soJmVuZy0+c2VtKTsKIH0KIAotc3RhdGljIGlubGluZQotdm9pZCAgdW5sb2Nr
X2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZykKK3N0YXRpYyBpbmxpbmUgdm9pZCB1
bmxvY2tfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5nKQogewogCUJVR19PTihlbmcg
PT0gTlVMTCk7CiAJbXV0ZXhfdW5sb2NrKCZlbmctPnNlbSk7CiB9CiAKIC8vLyBTaGFyZWQgRnVu
Y3Rpb25zCi12b2lkICBzdGFydF9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAqZW5n
KTsKLWludCAgIHNldHVwX2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNlICplbmcsIHUz
MiBkZXNjX2NudCk7Ci12b2lkICBzdG9wX2RtYV9lbmdpbmUoc3RydWN0IGtwY19kbWFfZGV2aWNl
ICplbmcpOwotdm9pZCAgZGVzdHJveV9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAq
ZW5nKTsKLXZvaWQgIGNsZWFyX2Rlc2Moc3RydWN0IGtwY19kbWFfZGVzY3JpcHRvciAqZGVzYyk7
Ci1pbnQgICBjb3VudF9kZXNjcmlwdG9yc19hdmFpbGFibGUoc3RydWN0IGtwY19kbWFfZGV2aWNl
ICplbmcpOwotdm9pZCAgdHJhbnNmZXJfY29tcGxldGVfY2Ioc3RydWN0IGFpb19jYl9kYXRhICph
Y2QsIHNpemVfdCB4ZnJfY291bnQsIHUzMiBmbGFncyk7Ci0KLSNlbmRpZiAvKiBLUENfRE1BX0RS
SVZFUl9IICovCi0KK3ZvaWQgc3RhcnRfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2Ug
KmVuZyk7CitpbnQgc2V0dXBfZG1hX2VuZ2luZShzdHJ1Y3Qga3BjX2RtYV9kZXZpY2UgKmVuZywg
dTMyIGRlc2NfY250KTsKK3ZvaWQgc3RvcF9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2Rldmlj
ZSAqZW5nKTsKK3ZvaWQgZGVzdHJveV9kbWFfZW5naW5lKHN0cnVjdCBrcGNfZG1hX2RldmljZSAq
ZW5nKTsKK3ZvaWQgY2xlYXJfZGVzYyhzdHJ1Y3Qga3BjX2RtYV9kZXNjcmlwdG9yICpkZXNjKTsK
K2ludCBjb3VudF9kZXNjcmlwdG9yc19hdmFpbGFibGUoc3RydWN0IGtwY19kbWFfZGV2aWNlICpl
bmcpOwordm9pZCB0cmFuc2Zlcl9jb21wbGV0ZV9jYihzdHJ1Y3QgYWlvX2NiX2RhdGEgKmFjZCwg
c2l6ZV90IHhmcl9jb3VudCwKKwkJCSAgdTMyIGZsYWdzKTsKKworI2VuZGlmCQkJCS8qIEtQQ19E
TUFfRFJJVkVSX0ggKi8KLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZGV2ZWwgbWFpbGluZyBsaXN0CmRldmVsQGxpbnV4ZHJpdmVycHJv
amVjdC5vcmcKaHR0cDovL2RyaXZlcmRldi5saW51eGRyaXZlcnByb2plY3Qub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpdmVyZGV2LWRldmVsCg==
